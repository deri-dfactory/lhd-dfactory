(this["webpackJsonpapp.deri.finance"]=this["webpackJsonpapp.deri.finance"]||[]).push([[5],{1:function(t,e,n){"use strict";n.d(e,"c",(function(){return d})),n.d(e,"z",(function(){return l})),n.d(e,"A",(function(){return y})),n.d(e,"D",(function(){return m})),n.d(e,"y",(function(){return f})),n.d(e,"w",(function(){return b})),n.d(e,"x",(function(){return v})),n.d(e,"B",(function(){return h})),n.d(e,"C",(function(){return T})),n.d(e,"f",(function(){return g})),n.d(e,"g",(function(){return x})),n.d(e,"e",(function(){return w})),n.d(e,"v",(function(){return k})),n.d(e,"d",(function(){return O})),n.d(e,"i",(function(){return j})),n.d(e,"b",(function(){return M})),n.d(e,"r",(function(){return A})),n.d(e,"t",(function(){return C})),n.d(e,"p",(function(){return B})),n.d(e,"q",(function(){return S})),n.d(e,"j",(function(){return D})),n.d(e,"u",(function(){return F})),n.d(e,"m",(function(){return I})),n.d(e,"o",(function(){return E})),n.d(e,"n",(function(){return P})),n.d(e,"k",(function(){return R})),n.d(e,"s",(function(){return q})),n.d(e,"l",(function(){return U})),n.d(e,"h",(function(){return L}));var a=n(0),r=n.n(a),i=n(2),u=(n(42),n(21)),s=n.n(u),o=n(28),c=n.n(o);n.d(e,"a",(function(){return c.a}));var p=n(18);c.a.config({DECIMAL_PLACES:18,ROUNDING_MODE:c.a.ROUND_DOWN,EXPONENTIAL_AT:256});var d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===e?c()(t):e>0?c()(t).times(c()("1".concat("0".repeat(e)))):c()(t).div(c()("1".concat("0".repeat(-e))))},l=function(t,e){return t.gte(e)?t:e},y=function(t,e){return t.lte(e)?t:e},m=function(t){return s.a.utils.toChecksumAddress(t)},f=function(t){return s.a.utils.hexToUtf8(t)},b=function(t){return s.a.utils.hexToNumber(t)},v=function(t){return s.a.utils.hexToNumberString(t)},h=function(t){return d(t,18).toFixed(0)},T=function(t){return"".concat(d(t).sd(4).times(100).toFixed(4).toString(),"%")},g=function(t){return d(t,-18)},x=function(t){return d(t).toString()},w=function(t){return 1===d(t).toNumber()},k=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.some((function(t){return isNaN(t.toString())||"0"===t.toString()}))},O=function(){var t=Object(i.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e);case 3:if(!t.sent.ok){t.next=6;break}return t.abrupt("return",!0);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:return t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=Object(i.a)(r.a.mark((function t(){var e,n,a,i=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=i.length>0&&void 0!==i[0]?i[0]:[],n=0;case 2:if(!(n<e.length)){t.next=11;break}return a=e[n],t.next=6,O(a);case 6:if(!t.sent){t.next=8;break}return t.abrupt("return",a);case 8:n++,t.next=2;break;case 11:throw new Error("No alive http server");case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M="0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",A=function(t){var e;switch(t=V(t)){case"1":e="ethereum";break;case"56":e="bsc";break;case"128":e="heco";break;case"3":e="ropsten";break;case"42":e="kovan";break;case"97":e="bsctestnet";break;case"256":e="hecotestnet";break;default:throw new Error("The networkId is not valid")}return e},C=function(t,e){t=V(t);var n=Object(p.e)(p.b.get()).filter((function(e){return e.chainId===t})).filter((function(t){return t.pool===e}));return n.length>0?{poolAddress:n[0].pool,bTokenAddress:n[0].bToken,pTokenAddress:n[0].pToken,lTokenAddress:n[0].lToken,dTokenAdress:n[0].dToken,MinningVaultAddress:n[0].MiningVault,bTokenSymbol:n[0].bTokenSymbol,symbol:n[0].symbol,unit:n[0].unit,initialBlock:n[0].initialBlock}:(console.log("getPoolContractAddress(): contract address is not found: ".concat(t," ").concat(e)),[])},B=function(t){t=V(t);var e=Object(p.e)(p.b.get()).filter((function(e){return e.chainId===t}));if(e.length>0&&e[0].MiningVault)return e[0].MiningVault},S=function(t){t=V(t);var e=Object(p.e)(p.b.get()).filter((function(e){return e.chainId===t}));if(e.length>0&&e[0].MiningVaultRouter)return e[0].MiningVaultRouter},D=function(t){var e=Object(p.c)();if(e[t])return parseInt(e[t]);console.log("cannot find the annual block number with chainId: ".concat(t))},F=function(t,e){t=V(t);var n=Object(p.k)(p.b.get()).filter((function(e){return e.chainId===t})).filter((function(t){return t.pool===e}));return n.length>0?{poolAddress:n[0].pool,bTokenAddress:n[0].bToken,pTokenAddress:n[0].pToken,lTokenAddress:n[0].lToken,dTokenAdress:n[0].dToken,MinningVaultAddress:n[0].MiningVault}:(console.log("getSlpContractAddress(): contract address is not found: ".concat(t," ").concat(e)),{})},I=function(t,e){t=V(t);var n=Object(p.d)(p.b.get()).filter((function(e){return e.chainId===t})).filter((function(t){return t.pool===e}));return n.length>0?{poolAddress:n[0].pool,bTokenAddress:n[0].bToken,lTokenAddress:n[0].lToken}:(console.log("getClpContractAddress(): contract address is not found: ".concat(t," ").concat(e)),{})},E=function(t,e){t=V(t);var n=Object(p.i)(p.b.get()).filter((function(e){return e.chainId===t})).filter((function(t){return t.pool===e}));return n.length>0?{poolAddress:n[0].pool,bTokenAddress:n[0].bToken,lTokenAddress:n[0].lToken,type:n[0].type}:(console.log("getLpContractAddress(): contract address is not found: ".concat(t," ").concat(e)),{})},P=function(t){t=V(t);var e=Object(p.h)(p.b.get()).filter((function(e){return e.chainId===t}));return e.length>0?{deriAddress:e[0].Deri,wormholeAddress:e[0].Wormhole,bTokenSymbol:e[0].bTokenSymbol}:(console.log("getDeriContractAddress(): contract address is not found: ".concat(t)),{})},_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=C(e,n),r=a.symbol,i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"BTCUSD";return"".concat(t,"?symbol=").concat(e)};return"prod"===t||"production"===t?r?i("BTCUSD"!==r?"https://oracle3.deri.finance/price":"https://oracle.deri.finance/price",r):"https://oracle.deri.finance/price":r?i("https://oracle2.deri.finance/price",r):"https://oracle2.deri.finance/price"},R=function(){var t=Object(i.a)(r.a.mark((function t(e,n){var a,i,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=_(p.b.get(),e,n),t.next=4,fetch(a);case 4:return i=t.sent,t.next=7,i.json();case 7:return u=t.sent,t.abrupt("return",g(u.price));case 11:t.prev=11,t.t0=t.catch(0),console.log("fetch BTCUSD price error: ".concat(t.t0));case 14:return t.abrupt("return","0");case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}(),q=function(){var t=Object(i.a)(r.a.mark((function t(e,n){var a,i,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=_(p.b.get(),e,n),console.log("oracle url",a),t.next=5,fetch(a);case 5:return i=t.sent,t.next=8,i.json();case 8:return u=t.sent,t.abrupt("return",u);case 12:t.prev=12,t.t0=t.catch(0),console.log("fetch Oracle info error: ".concat(t.t0));case 15:return t.abrupt("return",{});case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}(),U=function(t){t=V(t);var e=p.a.filter((function(e){return e.chainId===t}));if(1!==e.length)throw new Error("Cannot find the chain provider url with chainId: ".concat(t));try{return e[0].provider_urls[0]}catch(n){throw new Error("Cannot find the alive chain provider url with chainId: ".concat(t))}},L=function(t){return t.toFormat().replaceAll(",","").toString()},V=function(t){var e=t;return"number"===typeof t&&(e=t.toString()),e}},103:function(t,e,n){"use strict";var a=n(5),r=n(7),i=n(12),u=n(11),s=n(4),o=n.n(s),c=n(250),p=n.n(c),d=n(139),l=n.n(d),y=(n(265),n(40)),m=function(t){Object(i.a)(n,t);var e=Object(u.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"componentWillMount",value:function(){l.a.start()}},{key:"componentWillUnmount",value:function(){l.a.done()}},{key:"render",value:function(){return Object(y.jsx)("div",{})}}]),n}(o.a.Component);e.a=function(t){return p()({loader:t,loading:function(){return Object(y.jsx)(m,{})}})}},144:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return s})),n.d(e,"b",(function(){return o}));var a=n(28),r=n.n(a);function i(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0==e?r()(t):e>0?r()(t).times(r()("1"+"0".repeat(e))):r()(t).div(r()("1"+"0".repeat(-e)))}(t,-18)}function u(t){return t&&"".concat(t.substr(0,6),"...").concat(t.substr(-4))}function s(t){return t&&(+t).toFixed(4)}function o(t,e){return+t===+e}},146:function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return l}));var a=n(0),r=n.n(a),i=n(42),u=n(2),s=n(21),o=n.n(s),c=n(60),p=n(1),d=function(){var t=Object(u.a)(r.a.mark((function t(e,n){var a,u,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===Object(i.a)(window.ethereum)){t.next=13;break}return t.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:return a=t.sent,t.t0=p.w,t.next=7,window.ethereum.request({method:"eth_chainId"});case 7:return t.t1=t.sent,u=(0,t.t0)(t.t1),s=Array.isArray(a)&&a[0],window.ethereum.on("accountsChanged",(function(t){var e;e=t.length>0?t[0]:"","function"===typeof n?n(e):window.location.reload()})),window.ethereum.on("chainChanged",(function(t){var n=Object(p.w)(t);"function"===typeof e?e(n):window.location.reload()})),t.abrupt("return",{success:!0,account:s,chainId:u});case 13:return t.abrupt("return",{success:!1,error:"Cannot connect wallet, please install MetaMask."});case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),l=function(){var t=Object(u.a)(r.a.mark((function t(e,n){var a,i,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(c.a)(),t.next=3,a.eth.getBalance(n);case 3:return i=t.sent,u=o.a.utils.fromWei(i),t.abrupt("return",u);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},18:function(t,e,n){"use strict";n.d(e,"b",(function(){return a.a})),n.d(e,"a",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"k",(function(){return u})),n.d(e,"d",(function(){return s})),n.d(e,"i",(function(){return o})),n.d(e,"h",(function(){return c})),n.d(e,"c",(function(){return p})),n.d(e,"f",(function(){return d.a})),n.d(e,"g",(function(){return d.c})),n.d(e,"j",(function(){return l}));var a=n(87),r=[{provider_urls:["https://mainnet.infura.io/v3/ec73e2f0c79a42c0997ee535364de584"],chainId:"1"},{provider_urls:["https://bsc-dataseed.binance.org","https://bsc-dataseed1.defibit.io/","https://bsc-dataseed1.ninicoin.io/"],chainId:"56"},{provider_urls:["https://http-mainnet.hecochain.com"],chainId:"128"},{provider_urls:["https://ropsten.infura.io/v3/ec73e2f0c79a42c0997ee535364de584"],chainId:"3"},{provider_urls:["https://kovan.infura.io/v3/ec73e2f0c79a42c0997ee535364de584"],chainId:"42"},{provider_urls:["https://data-seed-prebsc-2-s3.binance.org:8545/","https://data-seed-prebsc-1-s1.binance.org:8545/","https://data-seed-prebsc-2-s1.binance.org:8545/","https://data-seed-prebsc-1-s2.binance.org:8545/","https://data-seed-prebsc-2-s2.binance.org:8545/","https://data-seed-prebsc-1-s3.binance.org:8545/"],chainId:"97"},{provider_urls:["https://http-testnet.hecochain.com"],chainId:"256"}],i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev";return"prod"===t?[{pool:"0x639a9C2fAe976D089dCcc2ffAE51Ef1dd04B7985",bToken:"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",pToken:"0x3c11c4990447F0AD575eBd74E8cD17bf61848A15",lToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0x6C8d3F31b2ad1AE997Afa20EAd88cb67E93C6E17",initialBlock:"5288684",bTokenSymbol:"BUSD",symbol:"BTCUSD",unit:"BTC",chainId:"56"},{pool:"0x011346B81e5326904B5B76A11dECAf2c67eFFc23",bToken:"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",pToken:"0xaE6429b4CDDDFefDB6ac702183c836B4e62Da410",lToken:"0xd8f78c47b0e0943B3Cb2cE1e1726472C4ddd2F98",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0x6C8d3F31b2ad1AE997Afa20EAd88cb67E93C6E17",initialBlock:"6753399",bTokenSymbol:"BUSD",symbol:"COIN",unit:"COIN",chainId:"56"},{pool:"0x3C2970466635AAeFEd1cfe630D051Fa6D281aEbB",bToken:"0xdAC17F958D2ee523a2206206994597C13D831ec7",pToken:"0x9c6134F9e759C6812aaC102FC1a9f7cA5615fD33",lToken:"0x43CA6D7129d7F490d5B91B4D14D7c877D15A92dA",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0x7826Ef8Da65494EA21D64D8E6A76AB1BED042FD8",initialBlock:"11949433",bTokenSymbol:"USDT",symbol:"BTCUSD",unit:"BTC",chainId:"1"},{pool:"0x7137cc9f252dc405dadc35F597dA8B32e8653603",bToken:"0x3449FC1Cd036255BA1EB19d65fF4BA2b8903A69a",pToken:"0x15aD9b67cf54037127fD986Ca3bB775f9FC4ad05",lToken:"0xeC27d4c53C2E29F1113A9667c0B19442df83c1f1",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0x7826Ef8Da65494EA21D64D8E6A76AB1BED042FD8",initialBlock:"11860070",bTokenSymbol:"BAC",symbol:"BTCUSD",unit:"BTC",chainId:"1"},{pool:"0x9b404BAB12CE0D5039e7313d9e24f4b5c8E8E8e3",bToken:"0x0298c2b32eaE4da002a15f36fdf7615BEa3DA047",pToken:"0x732Ba556B304fd74Cd14b74ab8762A7D9f26d476",lToken:"0x90fE976Cbb48E0761A84DDA2974024377994a997",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0xF0bC8b772f26F8DeB46c1aebbEA7C8d502Abf3b8",initialBlock:"2557914",bTokenSymbol:"HUSD",symbol:"BTCUSD",unit:"BTC",chainId:"128"}]:[{pool:"0x67eE8f0CB17e750219Bd58d433D52ab4B3d8A081",bToken:"0x8F038C454B6E68B2988706a1a5f78dE2C4634097",pToken:"0xad794Adc3Ed6085A79Ba3e2FCD13Df8d33d462Ec",lToken:"0x37732230ac101f59490762Ef73Be43B5E5Ec4949",initialBlock:"9986356",bTokenSymbol:"USDT",symbol:"BTCUSD",unit:"BTC",chainId:"3"},{pool:"0xFFe402106E8F73F0A44C7350C2b734e048f448f2",bToken:"0xa0354a4bB59657ad9A2b3eeC4f53f7A6Fb171DD1",pToken:"0x5FeF67FD24f37b90E0c96324380F63413dF22f78",lToken:"0xCdDbf76F76B9F95135F5D531fefc344258ff322a",initialBlock:"7796681",bTokenSymbol:"BUSD",symbol:"BTCUSD",unit:"BTC",chainId:"97"},{pool:"0x02A614844212f71049c469902F7A20F6540a2792",bToken:"0xa0354a4bB59657ad9A2b3eeC4f53f7A6Fb171DD1",pToken:"0x4396025914025F1C8B74788bF7c64f879064FbA6",lToken:"0x2E80928a9eC105FE79cfC4B54c65d185AC3b7E9C",initialBlock:"8108552",bTokenSymbol:"BUSD",symbol:"COIN",unit:"COIN",chainId:"97"},{pool:"0xE5a4fCd3CE3a824bF15D5FABd390cF44E83AbE8B",bToken:"0x02c9840fD044abFd58E9674ecc232e8b1F323fE8",pToken:"0xfa803C4528A1b9f91DFc5f8b4ff940f9FE4F4635",lToken:"0xbD57300A178075F774b5F0F9f367B9A2912b7b5e",initialBlock:"3663327",bTokenSymbol:"HUSD",symbol:"BTCUSD",unit:"BTC",chainId:"256"}]},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev";return"prod"===t?[{pool:"0xc2EdaD668740f1aA35E4D8f227fB8E17dcA888Cd",bToken:"0xA3DfbF2933FF3d96177bde4928D0F5840eE55600",pToken:"0x0000000000000000000000000000000000000000",lToken:"0x0000000000000000000000000000000000000000",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0x7826Ef8Da65494EA21D64D8E6A76AB1BED042FD8",chainId:"1",bTokenSymbol:"DERI-USDT SLP ONSEN"}]:(console.log("getSlpContractAddressConfig(): no config for dev environment"),[])},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev";return"prod"===t?[{pool:"0x4de2Ac273aD1BBe2F5C41f986d7b3cef8383Df98",bToken:"0xDc7188AC11e124B1fA650b73BA88Bf615Ef15256",pToken:"0x0000000000000000000000000000000000000000",lToken:"0x83b31Abc899863B8Eb06952994580CE86414156E",dToken:"0x0000000000000000000000000000000000000000",MiningVault:"0x0000000000000000000000000000000000000000",initialBlock:"6894880",chainId:"56",bTokenSymbol:"CAKE-LP",symbol:"BTCUSD"}]:[{pool:"0x7aad5ADF82d8B85c826c91924AcdACafAAA945f5",bToken:"0x76340AB22aECAaa8f52D5341d2df404CBA966039",pToken:"0x0000000000000000000000000000000000000000",lToken:"0xd2138766005FAB46E20e6F7e1C4C32A375CfAC56",dToken:"0x0000000000000000000000000000000000000000",MiningVault:"0x0000000000000000000000000000000000000000",initialBlock:"8309032",chainId:"97",bTokenSymbol:"CAKE-LP",symbol:"BTCUSD"}]},o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev";return"prod"===t?[{pool:"0xc2EdaD668740f1aA35E4D8f227fB8E17dcA888Cd",bToken:"0xA3DfbF2933FF3d96177bde4928D0F5840eE55600",pToken:"0x0000000000000000000000000000000000000000",lToken:"0x0000000000000000000000000000000000000000",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0x7826Ef8Da65494EA21D64D8E6A76AB1BED042FD8",chainId:"1",bTokenSymbol:"DERI-USDT SLP ONSEN",type:"slp"},{pool:"0x4de2Ac273aD1BBe2F5C41f986d7b3cef8383Df98",bToken:"0xDc7188AC11e124B1fA650b73BA88Bf615Ef15256",pToken:"0x0000000000000000000000000000000000000000",lToken:"0x83b31Abc899863B8Eb06952994580CE86414156E",dToken:"0x0000000000000000000000000000000000000000",MiningVault:"0x0000000000000000000000000000000000000000",initialBlock:"6894880",chainId:"56",bTokenSymbol:"CAKE-LP",symbol:"BTCUSD",type:"clp"}]:[{pool:"0x7aad5ADF82d8B85c826c91924AcdACafAAA945f5",bToken:"0x76340AB22aECAaa8f52D5341d2df404CBA966039",pToken:"0x0000000000000000000000000000000000000000",lToken:"0xd2138766005FAB46E20e6F7e1C4C32A375CfAC56",dToken:"0x0000000000000000000000000000000000000000",MiningVault:"0x0000000000000000000000000000000000000000",initialBlock:"8309032",chainId:"97",bTokenSymbol:"CAKE-LP",symbol:"BTCUSD",type:"clp"}]},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev";return"prod"===t?[{Deri:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",Wormhole:"0x6874640cC849153Cb3402D193C33c416972159Ce",bTokenSymbol:"DERI",chainId:"1"},{Deri:"0xe60eaf5A997DFAe83739e035b005A33AfdCc6df5",Wormhole:"0x15a5969060228031266c64274a54e02Fbd924AbF",bTokenSymbol:"DERI",chainId:"56"},{Deri:"0x2bdA3e331Cf735D9420e41567ab843441980C4B8",Wormhole:"0x134A04497e9a0b1F8850fEaf87eD18ec348dDa46",bTokenSymbol:"DERI",chainId:"128"}]:[{Deri:"0x88Fe79a3b6AC7EeF3d55B2e388fa18400590698B",Wormhole:"0xcb28Fa7dFa1844Cdb47aD5f03484f6131293Fd2e",bTokenSymbol:"DERI",chainId:"3"},{Deri:"0x8dC0aA48bbc69BaCD2548c6b7adCDeF8DDbA50B2",Wormhole:"0x9028e43114Df57C97c15355224E575DF1e244919",bTokenSymbol:"DERI",chainId:"97"},{Deri:"0x932458a637F8060AF747167656651b64d4c36620",Wormhole:"0x629B0D3D32BE5ee5F7BF3845914d26446c04165d",bTokenSymbol:"DERI",chainId:"256"}]},p=function(){return{1:"2367422",56:"10497304",128:"10511369",3:"2367422",97:"10497304",256:"10511369"}},d=n(58),l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev";return"prod"===t||"production"===t?"https://api.deri.finance":"http://47.52.225.179"}},235:function(t,e,n){"use strict";n.d(e,"h",(function(){return l})),n.d(e,"g",(function(){return y})),n.d(e,"e",(function(){return m})),n.d(e,"i",(function(){return f})),n.d(e,"j",(function(){return b})),n.d(e,"a",(function(){return v})),n.d(e,"d",(function(){return h})),n.d(e,"b",(function(){return T})),n.d(e,"f",(function(){return g})),n.d(e,"c",(function(){return x}));var a=n(16),r=n(0),i=n.n(r),u=n(2),s=n(6),o=n(59),c=n(38),p=n(1),d=n(26),l=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a){var r,u,o,c,d,l,y,m,f,b,v,h,T,g,x,w,k,O,j;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(p.t)(e,n),u=r.bTokenAddress,o=Object(s.j)(e,n),c=Object(s.a)(e,u,n),t.next=5,o.getParameters();case 5:return d=t.sent,l=d.multiplier,y=d.feeRatio,m=d.minPoolMarginRatio,f=d.minInitialMarginRatio,b=d.minMaintenanceMarginRatio,v=d.minAddLiquidity,h=d.redemptionFeeRatio,T=d.fundingRateCoefficient,g=d.minLiquidationReward,x=d.maxLiquidationReward,w=d.liquidationCutRatio,k=d.priceDelayAllowance,t.next=20,o.symbol();case 20:return O=t.sent,t.next=23,c.symbol();case 23:return j=t.sent,t.abrupt("return",{addresses:n,symbol:O,bSymbol:j,multiplier:l.toString(),feeRatio:y.toString(),minPoolMarginRatio:m.toString(),minInitialMarginRatio:f.toString(),minMaintenanceMarginRatio:b.toString(),minAddLiquidity:v.toString(),redemptionFeeRatio:h.toString(),fundingRateCoefficient:T.toString(),minLiquidationReward:g.toString(),maxLiquidationReward:x.toString(),liquidationCutRatio:w.toString(),priceDelayAllowance:k.toString()});case 25:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),y=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a){var r,u,o,c,l,y,m,f,b,v,h,T,g;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.k)(e,n);case 2:return r=t.sent,u=Object(p.t)(e,n),o=u.pTokenAddress,c=Object(s.j)(e,n),l=Object(s.i)(e,o,n),t.next=8,c.getParameters();case 8:return y=t.sent,m=y.multiplier,f=y.minInitialMarginRatio,b=y.minMaintenanceMarginRatio,console.log("getPositionInfo",e,n,a,r),t.next=15,l.getPositionInfo(a);case 15:return v=t.sent,h=v.volume,T=v.margin,g=v.cost,t.abrupt("return",{volume:h.toString(),averageEntryPrice:Object(d.a)(h,g,m).toString(),margin:T.toString(),marginHeld:Object(d.e)(r,h,m,f).toString(),unrealizedPnl:Object(d.h)(r,h,m,g).toString(),liquidationPrice:Object(d.c)(h,T,g,m,b).toString()});case 20:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),m=function(){var t=Object(u.a)(i.a.mark((function t(e,n,r){var u,o,c,l,y,m,f,b,v,h,T,g,x,w,k,O,j;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=Object(p.t)(e,n),o=u.lTokenAddress,c=Object(s.j)(e,n),l=Object(s.f)(e,o,n),t.next=5,Promise.all([l.balance(r),l.totalSupply()]);case 5:return y=t.sent,m=Object(a.a)(y,2),f=m[0],b=m[1],t.next=11,Object(p.k)(e,n);case 11:return v=t.sent,t.next=14,c.getStateValues();case 14:return h=t.sent,T=h.liquidity,g=h.tradersNetCost,x=h.tradersNetVolume,t.next=20,c.getParameters();case 20:return w=t.sent,k=w.multiplier,O=w.minPoolMarginRatio,j=T.plus(g.minus(x.times(v).times(k))),t.abrupt("return",{totalSupply:b.toString(),poolLiquidity:T.toString(),shares:f.toString(),shareValue:Object(d.i)(b,j).toString(),maxRemovableShares:Object(d.f)(f,b,T,x,g,k,O,v).toString()});case 25:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),f=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a){var r,u,o,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(p.t)(e,n),u=r.bTokenAddress,o=Object(s.a)(e,u,n),t.next=4,o.balance(a);case 4:return c=t.sent,t.abrupt("return",c.toString());case 6:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),b=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a){var r,u,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(p.t)(e,n),u=r.bTokenAddress,o=Object(s.a)(e,u,n),t.next=4,o.isUnlocked(a);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),v=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a){var r,u,s,o,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=c.c.get(),u=c.a.get(),""!==r){t.next=6;break}return t.next=5,c.c.update(e,n);case 5:r=c.c.get();case 6:if(u.multiplier){t.next=10;break}return t.next=9,c.a.update(e,n);case 9:u=t.sent;case 10:return o=(s=u).multiplier,d=s.feeRatio,t.abrupt("return",Object(p.c)(a).abs().times(r).times(o).times(d).toString());case 12:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),h=function(){var t=Object(u.a)(i.a.mark((function t(e,n){var a,r,u,d,l,y,m,f;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(s.j)(e,n),t.next=3,a.getFundingRate().catch((function(t){return console.log("getFundingRate",t)}));case 3:return r=t.sent,c.b.set(e,n,r),t.next=7,Object(o.a)(e,n);case 7:if(u=t.sent,!r){t.next=12;break}return d=r.fundingRate,l=r.fundingRatePerBlock,y=r.liquidity,m=r.tradersNetVolume,f=u.volume24h,t.abrupt("return",{fundingRate0:Object(p.C)(d),fundingRatePerBlock:Object(p.a)(l).toExponential(10),liquidity:y.toString(),volume:Object(p.f)(f).toString(),tradersNetVolume:m.toString()});case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),T=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a){var r,u,o,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=c.b.get(e,n)){t.next=6;break}return o=Object(s.j)(e,n),t.next=5,o.getFundingRate();case 5:u=t.sent;case 6:if(!u){t.next=13;break}if(l=[Object(p.c)(u.tradersNetVolume).plus(Object(p.c)(a)).toString(),u.price,u.multiplier,u.liquidity,u.fundingRateCoefficient],!p.v.apply(void 0,l)){t.next=10;break}return t.abrupt("return",{fundingRate1:"0"});case 10:return r=d.b.apply(void 0,l),r=Object(d.k)(e,r),t.abrupt("return",{fundingRate1:Object(p.C)(r)});case 13:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),g=function(){var t=Object(u.a)(i.a.mark((function t(e,n){var a,r,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=c.b.get(e,n)){t.next=6;break}return r=Object(s.j)(e,n),t.next=5,r.getFundingRate();case 5:a=t.sent;case 6:if(!a){t.next=9;break}return u=a.liquidityUsed,t.abrupt("return",{liquidityUsed0:Object(p.C)(u)});case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),x=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a){var r,u,o,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=c.b.get(e,n)){t.next=6;break}return u=Object(s.j)(e,n),t.next=5,u.getFundingRate().catch((function(t){return console.log("getLiquidityUsed",t)}));case 5:r=t.sent;case 6:if(!r){t.next=12;break}if(o=[Object(p.c)(r.tradersNetVolume).plus(Object(p.c)(a)).toString(),r.price,r.multiplier,r.liquidity,r.poolMarginRatio],!p.v.apply(void 0,o)){t.next=10;break}return t.abrupt("return",{liquidityUsed1:"0"});case 10:return l=d.d.apply(void 0,o),t.abrupt("return",{liquidityUsed1:Object(p.C)(l)});case 12:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()},236:function(t,e,n){"use strict";n.d(e,"g",(function(){return d})),n.d(e,"c",(function(){return l})),n.d(e,"h",(function(){return y})),n.d(e,"a",(function(){return m})),n.d(e,"e",(function(){return f})),n.d(e,"f",(function(){return b})),n.d(e,"b",(function(){return v})),n.d(e,"d",(function(){return h}));var a=n(16),r=n(0),i=n.n(r),u=n(2),s=n(6),o=n(59),c=n(1),p=n(26),d=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a){var r,u,o,p,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(c.t)(e,n),u=r.bTokenAddress,o=Object(s.a)(e,u,n),t.prev=2,t.next=5,o.unlock(a);case 5:d=t.sent,p={success:!0,transaction:d},t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),p={success:!1,error:t.t0};case 12:return t.abrupt("return",p);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n,a){return t.apply(this,arguments)}}(),l=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a,r){var u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=Object(s.j)(e,n),t.next=3,u.depositMargin(a,Object(c.B)(r));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}(),y=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a,r){var u,o,d,l,y,m,f,b,v,h,T,g,x,w,k;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=Object(c.t)(e,n),d=o.pTokenAddress,l=Object(s.j)(e,n),y=Object(s.i)(e,d,n),t.next=5,Object(c.k)(e,n);case 5:return m=t.sent,t.next=8,y.getPositionInfo(a);case 8:return f=t.sent,b=f.volume,v=f.margin,h=f.cost,t.next=14,l.getParameters();case 14:if(T=t.sent,g=T.multiplier,x=T.minInitialMarginRatio,w=Object(p.g)(m,b,v,h,g,x),!Object(c.c)(r).lte(w)){t.next=31;break}return t.prev=19,t.next=22,l._transactPool("withdrawMargin(uint256,uint256,uint256,uint8,bytes32,bytes32)",[Object(c.B)(r)],a);case 22:k=t.sent,u={success:!0,transaction:k},t.next=29;break;case 26:t.prev=26,t.t0=t.catch(19),u={success:!1,error:t.t0};case 29:t.next=32;break;case 31:u={success:!1,error:"amount exceeds allowed"};case 32:return t.abrupt("return",u);case 33:case"end":return t.stop()}}),t,null,[[19,26]])})));return function(e,n,a,r){return t.apply(this,arguments)}}(),m=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a,r){var u,o,p;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=Object(s.j)(e,n),t.prev=1,t.next=4,u._transactPool("addLiquidity(uint256,uint256,uint256,uint8,bytes32,bytes32)",[Object(c.B)(r)],a);case 4:p=t.sent,o={success:!0,transaction:p},t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),o={success:!1,error:t.t0};case 11:return t.abrupt("return",o);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n,a,r){return t.apply(this,arguments)}}(),f=function(){var t=Object(u.a)(i.a.mark((function t(e,n,r,u){var o,d,l,y,m,f,b,v,h,T,g,x,w,k,O,j,M,A,C;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=Object(c.t)(e,n),d=o.lTokenAddress,l=Object(s.j)(e,n),y=Object(s.f)(e,d,n),t.next=5,Object(c.k)(e,n);case 5:return m=t.sent,t.next=8,Promise.all([y.balance(r),y.totalSupply()]);case 8:return f=t.sent,b=Object(a.a)(f,2),v=b[0],h=b[1],t.next=14,l.getParameters();case 14:return T=t.sent,g=T.multiplier,x=T.minPoolMarginRatio,t.next=19,l.getStateValues();case 19:if(w=t.sent,k=w.liquidity,O=w.tradersNetVolume,j=w.tradersNetCost,M=Object(p.f)(v,h,k,O,j,g,x,m),!Object(c.c)(u).lte(M)){t.next=37;break}return t.prev=25,t.next=28,l._transactPool("removeLiquidity(uint256,uint256,uint256,uint8,bytes32,bytes32)",[Object(c.B)(u)],r);case 28:C=t.sent,A={success:!0,transaction:C},t.next=35;break;case 32:t.prev=32,t.t0=t.catch(25),A={success:!1,error:t.t0};case 35:t.next=38;break;case 37:A={success:!1,error:"shares exceeds allowed"};case 38:return t.abrupt("return",A);case 39:case"end":return t.stop()}}),t,null,[[25,32]])})));return function(e,n,a,r){return t.apply(this,arguments)}}(),b=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a,r){var u,o,d,l,y,m,f,b,v,h,T,g,x,w,k,O,j,M,A,C=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=C.length>4&&void 0!==C[4]?C[4]:"0",t.next=3,Object(c.k)(e,n);case 3:return o=t.sent,d=Object(c.t)(e,n),l=d.pTokenAddress,y=Object(s.j)(e,n),m=Object(s.i)(e,l,n),t.next=9,y.getParameters();case 9:return f=t.sent,b=f.multiplier,v=f.minInitialMarginRatio,h=f.minPoolMarginRatio,t.next=15,y.getStateValues();case 15:return T=t.sent,g=T.liquidity,x=T.tradersNetVolume,t.next=20,m.getPositionInfo(a);case 20:if(w=t.sent,k=w.volume,O=w.margin,!(M=Object(p.j)(o,O,k,g,x,b,h,v,Object(c.c)(r),Object(c.c)(u))).success){t.next=37;break}return t.prev=25,t.next=28,y._transactPool("tradeWithMargin(int256,uint256,uint256,uint256,uint8,bytes32,bytes32)",[Object(c.B)(r),Object(c.B)(u)],a);case 28:A=t.sent,j={success:!0,transaction:A},t.next=35;break;case 32:t.prev=32,t.t0=t.catch(25),j={success:!1,error:t.t0};case 35:t.next=38;break;case 37:j={success:!1,error:M.message};case 38:return t.abrupt("return",j);case 39:case"end":return t.stop()}}),t,null,[[25,32]])})));return function(e,n,a,r){return t.apply(this,arguments)}}(),v=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a){var r,u,o,p,d,l,y,m;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(c.t)(e,n),u=r.pTokenAddress,o=Object(s.j)(e,n),p=Object(s.i)(e,u,n),t.next=5,p.getPositionInfo(a);case 5:if(d=t.sent,(l=(l=d.volume).negated()).eq(0)){t.next=21;break}return t.prev=9,t.next=12,o._transactPool("tradeWithMargin(int256,uint256,uint256,uint256,uint8,bytes32,bytes32)",[Object(c.B)(l),"0"],a);case 12:m=t.sent,y={success:!0,transaction:m},t.next=19;break;case 16:t.prev=16,t.t0=t.catch(9),y={success:!1,error:t.t0};case 19:t.next=22;break;case 21:y={success:!1,error:"no position to close"};case 22:return t.abrupt("return",y);case 23:case"end":return t.stop()}}),t,null,[[9,16]])})));return function(e,n,a){return t.apply(this,arguments)}}(),h=function(){var t=Object(u.a)(i.a.mark((function t(e,n){var a,r,u,p,d,l,y,m,f,b,v;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.d)(n);case 2:if(r=t.sent,u=Object(c.B)(r.amount),p=r.deadline,d=r.nonce,l=r.v,y=r.r,m=r.s,!r.valid){t.next=28;break}if(!(f=Object(c.p)(e))){t.next=25;break}return b=Object(s.g)(e,f),t.prev=13,t.next=16,b.mintDToken(n,u,p,d,l,y,m);case 16:v=t.sent,a={success:!0,transaction:v},t.next=23;break;case 20:t.prev=20,t.t0=t.catch(13),a={success:!1,error:t.t0};case 23:t.next=26;break;case 25:a={success:!1,error:"cannot find the mining vault address in chain ".concat(e)};case 26:t.next=29;break;case 28:a={success:!1,error:"userinfo is not valid"};case 29:return t.abrupt("return",a);case 30:case"end":return t.stop()}}),t,null,[[13,20]])})));return function(e,n){return t.apply(this,arguments)}}()},237:function(t,e){},238:function(t,e,n){"use strict";n(0),n(16),n(2),n(6),n(1)},239:function(t,e,n){"use strict";n(42),n(0),n(16),n(2),n(6),n(1)},240:function(t,e,n){"use strict";n(16),n(0),n(2),n(18),n(1),n(61)},26:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"k",(function(){return u})),n.d(e,"i",(function(){return s})),n.d(e,"f",(function(){return o})),n.d(e,"a",(function(){return c})),n.d(e,"e",(function(){return p})),n.d(e,"h",(function(){return d})),n.d(e,"g",(function(){return l})),n.d(e,"c",(function(){return y})),n.d(e,"j",(function(){return m}));var a=n(1),r=function(t,e,n,r,i){return Object(a.c)(t*e*n/r*i).abs()},i=function(t,e,n,a,r){return t*e*n/a*r},u=function(t,e){var n=Object(a.j)(t);return console.log(n),Object(a.c)(e).times(n)},s=function(t,e){return t.eq(0)?Object(a.c)(0):e.div(t)},o=function(t,e,n,r,i,u,o,c){var p=s(e,n),d=r.times(c).times(u),l=n.plus(i).minus(d).minus(d.abs().times(o));return Object(a.z)(Object(a.A)(t,l.div(p)),Object(a.c)(0))},c=function(t,e,n){return t.eq(0)?Object(a.c)(0):e.div(t).div(n)},p=function(t,e,n,a){return e.abs().times(t).times(n).times(a)},d=function(t,e,n,a){return e.times(t).times(n).minus(a)},l=function(t,e,n,r,i,u){if(e.eq(0))return n;var s=p(t,e,i,u),o=d(t,e,i,r);return Object(a.z)(n.plus(o).minus(s.times(1.02)),Object(a.c)(0))},y=function(t,e,n,r,i){var u=n.minus(e).div(t).div(r),s=t.gt(0)?u.div(Object(a.c)(1).minus(i)):u.div(Object(a.c)(1).plus(i));return s=Object(a.z)(s,Object(a.c)(0))},m=function(t,e,n,a,r,i,u,s,o,c){var p=n.plus(o).abs().times(t).times(i).times(s),d=a.div(u).div(t).div(i);return e.plus(c).gte(p)?o.lte(d.minus(r))&&o.gte(d.negated().minus(r))?{success:!0}:{success:!1,message:"Pool insufficient liquidity"}:{success:!1,message:"Trader insufficient margin"}}},267:function(t,e,n){},280:function(t,e){},303:function(t,e){},305:function(t,e){},319:function(t,e){},320:function(t,e){},38:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return p}));var a=n(0),r=n.n(a),i=n(2),u=n(6),s=n(1),o=function(){var t={};return{get:function(e,n){var a="".concat(e,".").concat(n);if(Object.keys(t).includes(a))return t[a];console.log("Cache key is not in resouceMap: ".concat(a))},set:function(e,n,a){var r="".concat(e,".").concat(n);t[r]=a}}}(),c=(function(){var t=""}(),function(){var t="",e=null;return{get:function(){return""===t&&console.log("please init 'price' first"),t},_update:function(e,n){return Object(i.a)(r.a.mark((function a(){var i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(s.k)(e,n);case 2:""!==(i=a.sent)&&(t=i);case 4:case"end":return a.stop()}}),a)})))()},update:function(t,n){var a=this;e=setInterval((function(){a._update(t,n)}),2e3)},clear:function(){e&&clearInterval(e),t=""}}}()),p=function(){var t={};return{get:function(){return t.multiplier||console.log("please init 'perpetual pool parameters' first"),t},update:function(e,n){return Object(i.a)(r.a.mark((function a(){var i,s;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=Object(u.j)(e,n),a.next=3,i.getParameters();case 3:return(s=a.sent).multiplier&&(t=s),a.abrupt("return",s);case 6:case"end":return a.stop()}}),a)})))()}}}()},383:function(t,e){},385:function(t,e){},417:function(t,e){},422:function(t,e){},424:function(t,e){},431:function(t,e){},444:function(t,e){},462:function(t,e){},473:function(t,e){},476:function(t,e){},49:function(t,e,n){"use strict";var a=n(146);n.d(e,"connectWallet",(function(){return a.a})),n.d(e,"getUserWalletBalance",(function(){return a.b}));var r=n(235);n.d(e,"getEstimatedFee",(function(){return r.a})),n.d(e,"getEstimatedFundingRate",(function(){return r.b})),n.d(e,"getEstimatedLiquidityUsed",(function(){return r.c})),n.d(e,"getFundingRate",(function(){return r.d})),n.d(e,"getLiquidityInfo",(function(){return r.e})),n.d(e,"getLiquidityUsed",(function(){return r.f})),n.d(e,"getPositionInfo",(function(){return r.g})),n.d(e,"getSpecification",(function(){return r.h})),n.d(e,"getWalletBalance",(function(){return r.i})),n.d(e,"isUnlocked",(function(){return r.j}));var i=n(236);n.d(e,"addLiquidity",(function(){return i.a})),n.d(e,"closePosition",(function(){return i.b})),n.d(e,"depositMargin",(function(){return i.c})),n.d(e,"mintDToken",(function(){return i.d})),n.d(e,"removeLiquidity",(function(){return i.e})),n.d(e,"tradeWithMargin",(function(){return i.f})),n.d(e,"unlock",(function(){return i.g})),n.d(e,"withdrawMargin",(function(){return i.h}));var u=n(59);n.d(e,"getPoolInfoApy",(function(){return u.a})),n.d(e,"getPoolLiquidity",(function(){return u.b})),n.d(e,"getSlpPoolInfoApy",(function(){return u.c})),n.d(e,"getUserInfoAll",(function(){return u.d})),n.d(e,"getUserInfoInPool",(function(){return u.f}));var s=n(237);n.o(s,"PerpetualPoolParametersCache")&&n.d(e,"PerpetualPoolParametersCache",(function(){return s.PerpetualPoolParametersCache})),n.o(s,"deriToNatural")&&n.d(e,"deriToNatural",(function(){return s.deriToNatural})),n.o(s,"getTradeHistory")&&n.d(e,"getTradeHistory",(function(){return s.getTradeHistory})),n.o(s,"priceCache")&&n.d(e,"priceCache",(function(){return s.priceCache}));n(238),n(239);var o=n(61);n.d(e,"getTradeHistory",(function(){return o.b}));n(240);var c=n(38);n.d(e,"PerpetualPoolParametersCache",(function(){return c.a})),n.d(e,"priceCache",(function(){return c.c}));var p=n(18);n.d(e,"DeriEnv",(function(){return p.b})),n.d(e,"getContractAddressConfig",(function(){return p.e})),n.d(e,"getSlpContractAddressConfig",(function(){return p.k}));var d=n(1);n.d(e,"deriToNatural",(function(){return d.f}))},528:function(t,e){Number.prototype.toFixed=function(t){if(t>20||t<0)throw new RangeError("toFixed() digits argument must be between 0 and 20");var e=Number(this);if(isNaN(e)||e>=Math.pow(10,21))return e.toString();if("undefined"==typeof t||0==t)return Math.round(e).toString();var n=e.toString(),a=n.split(".");if(a.length<2)return c(n);var r=a[0],i=a[1],u=i.substr(t,1);if(i.length==t)return n;if(i.length<t)return c(n);if(n=r+"."+i.substr(0,t),parseInt(u,10)>=5){var s=Math.pow(10,t),o=Number(n.replace(".",""));o++,n=c((o/=s)+"")}return n;function c(e){var n=e.indexOf(".");if(-1===n){e+=".";for(var a=0;a<t;a++)e+="0";return e}for(var r=t-(e.length-n-1),i=0;i<r;i++)e+="0";return e}}},549:function(t,e,n){"use strict";n.r(e);var a=n(4),r=n.n(a),i=n(90),u=n.n(i),s=n(142),o=n(138),c=n(103),p=n(40),d=Object(c.a)((function(){return n.e(8).then(n.bind(null,618))})),l=Object(c.a)((function(){return n.e(9).then(n.bind(null,617))}));var y=function(){return o.isBrowser?Object(p.jsx)(d,{}):o.isMobile?Object(p.jsx)(l,{}):void 0},m=(n(267),n(143)),f=n(101),b=n(0),v=n.n(b),h=n(2),T=n(5),g=n(49),x=n(89),w=n(144),k=n(13),O=x[g.DeriEnv.get()].chainInfo,j=function t(){var e=this;Object(T.a)(this,t),this.detail={},this.isConnected=function(){return!!e.detail.account},this.connect=Object(h.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.connectWallet)();case 2:return n=t.sent,t.abrupt("return",new Promise(function(){var t=Object(h.a)(v.a.mark((function t(a,r){var i,u,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.success){t.next=8;break}return i=n.chainId,u=n.account,t.next=4,e.set(i,u);case 4:s=t.sent,a(s),t.next=9;break;case 8:r(null);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 4:case"end":return t.stop()}}),t)}))),this.set=function(){var t=Object(h.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.getUserWalletBalance)(n,a);case 2:return r=t.sent,i={chainId:n,account:a,balance:r,formatBalance:Object(w.d)(r)},O[n]&&Object.assign(i,Object(f.a)(Object(f.a)({},O[n]),{},{supported:!0})),e.detail=i,t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),this.get=function(){return e.detail},this.remove=function(){e.detail=null,sessionStorage.removeItem("mm_wallet_key"),window.location.reload()},Object(k.m)(this,{detail:k.o,set:k.f,connect:k.f})},M=(n(528),n(7)),A=n(136),C=n.n(A),B=x[g.DeriEnv.get()].oracle,S=C.a.CancelToken,D=function(){function t(){Object(T.a)(this,t),this.index=0,this.source=S.source(),this.cancel=!1,Object(k.m)(this,{index:k.o,start:k.f,loadIndex:k.f,pause:k.f,resume:k.f})}return Object(M.a)(t,[{key:"loadIndex",value:function(){var t=Object(h.a)(v.a.mark((function t(e){var n,a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return n=B[e.toUpperCase()],t.next=4,C.a.get(n,{params:{symbol:e},cancelToken:this.source.token});case 4:(a=t.sent)&&a.data&&!1===this.cancel&&(this.index=Object(g.deriToNatural)(a.data.price).toNumber());case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"start",value:function(t){var e=this;this.inteval||(this.cancel=!1,this.source=S.source(),this.inteval=setInterval((function(){return e.loadIndex(t)}),1e3))}},{key:"pause",value:function(){this.cancel=!0,this.source.cancel(),clearInterval(this.inteval),this.inteval=null}}]),t}(),F=new j,I=new D;u.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(s.a,{children:Object(p.jsx)(m.a,{wallet:F,indexPrice:I,children:Object(p.jsx)(y,{})})})}),document.getElementById("root")),window.wallet=F},58:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return i}));var a=function(){return["https://data-seed-prebsc-1-s1.binance.org:8545/","https://data-seed-prebsc-2-s1.binance.org:8545/","https://data-seed-prebsc-1-s2.binance.org:8545/","https://data-seed-prebsc-2-s2.binance.org:8545/","https://data-seed-prebsc-1-s3.binance.org:8545/","https://data-seed-prebsc-2-s3.binance.org:8545/"]},r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev",e=arguments.length>1?arguments[1]:void 0;return"prod"!==t&&"production"!==t||!e?"0x7C1267188379f57d92e640E519151229E1eA5565":"0x824B6238EdCbaCCAF83C3F60C0cEB38bEb7C9e89"},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev",e=arguments.length>1?arguments[1]:void 0;return"prod"!==t&&"production"!==t||!e?"0x3c9118C7f9f4ef0Ab5333cD710922dBCCC2d870d":"0xd8137F05c1F432A80525053c473d0e286c4F46f0"}},59:function(t,e,n){"use strict";n.d(e,"d",(function(){return l})),n.d(e,"b",(function(){return y})),n.d(e,"a",(function(){return m})),n.d(e,"c",(function(){return f})),n.d(e,"f",(function(){return b})),n.d(e,"e",(function(){return v}));var a=n(0),r=n.n(a),i=n(16),u=n(2),s=n(6),o=n(1),c=function(){var t=Object(u.a)(r.a.mark((function t(e){var n,a,u,c,p,d,l,y,m,f,b;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(s.c)(!0),e=Object(o.D)(e),t.next=4,n.getValues(["".concat(e,".claim.chainId"),"".concat(e,".claim.amount"),"".concat(e,".claim.deadline"),"".concat(e,".claim.nonce"),"".concat(e,".claim.v"),"".concat(e,".claim.r"),"".concat(e,".claim.s"),"".concat(e,".claim.valid")]).catch((function(t){return console.log("getUserInfo",t)}));case 4:if(!(a=t.sent)){t.next=8;break}return u=Object(i.a)(a,8),c=u[0],p=u[1],d=u[2],l=u[3],y=u[4],m=u[5],f=u[6],b=u[7],t.abrupt("return",{chainId:Object(o.g)(c),amount:Object(o.f)(p).toString(),deadline:Object(o.g)(d),nonce:Object(o.g)(l),v:Object(o.g)(y),r:m,s:f,valid:Object(o.e)(b)});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(u.a)(r.a.mark((function t(e){var n,a,u,c,p;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(s.c)(!0),e=Object(o.D)(e),t.next=4,n.getValues(["".concat(e,".claim.harvest.lp"),"".concat(e,".claim.harvest.trade")]).catch((function(t){return console.log("getUserInfoHarvest",t)}));case 4:if(!(a=t.sent)){t.next=8;break}return u=Object(i.a)(a,2),c=u[0],p=u[1],t.abrupt("return",{lp:Object(o.f)(c).toString(),trade:Object(o.f)(p).toString()});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(u.a)(r.a.mark((function t(e){var n,a,u,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(s.c)(!0),e=Object(o.D)(e),t.next=4,n.getValues(["".concat(e,".claim.total")]).catch((function(t){return console.log("getUserInfoTotal",t)}));case 4:if(!(a=t.sent)){t.next=8;break}return u=Object(i.a)(a,1),c=u[0],t.abrupt("return",{total:Object(o.f)(c).toString()});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(u.a)(r.a.mark((function t(e){var n,a,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(e);case 2:return n=t.sent,t.next=5,p(e);case 5:return a=t.sent,t.next=8,d(e);case 8:return i=t.sent,t.abrupt("return",Object.assign(n,a,i));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=Object(u.a)(r.a.mark((function t(e,n){var a,u,c,p,d,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(s.c)(),t.prev=1,t.next=4,a.getValues(["".concat(e,".").concat(n,".liquidity")]).catch((function(t){return console.log("getPoolLiquidity",t)}));case 4:if(u=t.sent,c=Object(o.t)(e,n),p=c.symbol,!u){t.next=9;break}return d=Object(i.a)(u,1),l=d[0],t.abrupt("return",{liquidity:Object(o.f)(l).toString(),symbol:p});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}(),m=function(){var t=Object(u.a)(r.a.mark((function t(e,n){var a,u,c,p,d,l,y;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(s.c)(!0),t.prev=1,u=Object(o.r)(e),t.next=5,a.getValues(["".concat(u,".").concat(n,".apy"),"".concat(u,".").concat(n,".volume.1h"),"".concat(u,".").concat(n,".volume.24h")]).catch((function(t){return console.log("getPoolInfoApy",t)}));case 5:if(!(c=t.sent)){t.next=9;break}return p=Object(i.a)(c,3),d=p[0],l=p[1],y=p[2],t.abrupt("return",{apy:Object(o.f)(d).toString(),volume1h:Object(o.f)(l).toString(),volume24h:Object(o.f)(y).toString()});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}(),f=function(){var t=Object(u.a)(r.a.mark((function t(e,n){var a,u,c,p,d,l,y;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(s.c)(!0),t.prev=1,u=Object(o.r)(e),t.next=5,a.getValues(["".concat(u,".").concat(n,".apy"),"".concat(u,".").concat(n,".volume.1h"),"".concat(u,".").concat(n,".volume.24h")]).catch((function(t){return console.log("getPoolInfoApy",t)}));case 5:if(!(c=t.sent)){t.next=9;break}return p=Object(i.a)(c,3),d=p[0],l=p[1],y=p[2],t.abrupt("return",{apy:Object(o.f)(d).toString(),volume1h:Object(o.f)(l).toString(),volume24h:Object(o.f)(y).toString()});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}(),b=function(){var t=Object(u.a)(r.a.mark((function t(e,n,a){var u,c,p,d,l,y;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=Object(s.c)(!0),a=Object(o.D)(a),t.prev=2,c=Object(o.r)(e),t.next=6,u.getValues(["".concat(c,".").concat(n,".").concat(a,".volume.1h"),"".concat(c,".").concat(n,".").concat(a,".volume.24h")]).catch((function(t){return console.log("getUserInfoInPool",t)}));case 6:if(!(p=t.sent)){t.next=10;break}return d=Object(i.a)(p,2),l=d[0],y=d[1],t.abrupt("return",{volume1h:Object(o.f)(l).toString(),volume24h:Object(o.f)(y).toString()});case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e,n,a){return t.apply(this,arguments)}}(),v=function(){var t=Object(u.a)(r.a.mark((function t(e){var n,a,u,c,p,d,l,y,m,f,b,v,h,T;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(s.c)(),e=Object(o.D)(e),t.next=4,n.getValues(["".concat(e,".claim.chainId"),"".concat(e,".claim.amount"),"".concat(e,".claim.deadline"),"".concat(e,".claim.nonce"),"".concat(e,".claim.v1"),"".concat(e,".claim.r1"),"".concat(e,".claim.s1"),"".concat(e,".claim.v2"),"".concat(e,".claim.r2"),"".concat(e,".claim.s2"),"".concat(e,".claim.valid")]).catch((function(t){return console.log("getUserInfoAllForAirDrop",t)}));case 4:if(!(a=t.sent)){t.next=8;break}return u=Object(i.a)(a,11),c=u[0],p=u[1],d=u[2],l=u[3],y=u[4],m=u[5],f=u[6],b=u[7],v=u[8],h=u[9],T=u[10],t.abrupt("return",{chainId:Object(o.g)(c),amount:Object(o.f)(p).toString(),deadline:Object(o.g)(d),nonce:Object(o.g)(l),v1:Object(o.g)(y),r1:m,s1:f,v2:Object(o.g)(b),r2:v,s2:h,valid:Object(o.e)(T)});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},6:function(t,e,n){"use strict";n.d(e,"c",(function(){return Y})),n.d(e,"d",(function(){return K})),n.d(e,"j",(function(){return J})),n.d(e,"a",(function(){return X})),n.d(e,"i",(function(){return Q})),n.d(e,"f",(function(){return Z})),n.d(e,"g",(function(){return $})),n.d(e,"k",(function(){return tt})),n.d(e,"b",(function(){return et})),n.d(e,"e",(function(){return nt})),n.d(e,"l",(function(){return at})),n.d(e,"h",(function(){return rt}));var a=n(253),r=n(16),i=n(48),u=n(0),s=n.n(u),o=n(2),c=n(5),p=n(7),d=n(12),l=n(11),y=n(21),m=n.n(y),f=n(60),b=532731,v=function(){function t(e,n,a){Object(c.a)(this,t),this.chainId=e,this.contractAddress=n,this.web3=a?Object(f.b)(e):Object(f.a)()}return Object(p.a)(t,[{key:"setAccount",value:function(t){return this.accountAddress=t,this}},{key:"setPool",value:function(t){return this.poolAddress=t,this}},{key:"_call",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n,a,r=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:[],t.next=3,(n=this.contract.methods)[e].apply(n,Object(i.a)(a)).call();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_estimatedGas",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n,a,r,u,o,c=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=c.length>1&&void 0!==c[1]?c[1]:[],a=c.length>2?c[2]:void 0,r=0,u=0;case 4:if(!(u<20)){t.next=18;break}return t.prev=5,t.next=8,(o=this.contract.methods)[e].apply(o,Object(i.a)(n)).estimateGas({from:a});case 8:return r=t.sent,r=parseInt(1.25*r),t.abrupt("break",18);case 13:t.prev=13,t.t0=t.catch(5);case 15:u++,t.next=4;break;case 18:return 0==r&&(r=b),r>b&&(r=b),t.abrupt("return",r);case 21:case"end":return t.stop()}}),t,this,[[5,13]])})));return function(e){return t.apply(this,arguments)}}()},{key:"_getTransactionReceipt",value:function(t){var e=this;return function n(a,r){e.web3.eth.getTransactionReceipt(t,(function(t,e){t?r(t):null===e?setTimeout((function(){return n(a,r)}),500):!1===e.status?(e.errorMessage="Transaction failed",r(e)):a(e)}))}}},{key:"_transact",value:function(){var t=Object(o.a)(s.a.mark((function t(e,n,a){var u,o,c,p,d,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this._estimatedGas(e,n,a),this.web3.eth.getGasPrice()]);case 2:return o=t.sent,c=Object(r.a)(o,2),p=c[0],c[1],d=[{from:a,to:this.contractAddress,gas:m.a.utils.numberToHex(p),value:m.a.utils.numberToHex("0"),data:(u=this.contract.methods)[e].apply(u,Object(i.a)(n)).encodeABI()}],t.next=9,window.ethereum.request({method:"eth_sendTransaction",params:d});case 9:return l=t.sent,t.next=12,new Promise(this._getTransactionReceipt(l));case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t,this)})));return function(e,n,a){return t.apply(this,arguments)}}()}]),t}(),h=n(1),T=n(26),g=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"lShares",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"AddLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"DepositMargin",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"target",type:"address"}],name:"ExecuteMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"int256",name:"volume",type:"int256"},{indexed:!1,internalType:"int256",name:"cost",type:"int256"},{indexed:!1,internalType:"uint256",name:"margin",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"},{indexed:!1,internalType:"uint256",name:"price",type:"uint256"},{indexed:!1,internalType:"address",name:"liquidator",type:"address"},{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"}],name:"Liquidate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"target",type:"address"}],name:"PrepareMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"lShares",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"RemoveLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"int256",name:"tradeVolume",type:"int256"},{indexed:!1,internalType:"uint256",name:"price",type:"uint256"}],name:"Trade",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"WithdrawMargin",type:"event"},{inputs:[{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"addLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bAmount",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"addLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"approveMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"depositMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bAmount",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"depositMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"source",type:"address"}],name:"executeMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAddresses",outputs:[{internalType:"address",name:"bToken",type:"address"},{internalType:"address",name:"pToken",type:"address"},{internalType:"address",name:"lToken",type:"address"},{internalType:"address",name:"oracle",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getParameters",outputs:[{internalType:"uint256",name:"multiplier",type:"uint256"},{internalType:"uint256",name:"feeRatio",type:"uint256"},{internalType:"uint256",name:"minPoolMarginRatio",type:"uint256"},{internalType:"uint256",name:"minInitialMarginRatio",type:"uint256"},{internalType:"uint256",name:"minMaintenanceMarginRatio",type:"uint256"},{internalType:"uint256",name:"minAddLiquidity",type:"uint256"},{internalType:"uint256",name:"redemptionFeeRatio",type:"uint256"},{internalType:"uint256",name:"fundingRateCoefficient",type:"uint256"},{internalType:"uint256",name:"minLiquidationReward",type:"uint256"},{internalType:"uint256",name:"maxLiquidationReward",type:"uint256"},{internalType:"uint256",name:"liquidationCutRatio",type:"uint256"},{internalType:"uint256",name:"priceDelayAllowance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getStateValues",outputs:[{internalType:"int256",name:"cumuFundingRate",type:"int256"},{internalType:"uint256",name:"cumuFundingRateBlock",type:"uint256"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"int256",name:"tradersNetVolume",type:"int256"},{internalType:"int256",name:"tradersNetCost",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"symbol_",type:"string"},{internalType:"address[4]",name:"addresses_",type:"address[4]"},{internalType:"uint256[12]",name:"parameters_",type:"uint256[12]"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"liquidate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"liquidate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"migrationDestination",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newPool",type:"address"},{internalType:"uint256",name:"graceDays",type:"uint256"}],name:"prepareMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"lShares",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"removeLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"lShares",type:"uint256"}],name:"removeLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"int256",name:"tradeVolume",type:"int256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"trade",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"int256",name:"tradeVolume",type:"int256"}],name:"trade",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"int256",name:"tradeVolume",type:"int256"},{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"tradeWithMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"int256",name:"tradeVolume",type:"int256"},{internalType:"uint256",name:"bAmount",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"tradeWithMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"withdrawMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bAmount",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"withdrawMargin",outputs:[],stateMutability:"nonpayable",type:"function"}],x=function(t){Object(d.a)(n,t);var e=Object(l.a)(n);function n(t,a,r){var i;return Object(c.a)(this,n),(i=e.call(this,t,a,r)).contract=new i.web3.eth.Contract(g,i.contractAddress),i}return Object(p.a)(n,[{key:"symbol",value:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("symbol");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getStateValues",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e,n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(h.c)(0),t.prev=1,t.next=4,this._call("getStateValues");case 4:a=t.sent,e={cumuFundingRate:Object(h.f)(a.cumuFundingRate),cumuFundingRateBlock:Object(h.c)(a.cumuFundingRateBlock),liquidity:Object(h.f)(a.liquidity),tradersNetVolume:Object(h.f)(a.tradersNetVolume),tradersNetCost:Object(h.f)(a.tradersNetCost)},t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),e={cumuFundingRate:n,cumuFundingRateBlock:n,liquidity:n,tradersNetCost:n,tradersNetVolume:n},console.log("getStateValues: ".concat(t.t0));case 12:return t.abrupt("return",e);case 13:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"getParameters",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e,n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(h.c)(0),t.prev=1,t.next=4,this._call("getParameters");case 4:a=t.sent,e={multiplier:Object(h.f)(a.multiplier),feeRatio:Object(h.f)(a.feeRatio),minPoolMarginRatio:Object(h.f)(a.minPoolMarginRatio),minInitialMarginRatio:Object(h.f)(a.minInitialMarginRatio),minMaintenanceMarginRatio:Object(h.f)(a.minMaintenanceMarginRatio),minAddLiquidity:Object(h.f)(a.minAddLiquidity),redemptionFeeRatio:Object(h.f)(a.redemptionFeeRatio),fundingRateCoefficient:Object(h.f)(a.fundingRateCoefficient),minLiquidationReward:Object(h.f)(a.minLiquidationReward),maxLiquidationReward:Object(h.f)(a.maxLiquidationReward),liquidationCutRatio:Object(h.f)(a.liquidationCutRatio),priceDelayAllowance:Object(h.c)(a.priceDelayAllowance)},t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),e={multiplier:n,feeRatio:n,minPoolMarginRatio:n,minInitialMarginRatio:n,minMaintenanceMarginRatio:n,minAddLiquidity:n,redemptionFeeRatio:n,fundingRateCoefficient:n,minLiquidationReward:n,maxLiquidationReward:n,liquidationCutRatio:n,priceDelayAllowance:n},console.log("getParameters: ".concat(t.t0));case 12:return t.abrupt("return",e);case 13:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"_getTransactionReceipt",value:function(t){var e=this;return function n(a,r){e.web3.eth.getTransactionReceipt(t,(function(t,e){t?r(t):null==e?setTimeout((function(){return n(a,r)}),500):!1===e.status?(e.errorMessage="Transaction failed",r(e)):a(e)}))}}},{key:"_estimatedGas",value:function(){var t=Object(o.a)(s.a.mark((function t(e,n,a){var r,u,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=0,u=0;case 2:if(!(u<20)){t.next=16;break}return t.prev=3,t.next=6,(o=this.contract.methods)[e].apply(o,Object(i.a)(n)).estimateGas({from:a});case 6:return r=t.sent,r=parseInt(1.25*r),t.abrupt("break",16);case 11:t.prev=11,t.t0=t.catch(3);case 13:u++,t.next=2;break;case 16:return 0==r&&(r=532731),r>532731&&(r=532731),t.abrupt("return",r);case 19:case"end":return t.stop()}}),t,this,[[3,11]])})));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"_transactPool",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n,a,u,o,c,p,d,l,y,f,b,v=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=v.length>1&&void 0!==v[1]?v[1]:[],u=v.length>2?v[2]:void 0,t.next=4,Object(h.s)(this.chainId,this.contractAddress);case 4:return o=t.sent,c=[o.timestamp,o.price,o.v,o.r,o.s],t.next=8,Promise.all([this._estimatedGas(e,[].concat(Object(i.a)(a),c),u),this.web3.eth.getGasPrice()]);case 8:return p=t.sent,d=Object(r.a)(p,2),l=d[0],y=d[1],console.log("gasPrice ".concat(y/1e9," GW")),f=[{from:u,to:this.contractAddress,gas:m.a.utils.numberToHex(l),value:m.a.utils.numberToHex("0"),data:(n=this.contract.methods)[e].apply(n,Object(i.a)(a).concat(c)).encodeABI()}],t.next=16,window.ethereum.request({method:"eth_sendTransaction",params:f});case 16:return b=t.sent,t.next=19,new Promise(this._getTransactionReceipt(b));case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getFundingRate",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e,n,a,r,i,u,o,c,p,d,l,y,m;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.k)(this.chainId,this.contractAddress);case 2:return e=t.sent,t.prev=3,t.next=6,this.getStateValues();case 6:return i=t.sent,u=i.tradersNetVolume,o=i.liquidity,t.next=11,this.getParameters();case 11:return c=t.sent,p=c.multiplier,d=c.fundingRateCoefficient,l=c.minPoolMarginRatio,y=[u,e,p,o,d],h.v.apply(void 0,y)?(n="0",a="0"):(a=T.b.apply(void 0,y),n=Object(T.k)(this.chainId,a)),m=[u,e,p,o,l],r=h.v.apply(void 0,m)?"0":T.d.apply(void 0,m),t.abrupt("return",{price:e,multiplier:p.toString(),fundingRate:n,fundingRatePerBlock:a,tradersNetVolume:u.toString(),liquidity:o.toString(),fundingRateCoefficient:d.toString(),liquidityUsed:r,poolMarginRatio:l.toString()});case 22:throw t.prev=22,t.t0=t.catch(3),console.log("PerpetualPool#gerFundingRate():",t.t0),t.t0;case 26:case"end":return t.stop()}}),t,this,[[3,22]])})));return function(){return t.apply(this,arguments)}}()},{key:"depositMargin",value:function(){var t=Object(o.a)(s.a.mark((function t(e,n){var a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("depositMargin"),t.prev=1,t.next=4,this._transactPool("depositMargin(uint256,uint256,uint256,uint8,bytes32,bytes32)",[n],e);case 4:r=t.sent,a={success:!0,transaction:r},t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("here"),a={success:!1,error:t.t0};case 12:return t.abrupt("return",a);case 13:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"_getBlockInfo",value:function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.web3.eth.getBlock(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_getPastEvents",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n,r,i,u,o,c,p,d,l,y=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=y.length>1&&void 0!==y[1]?y[1]:{},r=y.length>2&&void 0!==y[2]?y[2]:0,i=y.length>3&&void 0!==y[3]?y[3]:0,u=[],o="56"===this.chainId?1999:4999,r+o>i&&(o=i-r);case 6:if(!(r<=i)){t.next=16;break}return t.next=9,this.contract.getPastEvents(e,{filter:n,fromBlock:r,toBlock:r+o});case 9:c=t.sent,p=Object(a.a)(c);try{for(p.s();!(d=p.n()).done;)l=d.value,u.push(l)}catch(s){p.e(s)}finally{p.f()}(r+=o+1)+o>i&&(o=i-r),t.next=6;break;case 16:return t.abrupt("return",u);case 17:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_getTimeStamp",value:function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.web3.eth.getBlock(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_calculateFee",value:function(t,e,n,a){return Object(h.c)(t).abs().times(e).times(n).times(a).toString()}}]),n}(v),w=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_upgradedAddress",type:"address"}],name:"deprecate",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"deprecated",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_evilUser",type:"address"}],name:"addBlackList",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"upgradedAddress",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"balances",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"maximumFee",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"_totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"unpause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"account",type:"address"},{name:"amount",type:"uint256"}],name:"mint",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_maker",type:"address"}],name:"getBlackListStatus",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"address"}],name:"allowed",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"paused",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"who",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"pause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getOwner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"newBasisPoints",type:"uint256"},{name:"newMaxFee",type:"uint256"}],name:"setParams",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"amount",type:"uint256"}],name:"issue",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"amount",type:"uint256"}],name:"redeem",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"basisPointsRate",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"isBlackListed",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_clearedUser",type:"address"}],name:"removeBlackList",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"MAX_UINT",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_blackListedUser",type:"address"}],name:"destroyBlackFunds",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"_name",type:"string"},{name:"_symbol",type:"string"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"amount",type:"uint256"}],name:"Issue",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"amount",type:"uint256"}],name:"Redeem",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"newAddress",type:"address"}],name:"Deprecate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"feeBasisPoints",type:"uint256"},{indexed:!1,name:"maxFee",type:"uint256"}],name:"Params",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_blackListedUser",type:"address"},{indexed:!1,name:"_balance",type:"uint256"}],name:"DestroyedBlackFunds",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_user",type:"address"}],name:"AddedBlackList",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_user",type:"address"}],name:"RemovedBlackList",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[],name:"Pause",type:"event"},{anonymous:!1,inputs:[],name:"Unpause",type:"event"}],k=function(t){Object(d.a)(n,t);var e=Object(l.a)(n);function n(t,a,r,i){var u;return Object(c.a)(this,n),(u=e.call(this,t,a,i)).poolAddress=r,u.contract=new u.web3.eth.Contract(w,u.contractAddress),u}return Object(p.a)(n,[{key:"isUnlocked",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("allowance",[e,this.poolAddress]);case 2:return n=t.sent,n=Object(h.f)(n),t.abrupt("return",n.gt(0));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"unlock",value:function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._transact("approve",[this.poolAddress,h.b],e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"symbol",value:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("symbol");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"decimals",value:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("decimals");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_balance",value:function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("balanceOf",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"balance",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n,a,i,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this._balance(e),this.decimals()]);case 2:return n=t.sent,a=Object(r.a)(n,2),i=a[0],u=a[1],t.abrupt("return",Object(h.c)(i,-u));case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(v),O=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"int256",name:"volume",type:"int256"},{indexed:!1,internalType:"int256",name:"cost",type:"int256"},{indexed:!1,internalType:"int256",name:"lastCumuFundingRate",type:"int256"},{indexed:!1,internalType:"uint256",name:"margin",type:"uint256"},{indexed:!1,internalType:"uint256",name:"lastUpdateTimestamp",type:"uint256"}],name:"Update",type:"event"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"exists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"exists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"getPosition",outputs:[{internalType:"int256",name:"volume",type:"int256"},{internalType:"int256",name:"cost",type:"int256"},{internalType:"int256",name:"lastCumuFundingRate",type:"int256"},{internalType:"uint256",name:"margin",type:"uint256"},{internalType:"uint256",name:"lastUpdateTimestamp",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getPosition",outputs:[{internalType:"int256",name:"volume",type:"int256"},{internalType:"int256",name:"cost",type:"int256"},{internalType:"int256",name:"lastCumuFundingRate",type:"int256"},{internalType:"uint256",name:"margin",type:"uint256"},{internalType:"uint256",name:"lastUpdateTimestamp",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"margin",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newPool",type:"address"}],name:"setPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalMinted",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"int256",name:"volume",type:"int256"},{internalType:"int256",name:"cost",type:"int256"},{internalType:"int256",name:"lastCumuFundingRate",type:"int256"},{internalType:"uint256",name:"margin",type:"uint256"},{internalType:"uint256",name:"lastUpdateTimestamp",type:"uint256"}],name:"update",outputs:[],stateMutability:"nonpayable",type:"function"}],j=function(t){Object(d.a)(n,t);var e=Object(l.a)(n);function n(t,a,r,i){var u;return Object(c.a)(this,n),(u=e.call(this,t,a,i)).poolAddress=r,u.contract=new u.web3.eth.Contract(O,u.contractAddress),u}return Object(p.a)(n,[{key:"getPositionInfo",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={},t.prev=1,t.next=4,this._call("getPosition(address)",[e]);case 4:a=t.sent,n={volume:Object(h.f)(a[0]),cost:Object(h.f)(a[1]),lastCumuFundingRate:Object(h.f)(a[2]),margin:Object(h.f)(a[3]),lastUpdateTimestamp:Object(h.c)(a[4])},t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),n={volume:Object(h.c)(0),cost:Object(h.c)(0),lastCumuFundingRate:Object(h.c)(0),margin:Object(h.c)(0),lastUpdateTimestamp:Object(h.c)(0)},console.log("getPositionInfo: ".concat(t.t0));case 12:return t.abrupt("return",n);case 13:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},{key:"exists",value:function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("exists",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(v),M=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newPool",type:"address"}],name:"setPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],A=function(t){Object(d.a)(n,t);var e=Object(l.a)(n);function n(t,a,r,i){var u;return Object(c.a)(this,n),(u=e.call(this,t,a,i)).poolAddress=r,u.contract=new u.web3.eth.Contract(M,u.contractAddress),u}return Object(p.a)(n,[{key:"balance",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=h.f,t.next=3,this._call("balanceOf",[e]);case 3:return t.t1=t.sent,n=(0,t.t0)(t.t1),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"totalSupply",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=h.f,t.next=3,this._call("totalSupply");case 3:return t.t1=t.sent,e=(0,t.t0)(t.t1),t.abrupt("return",e);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),n}(v),C=n(58),B=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"addController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"controllers",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"data",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"oldController",type:"address"}],name:"delController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string[]",name:"keys",type:"string[]"}],name:"getValues",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"string",name:"key",type:"string"},{internalType:"bytes32",name:"value",type:"bytes32"}],internalType:"structDatabase.Params1[]",name:"pairs",type:"tuple[]"}],name:"setValues",outputs:[],stateMutability:"nonpayable",type:"function"}],S=function(){function t(e,n){Object(c.a)(this,t),this.providerUrl=n,this.contractAddress=e,this.providerUrl&&this._init()}return Object(p.a)(t,[{key:"_init",value:function(){this.web3=new m.a(new m.a.providers.HttpProvider(this.providerUrl)),this.contract=new this.web3.eth.Contract(B,this.contractAddress)}},{key:"updateProviderUrl",value:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.providerUrl){t.next=7;break}return t.next=3,Object(h.i)(Object(C.b)());case 3:this.providerUrl=t.sent,this._init(),t.next=17;break;case 7:if(t.t0=this.providerUrl,!t.t0){t.next=12;break}return t.next=11,Object(h.d)(this.providerUrl);case 11:t.t0=!t.sent;case 12:if(!t.t0){t.next=17;break}return t.next=15,Object(h.i)(Object(C.b)());case 15:this.providerUrl=t.sent,this._init();case 17:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getValues",value:function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.updateProviderUrl();case 2:return t.next=4,this.contract.methods.getValues(e).call();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),D=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"addController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"controllers",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"oldController",type:"address"}],name:"delController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"fromChainId",type:"uint256"},{internalType:"address",name:"fromWormhole",type:"address"},{internalType:"uint256",name:"toChainId",type:"uint256"},{internalType:"address",name:"toWormhole",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"structDatabase.Params1[]",name:"values",type:"tuple[]"}],name:"setSignature",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"signature",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"fromChainId",type:"uint256"},{internalType:"address",name:"fromWormhole",type:"address"},{internalType:"uint256",name:"toChainId",type:"uint256"},{internalType:"address",name:"toWormhole",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"bool",name:"valid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"values",type:"address[]"}],name:"unsetSignature",outputs:[],stateMutability:"nonpayable",type:"function"}],F=function(){function t(e,n){Object(c.a)(this,t),this.providerUrl=n,this.contractAddress=e,this.providerUrl&&this._init()}return Object(p.a)(t,[{key:"updateProviderUrl",value:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.providerUrl,!t.t0){t.next=5;break}return t.next=4,Object(h.d)(this.providerUrl);case 4:t.t0=t.sent;case 5:if(t.t0){t.next=9;break}return t.next=8,Object(h.i)(Object(C.b)());case 8:this.providerUrl=t.sent;case 9:this._init();case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_init",value:function(){this.web3=Object(f.b)("97"),this.contract=new this.web3.eth.Contract(D,this.contractAddress)}},{key:"signature",value:function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.contract){t.next=3;break}return t.next=3,this.updateProviderUrl();case 3:return t.next=5,this.contract.methods.signature(e).call();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),I=[{inputs:[{internalType:"address",name:"tokenAddress_",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"destination",type:"address"}],name:"ApproveMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deadline",type:"uint256"},{indexed:!1,internalType:"uint256",name:"nonce",type:"uint256"}],name:"Claim",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"destination",type:"address"}],name:"ExecuteMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"destination",type:"address"}],name:"PrepareMigration",type:"event"},{inputs:[],name:"CLAIM_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DOMAIN_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"approveMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"chainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"source",type:"address"}],name:"executeMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"isMigrated",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationDestination",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"destination",type:"address"},{internalType:"uint256",name:"graceDays",type:"uint256"}],name:"prepareMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"tokenAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"usedHash",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],E=function(t){Object(d.a)(n,t);var e=Object(l.a)(n);function n(t,a,r){var i;return Object(c.a)(this,n),(i=e.call(this,t,a,r)).contract=new i.web3.eth.Contract(I,i.contractAddress),i}return Object(p.a)(n,[{key:"mintDToken",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n,a,r,i,u,o,c,p=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a=p.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=p[i];return t.next=3,this._estimatedGas("claim",[e].concat(r),e);case 3:return u=t.sent,console.log(u),o=[{from:e,to:this.contractAddress,gas:m.a.utils.numberToHex(u),value:m.a.utils.numberToHex("0"),data:(n=this.contract.methods).claim.apply(n,[e].concat(r)).encodeABI()}],t.next=8,window.ethereum.request({method:"eth_sendTransaction",params:o});case 8:return c=t.sent,t.next=11,new Promise(this._getTransactionReceipt(c));case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(v),P=[{inputs:[{internalType:"address",name:"token_",type:"address"},{internalType:"address",name:"miningVault_",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deadline",type:"uint256"},{indexed:!1,internalType:"uint256",name:"nonce",type:"uint256"}],name:"Claim",type:"event"},{inputs:[],name:"CLAIM_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DOMAIN_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"chainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint8",name:"v1",type:"uint8"},{internalType:"bytes32",name:"r1",type:"bytes32"},{internalType:"bytes32",name:"s1",type:"bytes32"},{internalType:"uint8",name:"v2",type:"uint8"},{internalType:"bytes32",name:"r2",type:"bytes32"},{internalType:"bytes32",name:"s2",type:"bytes32"}],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimNewController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"miningVault",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"setNewController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"usedHash",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],_=function(t){Object(d.a)(n,t);var e=Object(l.a)(n);function n(t,a,r){var i;return Object(c.a)(this,n),(i=e.call(this,t,a,r)).contract=new i.web3.eth.Contract(P,i.contractAddress),i}return Object(p.a)(n,[{key:"mint",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n,a,r,i,u,o,c,p=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a=p.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=p[i];return t.next=3,this._estimatedGas("claim",[e].concat(r),e);case 3:return u=t.sent,o=[{from:e,to:this.contractAddress,gas:m.a.utils.numberToHex(u),value:m.a.utils.numberToHex("0"),data:(n=this.contract.methods).claim.apply(n,[e].concat(r)).encodeABI()}],t.next=7,window.ethereum.request({method:"eth_sendTransaction",params:o});case 7:return c=t.sent,t.next=10,new Promise(this._getTransactionReceipt(c));case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(v),R=n(87),q=n(18),U=[{inputs:[{internalType:"contractSushiToken",name:"_sushi",type:"address"},{internalType:"address",name:"_devaddr",type:"address"},{internalType:"uint256",name:"_sushiPerBlock",type:"uint256"},{internalType:"uint256",name:"_startBlock",type:"uint256"},{internalType:"uint256",name:"_bonusEndBlock",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"EmergencyWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"BONUS_MULTIPLIER",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_allocPoint",type:"uint256"},{internalType:"contractIERC20",name:"_lpToken",type:"address"},{internalType:"bool",name:"_withUpdate",type:"bool"}],name:"add",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"bonusEndBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_devaddr",type:"address"}],name:"dev",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"devaddr",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"}],name:"emergencyWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_from",type:"uint256"},{internalType:"uint256",name:"_to",type:"uint256"}],name:"getMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"massUpdatePools",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"}],name:"migrate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"migrator",outputs:[{internalType:"contractIMigratorChef",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"address",name:"_user",type:"address"}],name:"pendingSushi",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"poolInfo",outputs:[{internalType:"contractIERC20",name:"lpToken",type:"address"},{internalType:"uint256",name:"allocPoint",type:"uint256"},{internalType:"uint256",name:"lastRewardBlock",type:"uint256"},{internalType:"uint256",name:"accSushiPerShare",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"uint256",name:"_allocPoint",type:"uint256"},{internalType:"bool",name:"_withUpdate",type:"bool"}],name:"set",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contractIMigratorChef",name:"_migrator",type:"address"}],name:"setMigrator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"startBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"sushi",outputs:[{internalType:"contractSushiToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"sushiPerBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalAllocPoint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"}],name:"updatePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"userInfo",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"rewardDebt",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],L=function(t){Object(d.a)(n,t);var e=Object(l.a)(n);function n(t,a,r){var i;return Object(c.a)(this,n),(i=e.call(this,t,a,r)).contract=new i.web3.eth.Contract(U,i.contractAddress),i}return Object(p.a)(n,[{key:"addLiquidity",value:function(){var t=Object(o.a)(s.a.mark((function t(e,n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[152,Object(h.B)(n)],t.next=3,this._transact("deposit",a,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"removeLiquidity",value:function(){var t=Object(o.a)(s.a.mark((function t(e,n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[152,Object(h.B)(n)],t.next=3,this._transact("withdraw",a,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getLiquidity",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("userInfo",[152,e]);case 2:if(!(n=t.sent)||!n.amount){t.next=7;break}return t.abrupt("return",Object(h.f)(n.amount));case 7:return console.log("the amount is not exist "),t.abrupt("return","0");case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(v),V=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"mintAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"AddLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"target",type:"address"}],name:"ExecuteMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"target",type:"address"}],name:"PrepareMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"lAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"removeAmount",type:"uint256"}],name:"RemoveLiquidity",type:"event"},{inputs:[{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"addLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"approveMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"source",type:"address"}],name:"executeMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAddresses",outputs:[{internalType:"address",name:"bToken",type:"address"},{internalType:"address",name:"lToken",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getParameters",outputs:[{internalType:"uint256",name:"minAddLiquidity",type:"uint256"},{internalType:"uint256",name:"redemptionFeeRatio",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getStateValues",outputs:[{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"symbol_",type:"string"},{internalType:"address[2]",name:"addresses_",type:"address[2]"},{internalType:"uint256[2]",name:"parameters_",type:"uint256[2]"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"migrationDestination",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newPool",type:"address"},{internalType:"uint256",name:"graceDays",type:"uint256"}],name:"prepareMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"lAmount",type:"uint256"}],name:"removeLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],N=function(t){Object(d.a)(n,t);var e=Object(l.a)(n);function n(t,a,r){var i;return Object(c.a)(this,n),(i=e.call(this,t,a,r)).contract=new i.web3.eth.Contract(V,i.contractAddress),i}return Object(p.a)(n,[{key:"addLiquidity",value:function(){var t=Object(o.a)(s.a.mark((function t(e,n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[Object(h.B)(n)],t.next=3,this._transact("addLiquidity",a,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"removeLiquidity",value:function(){var t=Object(o.a)(s.a.mark((function t(e,n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[Object(h.B)(n)],t.next=3,this._transact("removeLiquidity",a,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getParameters",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("getParameters");case 2:return e=t.sent,t.abrupt("return",{minAddLiquidity:Object(h.f)(e.minAddLiquidity),redemptionFeeRatio:Object(h.f)(e.redemptionFeeRatio)});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getStateValues",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("getStateValues");case 2:return e=t.sent,t.abrupt("return",{liquidity:Object(h.f)(e)});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getLiquidity",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("getStateValues");case 2:if(!(e=t.sent)||!e.liquidity){t.next=5;break}return t.abrupt("return",Object(h.f)(e.liquidity));case 5:throw new Error("unable to get liquidity of this clp pool ".concat(this.poolAddress));case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),n}(v),H=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"oldController",type:"address"},{indexed:!1,internalType:"address",name:"newController",type:"address"}],name:"ChangeController",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],W=function(t){Object(d.a)(n,t);var e=Object(l.a)(n);function n(t,a,r,i){var u;return Object(c.a)(this,n),(u=e.call(this,t,a,i)).poolAddress=r,u.contract=new u.web3.eth.Contract(H,u.contractAddress),u}return Object(p.a)(n,[{key:"isUnlocked",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("allowance",[e,this.poolAddress]);case 2:return n=t.sent,t.abrupt("return",Object(h.f)(n).gt(0));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"unlock",value:function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._transact("approve",[this.poolAddress,h.b],e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"decimals",value:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("decimals");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_balance",value:function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("balanceOf",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"balance",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n,a,i,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this._balance(e),this.decimals()]);case 2:return n=t.sent,a=Object(r.a)(n,2),i=a[0],u=a[1],t.abrupt("return",Object(h.c)(i,-u));case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(v),G=[{inputs:[{internalType:"address",name:"tokenAddress_",type:"address"},{internalType:"bool",name:"allowMintBurn_",type:"bool"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"destination",type:"address"}],name:"ApproveMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"fromChainId",type:"uint256"},{indexed:!1,internalType:"address",name:"fromWormhole",type:"address"},{indexed:!1,internalType:"uint256",name:"toChainId",type:"uint256"},{indexed:!1,internalType:"address",name:"toWormhole",type:"address"},{indexed:!1,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"Claim",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"destination",type:"address"}],name:"ExecuteMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"fromChainId",type:"uint256"},{indexed:!1,internalType:"address",name:"fromWormhole",type:"address"},{indexed:!1,internalType:"uint256",name:"toChainId",type:"uint256"},{indexed:!1,internalType:"address",name:"toWormhole",type:"address"},{indexed:!1,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"Freeze",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"destination",type:"address"}],name:"PrepareMigration",type:"event"},{inputs:[],name:"CLAIM_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DOMAIN_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"allowMintBurn",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"approveMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"chainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"fromChainId",type:"uint256"},{internalType:"address",name:"fromWormhole",type:"address"},{internalType:"uint256",name:"fromNonce",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"source",type:"address"}],name:"executeMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"toChainId",type:"uint256"},{internalType:"address",name:"toWormhole",type:"address"}],name:"freeze",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"isMigrated",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationDestination",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"destination",type:"address"},{internalType:"uint256",name:"graceDays",type:"uint256"}],name:"prepareMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"tokenAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"usedHash",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],z=function(t){Object(d.a)(n,t);var e=Object(l.a)(n);function n(t,a,r){var i;return Object(c.a)(this,n),(i=e.call(this,t,a,r)).contract=new i.web3.eth.Contract(G,i.contractAddress),i}return Object(p.a)(n,[{key:"freeze",value:function(){var t=Object(o.a)(s.a.mark((function t(e,n,a){var r,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(h.n)(a),i=r.wormholeAddress,t.abrupt("return",this._transact("freeze",[Object(h.B)(n),a,i],e));case 2:case"end":return t.stop()}}),t,this)})));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"mintDeri",value:function(){var t=Object(o.a)(s.a.mark((function t(e,n,a,r,i,u,o,c){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._transact("claim",[n,a,r,i,u,o,c],e));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n,a,r,i,u,s,o){return t.apply(this,arguments)}}()}]),n}(v),Y=function(){var t={};return function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Object(q.f)(R.a.get(),e),a=n;if(Object.keys(t).includes(a))return t[a];var r=new S(n);return t[a]=r,r}}(),K=function(){var t={};return function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Object(q.g)(R.a.get(),e),a=n;if(Object.keys(t).includes(a))return t[a];var r=new F(n);return t[a]=r,r}}(),J=function(){var t={};return function(e,n){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a=r?"".concat(e,".").concat(n,".isProvider"):"".concat(e,".").concat(n),Object.keys(t).includes(a))return t[a];var i=new x(e,n,r);return t[a]=i,i}}(),X=function(){var t={};return function(e,n,a){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r=i?"".concat(e,".").concat(n,".").concat(a,".isProvider"):"".concat(e,".").concat(n,".").concat(a),Object.keys(t).includes(r))return t[r];var u=new k(e,n,a,i);return t[r]=u,u}}(),Q=function(){var t={};return function(e,n,a){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r=i?"".concat(e,".").concat(n,".").concat(a,".isProvider"):"".concat(e,".").concat(n,".").concat(a),Object.keys(t).includes(r))return t[r];var u=new j(e,n,a,i);return t[r]=u,u}}(),Z=function(){var t={};return function(e,n,a){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r=i?"".concat(e,".").concat(n,".").concat(a,".isProvider"):"".concat(e,".").concat(n,".").concat(a),Object.keys(t).includes(r))return t[r];var u=new A(e,n,a,i);return t[r]=u,u}}(),$=function(){var t={};return function(e,n){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a=r?"".concat(e,".").concat(n,".isProvider"):"".concat(e,".").concat(n),Object.keys(t).includes(a))return t[a];var i=new E(e,n,r);return t[a]=i,i}}(),tt=function(){var t={};return function(e,n){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a=r?"".concat(e,".").concat(n,".isProvider"):"".concat(e,".").concat(n),Object.keys(t).includes(a))return t[a];var i=new L(e,n,r);return t[a]=i,i}}(),et=function(){var t={};return function(e,n){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a=r?"".concat(e,".").concat(n,".isProvider"):"".concat(e,".").concat(n),Object.keys(t).includes(a))return t[a];var i=new N(e,n,r);return t[a]=i,i}}(),nt=(function(){var t={}}(),function(){var t={};return function(e,n,a){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r=i?"".concat(e,".").concat(n,".isProvider"):"".concat(e,".").concat(n),Object.keys(t).includes(r))return t[r];var u=new W(e,n,a,i);return t[r]=u,u}}()),at=function(){var t={};return function(e,n){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a=r?"".concat(e,".").concat(n,".isProvider"):"".concat(e,".").concat(n),Object.keys(t).includes(a))return t[a];var i=new z(e,n,r);return t[a]=i,i}}(),rt=function(){var t={};return function(e,n){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a=r?"".concat(e,".").concat(n,".isProvider"):"".concat(e,".").concat(n),Object.keys(t).includes(a))return t[a];var i=new _(e,n,r);return t[a]=i,i}}()},60:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return o}));var a=n(42),r=n(21),i=n.n(r),u=n(1),s=function(){var t=null;return function(){if(null!==t)return t;var e;if(void 0===Object(a.a)(window.ethereum))throw new Error("Please install MetaMask first");return e=new i.a(window.ethereum),t=e,e}}(),o=function(){var t={};return function(e){if(Object.keys(t).includes(e))return t[e];console.log("==== web3Factory(".concat(e,"), please caution the access limits ==="));var n=Object(u.l)(e),a=new i.a(new i.a.providers.HttpProvider(n));return t[e]=a,a}}()},61:function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return y})),n.d(e,"a",(function(){return m}));var a=n(16),r=n(0),i=n.n(r),u=n(2),s=n(1),o=n(6),c=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a,r,u,o,c){var p,d,l,y,m,f,b,v,h;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p=Object(s.f)(a.tradeVolume),t.next=3,e._getTimeStamp(r);case 3:return d=t.sent,l=p.gt(0)?"LONG":"SHORT",y=Object(s.f)(a.price),m="".concat(+d.timestamp,"000"),f=e._calculateFee(p,y,o,c),b=p.abs().times(y).times(o),v=p.abs(),h={direction:l,baseToken:n,price:y.toString(),notional:b.toString(),volume:v.toString(),transactionFee:f.toString(),transactionHash:u.toString(),time:m},t.abrupt("return",h);case 12:case"end":return t.stop()}}),t)})));return function(e,n,a,r,i,u,s){return t.apply(this,arguments)}}(),p=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a,r){var u,o,c,p,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=Object(s.f)(e.volume).abs(),o="".concat(e.timestamp,"000"),c=Object(s.f)(e.price),p=u.times(c).times(r),d={direction:"Liquidation",baseToken:a,price:Object(s.B)(c).toString(),notional:Object(s.B)(p).toString(),volume:Object(s.B)(u).toString(),transactionFee:"0",transactionHash:n.toString(),time:o},t.abrupt("return",d);case 6:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}(),d=function(){var t=Object(u.a)(i.a.mark((function t(e,n,r){var u,c,p,d,b,v,h,T,g,x,w,k,O,j,M,A,C,B,S,D;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u="".concat(e,".").concat(n),c=Object(o.c)(),t.next=4,Promise.all([c.getValues(["".concat(u,".tradeHistoryBlock")]),c.getValues(["".concat(u,".liquidateHistoryBlock")])]);case 4:if(p=t.sent,d=Object(a.a)(p,2),b=d[0],v=d[1],b=Object(s.w)(b[0]),v=Object(s.w)(v[0]),0===b||0===v){t.next=23;break}return t.next=13,Promise.all([l(e,n,r),y(e,n,r,b+1),f(e,n,r),m(e,n,r,v+1)]);case 13:return h=t.sent,T=Object(a.a)(h,4),g=T[0],x=T[1],w=T[2],k=T[3],O=x.concat(k).concat(g).concat(w),t.abrupt("return",O.sort((function(t,e){return parseInt(e.time)-parseInt(t.time)})));case 23:return j=Object(s.t)(e,n),M=j.initialBlock,b=parseInt(M),v=parseInt(M),t.next=28,Promise.all([y(e,n,r,b+1),m(e,n,r,v+1)]);case 28:return A=t.sent,C=Object(a.a)(A,2),B=C[0],S=C[1],D=B.concat(S),t.abrupt("return",D.sort((function(t,e){return parseInt(e.time)-parseInt(t.time)})));case 34:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),l=function(){var t=Object(u.a)(i.a.mark((function t(e,n,r){var u,c,p,d,l,y,m,f,b,v,h,T,g,x,w,k;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=[],c=Object(o.c)(),p="".concat(e,".").concat(n,".tradeHistoryBlock"),d="".concat(e,".").concat(n,".").concat(Object(s.D)(r),".trade"),t.next=6,c.getValues(["".concat(d,".count"),p]);case 6:if(l=t.sent,y=Object(a.a)(l,2),m=y[0],y[1],f=Object(s.w)(m),t.prev=11,!(f&&f>=0)){t.next=22;break}for(b=[],v=f;v>0;v--)h="".concat(d,".").concat(v.toString()),b=b.concat(["".concat(h,".direction"),"".concat(h,".baseToken"),"".concat(h,".price"),"".concat(h,".notional"),"".concat(h,".volume"),"".concat(h,".transactionFee"),"".concat(h,".transactionHash"),"".concat(h,".time")]);return T=b.length/8,t.next=18,c.getValues(b);case 18:for(g=t.sent,x=0;x<T;x++)w=8*x,k={direction:Object(s.y)(g[w]).trim(),baseToken:Object(s.y)(g[w+1]).trim(),price:Object(s.f)(g[w+2]).toString(),notional:Object(s.f)(g[w+3]).toString(),volume:Object(s.f)(g[w+4]).toString(),transactionFee:Object(s.f)(g[w+5]).toString(),transactionHash:g[w+6],time:Object(s.x)(g[w+7]).toString()},u.push(k);t.next=23;break;case 22:u=[];case 23:t.next=29;break;case 25:t.prev=25,t.t0=t.catch(11),console.log(t.t0),u=[];case 29:return t.abrupt("return",u);case 30:case"end":return t.stop()}}),t,null,[[11,25]])})));return function(e,n,a){return t.apply(this,arguments)}}(),y=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a,r){var u,p,d,l,y,m,f,b,v,h,T,g,x,w;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=Object(s.t)(e,n),p=u.bTokenSymbol,d=Object(o.j)(e,n),t.next=4,d._getBlockInfo("latest");case 4:return l=t.sent,r=parseInt(r),y={owner:a},t.next=9,d._getPastEvents("Trade",y,r,l.number);case 9:return m=t.sent,t.next=12,d.getParameters();case 12:f=t.sent,b=f.multiplier,v=f.feeRatio,h=f.minInitialMarginRatio,T=[],g=0;case 18:if(!(g<m.length)){t.next=27;break}return x=m[g],t.next=22,c(d,p,x.returnValues,x.blockNumber,x.transactionHash,b,v,h);case 22:w=t.sent,T.unshift(w);case 24:g++,t.next=18;break;case 27:return t.abrupt("return",T);case 28:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}(),m=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a,r){var u,c,d,l,y,m,f,b,v,h,T,g;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=Object(s.t)(e,n),c=u.bTokenSymbol,d=Object(o.j)(e,n),t.next=4,d._getBlockInfo("latest");case 4:return l=t.sent,r=parseInt(r),y={owner:a},t.next=9,d._getPastEvents("Liquidate",y,r,l.number);case 9:return m=t.sent,t.next=12,d.getParameters();case 12:f=t.sent,b=f.multiplier,v=[],h=0;case 16:if(!(h<m.length)){t.next=25;break}return T=m[h],t.next=20,p(T.returnValues,T.transactionHash,c,b);case 20:g=t.sent,v.unshift(g);case 22:h++,t.next=16;break;case 25:return t.abrupt("return",v);case 26:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}(),f=function(){var t=Object(u.a)(i.a.mark((function t(e,n,r){var u,c,p,d,l,y,m,f,b,v,h,T,g,x,w,k;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=[],c=Object(o.c)(),p="".concat(e,".").concat(n,".liquidateHistoryBlock"),d="".concat(e,".").concat(n,".").concat(Object(s.D)(r),".liquidate"),t.next=6,c.getValues(["".concat(d,".count"),p]);case 6:if(l=t.sent,y=Object(a.a)(l,2),m=y[0],y[1],f=Object(s.w)(m),t.prev=11,!(f&&f>=0)){t.next=22;break}for(b=[],v=f;v>0;v--)h="".concat(d,".").concat(v.toString()),b=b.concat(["".concat(h,".direction"),"".concat(h,".baseToken"),"".concat(h,".price"),"".concat(h,".notional"),"".concat(h,".volume"),"".concat(h,".transactionFee"),"".concat(h,".transactionHash"),"".concat(h,".time")]);return T=b.length/8,t.next=18,c.getValues(b);case 18:for(g=t.sent,x=0;x<T;x++)w=8*x,k={direction:Object(s.y)(g[w]).trim(),baseToken:Object(s.y)(g[w+1]).trim(),price:Object(s.f)(g[w+2]).toString(),notional:Object(s.f)(g[w+3]).toString(),volume:Object(s.f)(g[w+4]).toString(),transactionFee:Object(s.f)(g[w+5]).toString(),transactionHash:g[w+6],time:Object(s.x)(g[w+7]).toString()},u.push(k);t.next=23;break;case 22:u=[];case 23:t.next=29;break;case 25:t.prev=25,t.t0=t.catch(11),console.log(t.t0),u=[];case 29:return t.abrupt("return",u);case 30:case"end":return t.stop()}}),t,null,[[11,25]])})));return function(e,n,a){return t.apply(this,arguments)}}()},87:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var a=function(){var t="dev";return{get:function(){return t},set:function(e){if("dev"!==e&&"prod"!==e&&"production"!==e)throw new Error("please use 'dev' or 'prod' for DeriEnv");t=e}}}()},89:function(t){t.exports=JSON.parse('{"prod":{"chainInfo":{"1":{"name":"Ethereum","text":"ETHEREUM","symbol":"ETH","viewUrl":"https://etherscan.io/"},"56":{"name":"bsc","text":"BSC","symbol":"BNB","viewUrl":"https://bscscan.com/"},"128":{"name":"heco","text":"HECO","symbol":"HT","viewUrl":"https://hecoscan.xyz/"}},"oracle":{"COIN":"https://oracle3.deri.finance/price","BTCUSD":"https://oracle.deri.finance/price"}},"dev":{"chainInfo":{"3":{"name":"Ropsten","text":"ROPSTEN","symbol":"ETH","viewUrl":"https://ropsten.etherscan.io/"},"97":{"name":"Bsc-testnet","text":"BSC TESTNET","symbol":"BNB","viewUrl":"https://testnet.bscscan.com/"},"256":{"name":"Heco-testnet","text":"HECO TESTNET","symbol":"HT","viewUrl":"https://scan-testnet.hecochain.com/"}},"oracle":{"COIN":"https://oracle2.deri.finance/price","BTCUSD":"https://oracle2.deri.finance/price"}}}')}},[[549,6,7]]]);
//# sourceMappingURL=main.8d8d54a5.chunk.js.map