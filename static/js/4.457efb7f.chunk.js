(this["webpackJsonpapp.deri.finance"]=this["webpackJsonpapp.deri.finance"]||[]).push([[4],{556:function(e,t,c){"use strict";c.d(t,"a",(function(){return o}));var a=c(0),n=c.n(a),s=c(1),i=c(15),r=c(3),l=c(44);function o(e){var t=Object(r.useState)([]),c=Object(i.a)(t,2),a=c[0],o=c[1],d=function(){var e=Object(s.a)(n.a.mark((function e(t){var c,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.h)(l.a.get());case 2:c=e.sent,t.account?(a=c.filter((function(e){return+e.chainId===+t.chainId})),o(a)):o(c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){return d(e),function(){}}),[e.account]),a}},559:function(e,t,c){"use strict";c.d(t,"a",(function(){return L}));var a=c(15),n=c(3),s=c(0),i=c.n(s),r=c(37),l=c(1),o=c(536),d=c(44),j=c(535),b=c.n(j),u=c(538),x=c(537),O=c(35);function m(e){var t=e.wallet,c=e.spec,s=void 0===c?{}:c,r=e.onClose,j=e.afterDeposit,b=Object(n.useState)(""),u=Object(a.a)(b,2),m=u[0],h=u[1],v=Object(n.useState)(""),f=Object(a.a)(v,2),p=f[0],N=f[1],g=Object(n.useState)(""),y=Object(a.a)(g,2),w=y[0],k=y[1],S=function(){var e=Object(l.a)(i.a.mark((function e(){var c,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isConnected()){e.next=5;break}return e.next=3,Object(d.y)(t.detail.chainId,s.pool,t.detail.account);case 3:(c=e.sent)&&(a=(+c).toFixed(2),n=a.substring(a.indexOf("."),a.length),h(c),N(n));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(i.a.mark((function e(c){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(t.detail.chainId,s.pool,t.detail.account,c);case 2:(a=e.sent).success?(j(),r()):(n="string"===typeof a.error?a.error:a.error.errorMessage||a.error.message,alert(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return S(),function(){}}),[t.detail]),Object(O.jsx)("div",{className:"modal fade",children:Object(O.jsx)("div",{className:"modal-dialog",children:Object(O.jsxs)("div",{className:"modal-content",children:[Object(O.jsxs)("div",{className:"modal-header",children:[Object(O.jsx)("div",{className:"title",children:"DEPOSIT MARGIN"}),Object(O.jsx)("div",{className:"close","data-dismiss":"modal",onClick:r,children:Object(O.jsx)("span",{children:"\xd7"})})]}),Object(O.jsx)("div",{className:"modal-body",children:Object(O.jsxs)("div",{className:"margin-box-info",children:[Object(O.jsx)("div",{children:"Wallet Balance"}),Object(O.jsxs)("div",{className:"money",children:[Object(O.jsxs)("span",{children:[Object(O.jsxs)("span",{className:"bt-balance",children:[Object(O.jsx)(o.a,{value:m,displayType:"text",decimalScale:0}),".",Object(O.jsx)("span",{style:{fontSize:"12px"},children:p})]}),Object(O.jsx)("br",{}),Object(O.jsx)("span",{style:{fontSize:"14px",marginLeft:"10px",marginTop:"10px"},children:s.bTokenSymbol})]}),Object(O.jsx)("span",{className:"add"})]}),Object(O.jsxs)("div",{className:"enter-margin",children:[Object(O.jsx)("div",{className:"input-margin",children:Object(O.jsxs)("div",{className:"box",children:[Object(O.jsx)("div",{className:"amount",style:{display:""!==w?"block":"none"},children:"AMOUNT"}),Object(O.jsx)("input",{type:"number",className:"margin-value",placeholder:"Amount",value:w,onChange:function(e){var t=e.target.value;k(t)}})]})}),Object(O.jsx)("div",{children:s.bTokenSymbol})]}),Object(O.jsxs)("div",{className:"max",children:["MAX: ",Object(O.jsx)("span",{className:"max-num",children:m}),Object(O.jsx)("span",{className:"max-btn-left",onClick:function(){k(m)},children:"ADD ALL"})]}),Object(O.jsx)("div",{className:"add-margin-btn",children:Object(O.jsx)(x.a,{className:"margin-btn",btnText:"DEPOSIT",click:function(){return T(w)}})})]})})]})})})}var h=c(539),v=Object(u.a)(m),f=Object(u.a)((function(e){var t=e.wallet,c=e.spec,s=void 0===c?{}:c,r=e.onClose,j=e.afterWithdraw,b=Object(n.useState)(""),u=Object(a.a)(b,2),m=u[0],h=u[1],v=Object(n.useState)(""),f=Object(a.a)(v,2),p=f[0],N=f[1],g=Object(n.useState)(""),y=Object(a.a)(g,2),w=y[0],k=y[1],S=function(){var e=Object(l.a)(i.a.mark((function e(){var c,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isConnected()){e.next=5;break}return e.next=3,Object(d.q)(t.detail.chainId,s.pool,t.detail.account);case 3:(c=e.sent)&&(a=+c.margin+ +c.unrealizedPnl+"",n=a.substring(a.indexOf("."),a.indexOf(".")+3),h(a),N(n));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(i.a.mark((function e(){var c,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.F)(t.detail.chainId,s.pool,t.detail.account,w);case 2:(c=e.sent).success?j():(a="string"===typeof c.error?c.error:c.error.errorMessage||c.error.message,alert(a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return S(),function(){}}),[t.detail.account]),Object(O.jsx)("div",{className:"modal fade",id:"removeMargin",children:Object(O.jsx)("div",{className:"modal-dialog",children:Object(O.jsxs)("div",{className:"modal-content",children:[Object(O.jsxs)("div",{className:"modal-header",children:[Object(O.jsx)("div",{className:"title",children:"WITHDRAW MARGIN"}),Object(O.jsx)("div",{className:"close",onClick:r,children:Object(O.jsx)("span",{children:"\xd7"})})]}),Object(O.jsx)("div",{className:"modal-body",children:Object(O.jsxs)("div",{className:"margin-box-info",children:[Object(O.jsx)("div",{children:"Available Balance"}),Object(O.jsxs)("div",{className:"money",children:[Object(O.jsx)("span",{children:Object(O.jsxs)("span",{className:"bt-balance",children:[Object(O.jsx)(o.a,{value:m,thousandSeparator:!1,displayType:"text",decimalScale:0}),".",Object(O.jsx)("span",{style:{fontSize:"12px"},children:p})]})}),Object(O.jsx)("span",{className:"remove"})]}),Object(O.jsxs)("div",{className:"enter-margin remv",children:[Object(O.jsx)("div",{className:"input-margin",children:Object(O.jsxs)("div",{className:"box",children:[Object(O.jsx)("div",{className:"amount",style:{display:""!==w?"block":"none"},children:"AMOUNT"}),Object(O.jsx)("input",{type:"number",className:"margin-value",value:w,onChange:function(e){var t=e.target.value;k(t)},placeholder:"Amount"})]})}),Object(O.jsx)("div",{children:s.baseToken})]}),Object(O.jsxs)("div",{className:"max","v-show":"isPosition",children:["MAX: ",Object(O.jsx)("span",{className:"max-num",children:m}),Object(O.jsx)("span",{className:"max-btn-left",onClick:function(){k(m)},children:"REMOVE ALL"})]}),Object(O.jsx)("div",{className:"add-margin-btn",children:Object(O.jsx)(x.a,{className:"margin-btn",btnText:"WITHDRAW",click:T})})]})})]})})})}));function p(e){var t=e.wallet,c=e.spec,s=void 0===c?{}:c,j=Object(n.useState)(!1),u=Object(a.a)(j,2),x=u[0],m=u[1],p=Object(n.useState)({}),N=Object(a.a)(p,2),g=N[0],y=N[1],w=Object(n.useState)(""),k=Object(a.a)(w,2),S=k[0],T=k[1],C=Object(n.useState)(""),I=Object(a.a)(C,2),P=I[0],L=I[1],M=Object(n.useState)(!1),E=Object(a.a)(M,2),R=E[0],A=E[1],F=Object(n.useState)(!1),B=Object(a.a)(F,2),D=B[0],H=B[1];function q(){return U.apply(this,arguments)}function U(){return(U=Object(l.a)(i.a.mark((function e(){var c,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.isConnected()&&s&&s.pool)){e.next=5;break}return e.next=3,Object(d.q)(t.detail.chainId,s.pool,t.detail.account);case 3:(c=e.sent)&&(y(c),a=+c.volume>0?"LONG":0==c.volume?"--":"SHORT",T(a),L(+c.margin+ +c.unrealizedPnl));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(h.a)(q,3e3);var V=function(){var e=Object(l.a)(i.a.mark((function e(){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,Object(d.d)(t.detail.chainId,s.pool,t.detail.account).finally((function(){return m(!1)}));case 3:(c=e.sent).success?q():"string"===typeof c.error?alert(c.error):"object"===Object(r.a)(c.error)?alert(c.error.errorMessage):alert("Liquidation failed");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=b()("Direction","info-num",{LONG:"LONG"===S,SHORT:"SHORT"===S});return Object(n.useEffect)((function(){return q(),function(){}}),[t.detail.account,s.pool]),Object(O.jsxs)("div",{className:"position-info",children:[Object(O.jsxs)("div",{className:"info",children:[Object(O.jsxs)("div",{className:"info-left",children:[Object(O.jsx)("div",{className:"title-text",children:"Position"}),Object(O.jsx)("div",{className:"info-num",children:g.volume})]}),Object(O.jsx)("div",{className:"info-right",children:Object(O.jsxs)("div",{className:"close-position",id:"close-p",onClick:V,children:[Object(O.jsx)("span",{className:"spinner spinner-border spinner-border-sm",role:"status","aria-hidden":"true",style:{display:x?"block":"none"}}),Object(O.jsx)("svg",{t:"1618369709897",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2009",width:"14",height:"14",children:Object(O.jsx)("path",{d:"M510.8096 420.3008l335.296-335.296 90.5088 90.5088-335.296 335.296 335.296 335.296-90.5088 90.5088-335.296-335.296-335.296 335.296-90.5088-90.5088 335.296-335.296-335.296-335.296 90.5088-90.5088z","p-id":"2010",fill:"#ffffff"})})," Close"]})})]}),Object(O.jsxs)("div",{className:"info",children:[Object(O.jsxs)("div",{className:"info-left",children:[Object(O.jsx)("div",{className:"title-text",children:"Average Entry Price"}),Object(O.jsx)("div",{className:"info-num",children:Object(O.jsx)(o.a,{value:g.averageEntryPrice,decimalScale:2,displayType:"text"})})]}),Object(O.jsx)("div",{className:"info-right"})]}),Object(O.jsxs)("div",{className:"info",children:[Object(O.jsxs)("div",{className:"info-left",children:[Object(O.jsx)("div",{className:"title-text balance-con",children:"Balance in Contract (Dynamic Balance)"}),Object(O.jsxs)("div",{className:"info-num",children:[" ",Object(O.jsx)(o.a,{decimalScale:2,value:P,displayType:"text"})]})]}),Object(O.jsxs)("div",{className:"info-right",children:[Object(O.jsxs)("div",{className:"add-margin",id:"openAddMargin",onClick:function(){return A(!0)},children:[Object(O.jsx)("svg",{className:"svg",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18",children:Object(O.jsx)("path",{id:"login",d:"M13,9,7,4V7H0v4H7v3Zm3,7H8v2h8a2.006,2.006,0,0,0,2-2V2a2.006,2.006,0,0,0-2-2H8V2h8Z",transform:"translate(18) rotate(90)",fill:"#3ebf38"})}),"Add"]}),Object(O.jsxs)("div",{className:"remove-margin",onClick:function(){return H(!0)},children:[Object(O.jsx)("svg",{className:"svg",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18",children:Object(O.jsx)("path",{id:"log-out","data-name":"log out",d:"M18,9,12,4V7H5v4h7v3ZM2,2h8V0H2A2.006,2.006,0,0,0,0,2V16a2.006,2.006,0,0,0,2,2h8V16H2Z",transform:"translate(0 18) rotate(-90)",fill:"#e35061"})}),"Remove"]})]})]}),Object(O.jsxs)("div",{className:"info",children:[Object(O.jsxs)("div",{className:"info-left",children:[Object(O.jsx)("div",{className:"title-text",children:"Direction"}),Object(O.jsx)("div",{className:z,children:S})]}),Object(O.jsx)("div",{className:"info-right"})]}),Object(O.jsxs)("div",{className:"info",children:[Object(O.jsxs)("div",{className:"info-left",children:[Object(O.jsx)("div",{className:"title-text",children:"Margin"}),Object(O.jsx)("div",{className:"info-num",children:Object(O.jsx)(o.a,{value:g.marginHeld,displayType:"text",decimalScale:2})})]}),Object(O.jsx)("div",{className:"info-right"})]}),Object(O.jsxs)("div",{className:"info",children:[Object(O.jsxs)("div",{className:"info-left",children:[Object(O.jsx)("div",{className:"title-text",children:"Unrealized PnL"}),Object(O.jsx)("div",{className:"info-num",children:Object(O.jsx)(o.a,{value:g.unrealizedPnl,displayType:"text",decimalScale:8})})]}),Object(O.jsx)("div",{className:"info-right"})]}),Object(O.jsxs)("div",{className:"info",children:[Object(O.jsxs)("div",{className:"info-left",children:[Object(O.jsx)("div",{className:"title-text",children:"Liquidation Price"}),Object(O.jsx)("div",{className:"info-num",children:Object(O.jsx)(o.a,{decimalScale:2,value:g.liquidationPrice,displayType:"text"})})]}),Object(O.jsx)("div",{className:"info-right"})]}),Object(O.jsx)(v,{wallet:t,modalIsOpen:R,onClose:function(){A(!1)},spec:s,afterDeposit:function(){A(!1),q()}}),Object(O.jsx)(f,{wallet:t,modalIsOpen:D,onClose:function(){H(!1)},spec:s,afterWithdraw:function(){H(!1),q()}})]})}var N=c(546),g=c.n(N);function y(e){var t=e.wallet,c=void 0===t?{}:t,s=e.spec,r=void 0===s?{}:s,j=e.specs,b=void 0===j?[]:j,u=Object(n.useState)([]),x=Object(a.a)(u,2),m=x[0],h=x[1],v=function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.u)(c.detail.chainId,r.pool,c.detail.account);case 2:t=e.sent,a=t.map((function(e){e.directionText="LONG"===e.direction?"LONG / BUY":"SHORT / SELL";var t=b.find((function(t){return t.bTokenSymbol===e.baseToken}));return t&&(e.baseTokenText=" ".concat(t.symbol," / ").concat(t.bTokenSymbol)),e})),h(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return v(),function(){}}),[c.detail,r.pool,b]),Object(O.jsx)("div",{className:"history-info","v-show":"historyShow",children:m.map((function(e,t){return Object(O.jsxs)("div",{className:"history-box",children:[Object(O.jsxs)("div",{className:"direction-bToken-price",children:[Object(O.jsxs)("span",{children:[Object(O.jsx)("span",{className:"".concat(e.direction),children:e.directionText}),Object(O.jsx)("span",{children:e.baseTokenText})]}),Object(O.jsx)("span",{className:"history-text time",children:g.a.asString("yyyy-MM-dd hh:mm:ss",new Date(parseInt(e.time)))})]}),Object(O.jsxs)("div",{className:"time-price-volume",children:[Object(O.jsxs)("div",{className:"history-price",children:[Object(O.jsx)("div",{className:"history-title",children:"Volume @ Price"}),Object(O.jsxs)("div",{className:"history-text",children:[e.volume," @ ",Object(O.jsx)(o.a,{value:e.price,decimalScale:2,displayType:"text"})]})]}),Object(O.jsxs)("div",{className:"notional",children:[Object(O.jsx)("div",{className:"history-title",children:"Notional"}),Object(O.jsx)("div",{className:"history-text",children:e.notional})]}),Object(O.jsxs)("div",{className:"history-fee",children:[Object(O.jsx)("div",{className:"history-title",children:"Transaction Fee"}),Object(O.jsx)("div",{className:"history-text",children:e.transactionFee})]})]})]},t)}))})}var w=c(547),k=c(91),S=c(543);function T(e){var t=e.wallet,c=void 0===t?{}:t,s=e.spec,r=void 0===s?{}:s,j=e.specs,u=void 0===j?[]:j,x=e.onSpecChange,m=e.indexPrice,v=Object(n.useState)("long"),f=Object(a.a)(v,2),p=f[0],N=f[1],g=Object(n.useState)(null),y=Object(a.a)(g,2),w=y[0],T=y[1],C=Object(n.useState)(!1),I=Object(a.a)(C,2),L=I[0],M=I[1],E=Object(n.useState)("0.00"),R=Object(a.a)(E,2),A=R[0],F=R[1],B=Object(n.useState)({}),D=Object(a.a)(B,2),H=D[0],q=D[1],U=Object(n.useState)("0.00"),V=Object(a.a)(U,2),z=V[0],W=V[1],G=Object(n.useState)(""),X=Object(a.a)(G,2),Y=X[0],Z=X[1],J=Object(n.useState)(""),K=Object(a.a)(J,2),$=K[0],Q=K[1],_=Object(n.useState)(""),ee=Object(a.a)(_,2),te=ee[0],ce=ee[1],ae=Object(n.useState)(""),ne=Object(a.a)(ae,2),se=ne[0],ie=ne[1],re=Object(n.useState)({}),le=Object(a.a)(re,2),oe=le[0],de=le[1],je=Object(n.useState)(""),be=Object(a.a)(je,2),ue=be[0],xe=be[1],Oe=Object(n.useRef)(),me=Object(n.useState)({}),he=Object(a.a)(me,2),ve=he[0],fe=he[1],pe=Object(n.useState)(""),Ne=Object(a.a)(pe,2),ge=Ne[0],ye=Ne[1];Object(h.a)(Me,3e3);var we=b()("checked-long","check-long-short"," long-short",{" checked-short":"short"===p}),ke=b()("dropdown-menu",{show:L}),Se=b()("contrant-input",{inputFamliy:""!==ge}),Te=function(){return r&&r.pool},Ce=function(){return c&&c.detail&&c.detail.account},Ie=function(e){ye(""),N(e)},Pe=function(e){u.length>0&&(e.stopPropagation(),M(!L))},Le=function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ce()||!Te()){e.next=5;break}return e.next=3,Object(d.l)(c.detail.chainId,r.pool);case 3:(t=e.sent)&&(W(t.fundingRate0),a="Funding  Rate (per block) = ".concat(t.fundingRatePerBlock)+"\n(1 Long contract pays 1 short contract ".concat(t.fundingRatePerBlock," ").concat(r.bTokenSymbol," per block)"),Z(a),ie(t.liquidity));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Me(){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ce()||!Te()){e.next=5;break}return e.next=3,Object(d.q)(c.detail.chainId,r.pool,c.detail.account);case 3:(t=e.sent)&&q(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Re=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ce()||!Te()){e.next=5;break}return e.next=3,Object(d.t)(c.detail.chainId,r.pool,c.detail.account);case 3:t=e.sent,T(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ce()||!Te()){e.next=5;break}return e.next=3,Object(d.i)(c.detail.chainId,r.pool,Math.abs(ge));case 3:t=e.sent,ce(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(l.a)(i.a.mark((function e(){var t,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ce()||!Te()){e.next=9;break}return t=c.detail,e.next=4,Object(d.n)(t.chainId,r.pool);case 4:return a=e.sent,e.next=7,Object(d.k)(t.chainId,r.pool,ge);case 7:n=e.sent,a&&n&&de({curLiqUsed:a.liquidityUsed0,afterLiqUsed:n.liquidityUsed1});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ce()||!Te()){e.next=5;break}return e.next=3,Object(d.j)(c.detail.chainId,r.pool,ge);case 3:(t=e.sent)&&Q(t.fundingRate1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=function(){!function(){if(Ce()&&Te()){var e=c.detail,t=e.chainId,a=e.account,n=r.pool;d.B.clear(),d.B.update(t,n),d.b.update(t,n,a)}}(),Le(),Me(),Re()};return Object(n.useEffect)((function(){var e=document.body.addEventListener("click",(function(){return M(!1)}),!1);return function(){document.body.removeEventListener("click",e)}}),[]),Object(n.useEffect)((function(){return De(),function(){}}),[c.detail,r]),Object(n.useEffect)((function(){return function(){if(H&&w&&m){var e=+ge+ +H.volume,t=Math.abs(e)*m.index*w.multiplier,c=(+H.margin+ +H.unrealizedPnl).toFixed(2),a=(t*w.minInitialMarginRatio).toFixed(2),n=(+t/+c).toFixed(1),s=+c-+a,i=t/m.index,r={volume:ge,dynamicBalance:c,margin:a,marginHeld:H.marginHeld,available:s,converted:i,leverage:n};fe(r)}}(),Oe.current&&xe(Oe.current>m.index?"fall":"rise"),Oe.current=m.index,function(){}}),[H.unrealizedPnl,H.volume,m.index,ge]),Object(n.useEffect)((function(){return Be(),Fe(),Ae(),function(){}}),[ge]),Object(n.useEffect)((function(){if(w){var e=+A/(+m.index*+w.multiplier*+w.minInitialMarginRatio)-+H.volume;if(!isNaN(e)){var t=Math.floor(e);N(t>=0?"long":"short");var c=Object(k.a)({},ve);c.volume=t,fe(c),ye(t)}}return function(){}}),[A]),Object(O.jsx)("div",{className:"trade-info",children:Object(O.jsxs)("div",{className:"trade-peration",children:[Object(O.jsxs)("div",{className:"check-baseToken",children:[Object(O.jsxs)("div",{className:"btn-group check-baseToken-btn",children:[Object(O.jsxs)("button",{type:"button",onClick:Pe,className:"btn chec",children:[r.symbol," / ",r.bTokenSymbol," (10X)",Object(O.jsx)("span",{className:"check-base-down",onClick:Pe,children:Object(O.jsx)("svg",{t:"1616752321986",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1700",width:"16",height:"16",children:Object(O.jsx)("path",{d:"M843.946667 285.866667L512 617.386667 180.053333 285.866667 119.893333 346.026667l331.946667 331.946666L512 738.133333l392.106667-392.106666-60.16-60.16z","p-id":"1701",fill:"#cccccc"})})})]}),Object(O.jsx)("div",{className:ke,children:Object(O.jsx)("div",{className:"dropdown-box",children:u.map((function(e,t){return Object(O.jsxs)("div",{className:"dropdown-item",onClick:function(t){return function(e){var t=u.find((function(t){return t.symbol===e.symbol}));x(t),ye(""),fe({})}(e)},children:[e.symbol," / ",e.bTokenSymbol," (10X)"]},t)}))})})]}),Object(O.jsxs)("div",{className:"price-fundingRate pc",children:[Object(O.jsxs)("div",{className:"index-prcie",children:["Index Price: ",Object(O.jsxs)("span",{className:ue,children:["\xa0 ",Object(O.jsx)(o.a,{value:m.index,displayType:"text"})]})]}),Object(O.jsxs)("div",{className:"funding-rate",children:[Object(O.jsx)("span",{children:"Funding Rate Annual: \xa0"}),Object(O.jsx)("span",{className:"funding-per",title:Y,children:z})]})]}),Object(O.jsxs)("div",{className:"price-fundingRate mobile",children:[Object(O.jsxs)("div",{className:"index-prcie",children:["Index: ",Object(O.jsxs)("span",{className:ue,children:["\xa0 ",Object(O.jsx)(o.a,{value:m.index,displayType:"text"})]})]}),Object(O.jsxs)("div",{className:"funding-rate",children:[Object(O.jsx)("span",{children:"Funding: \xa0"}),Object(O.jsx)("span",{className:"funding-per",title:Y,children:z})]})]})]}),Object(O.jsxs)("div",{className:we,children:[Object(O.jsx)("div",{className:"check-long",onClick:function(){return Ie("long")},children:"LONG / BUY"}),Object(O.jsx)("div",{className:"check-short",onClick:function(){return Ie("short")},children:"SHORT / SELL"})]}),Object(O.jsxs)("div",{className:"the-input",children:[Object(O.jsxs)("div",{className:"left",children:[Object(O.jsxs)("div",{className:"current-position",children:[Object(O.jsx)("span",{children:"Current Position"}),Object(O.jsx)("span",{className:"position-text",children:H.volume})]}),Object(O.jsxs)("div",{className:"contrant",children:[Object(O.jsx)("input",{type:"number",onFocus:function(e){e.target.setAttribute("class","contrant-input inputFamliy")},onBlur:function(e){var t=e.target;""===t.value&&t.setAttribute("class","contrant-input")},onKeyUp:function(e){return""!==e.target.value&&/^\d*\.?\d*$/.test(e.target.value)},disabled:!ve.available,onChange:function(e){return ye("long"===p?e.target.value:-e.target.value)},value:ve.volume&&Math.abs(ve.volume),className:Se,placeholder:"Contract Volume"}),Object(O.jsx)("div",{className:"title-volume",children:"Contract Volume"})]}),!!ge&&Object(O.jsx)("div",{className:"btc",children:Object(O.jsx)(o.a,{value:ve.converted,allowNegative:!1,displayType:"text",decimalScale:4,prefix:"= ",suffix:" ".concat(r.unit)})})]}),Object(O.jsx)("div",{className:"right-info",children:Object(O.jsxs)("div",{className:"contrant-info",children:[Object(O.jsxs)("div",{className:"balance-contract",children:[Object(O.jsxs)("span",{className:"balance-contract-text pc",children:["Balance in Contract",Object(O.jsx)("br",{}),"(Dynamic Balance)"]}),Object(O.jsxs)("span",{className:"balance-contract-text mobile",children:["Balance in Contract",Object(O.jsx)("br",{}),"(Dyn Bal.)"]}),Object(O.jsx)("span",{className:"balance-contract-num",children:Object(O.jsx)(o.a,{value:ve.dynamicBalance,displayType:"text",decimalScale:2})})]}),Object(O.jsxs)("div",{className:"box-margin",children:[Object(O.jsx)("span",{children:" Margin "}),Object(O.jsx)("span",{className:"margin",children:Object(O.jsx)(o.a,{value:ve.margin,allowNegative:!1,displayType:"text",decimalScale:2})})]}),Object(O.jsxs)("div",{className:"available-balance",children:[Object(O.jsx)("span",{className:"available-balance pc",children:" Available Balance "}),Object(O.jsx)("span",{className:"available-balance mobile",children:"Avail Bal"}),Object(O.jsx)("span",{className:"available-balance-num",children:Object(O.jsx)(o.a,{value:ve.available,displayType:"text",decimalScale:2})})]})]})})]}),Object(O.jsx)("div",{className:"slider mt-13",children:Object(O.jsx)(S.a,{max:ve.dynamicBalance,onValueChange:function(e){F(e)},start:ve.margin})}),Object(O.jsx)("div",{className:"title-margin",children:"Margin"}),Object(O.jsx)("div",{className:"enterInfo",children:!!ge&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"text-info",children:[Object(O.jsx)("div",{className:"title-enter pool",children:"Pool Liquidity"}),Object(O.jsx)("div",{className:"text-enter poolL",children:Object(O.jsx)(o.a,{value:se,decimalScale:2,suffix:" ".concat(r.bTokenSymbol),displayType:"text"})})]}),Object(O.jsxs)("div",{className:"text-info",children:[Object(O.jsx)("div",{className:"title-enter",children:"Liquidity Used"}),Object(O.jsxs)("div",{className:"text-enter",children:[Object(O.jsx)(o.a,{value:oe.curLiqUsed,displayType:"text",suffix:"%"})," -> ",Object(O.jsx)(o.a,{value:oe.afterLiqUsed,displayType:"text",decimalScale:2,suffix:"%"})]})]}),Object(O.jsxs)("div",{className:"text-info",children:[Object(O.jsx)("div",{className:"title-enter",children:"Funding Rate Impact"}),Object(O.jsxs)("div",{className:"text-enter",children:[Object(O.jsx)(o.a,{value:z,displayType:"text",allowNegative:!1,decimalScale:4})," -> ",Object(O.jsx)(o.a,{value:$,displayType:"text",allowNegative:!1,decimalScale:4})]})]}),Object(O.jsxs)("div",{className:"text-info",children:[Object(O.jsx)("div",{className:"title-enter",children:"Transaction Fee"}),Object(O.jsx)("div",{className:"text-enter",children:Object(O.jsx)(o.a,{value:te,decimalScale:2,suffix:" ".concat(r.bTokenSymbol),displayType:"text"})})]})]})}),Object(O.jsx)(P,{hasConnectWallet:Ce,transFee:te,wallet:c,spec:r,indexPrice:m,available:ve.available,volume:ge,direction:p,leverage:ve.leverage,afterTrade:function(){ye(""),Me()},position:H.volume})]})})}var C=Object(u.a)((function(e){var t=e.wallet,c=e.spec,a=e.onClose,n=e.volume,s=e.direction,r=e.position,j=void 0===r?0:r,b=e.indexPrice,u=e.leverage,m=e.transFee,h=e.afterTrade,v=function(){var e=Object(l.a)(i.a.mark((function e(){var s,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.D)(t.detail.chainId,c.pool,t.detail.account,n);case 2:(s=e.sent).success?(h(),a()):(r="string"===typeof s.error?s.error:s.error.errorMessage||s.error.message,alert(r));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=+n+ +j;return Object(O.jsx)("div",{className:"modal-dialog",children:Object(O.jsxs)("div",{className:"modal-content",children:[Object(O.jsxs)("div",{className:"modal-header",children:[Object(O.jsx)("div",{className:"title",children:"CONFIRM"}),Object(O.jsx)("div",{className:"close","data-dismiss":"modal",onClick:a,children:Object(O.jsx)("span",{children:"\xd7"})})]}),Object(O.jsx)("div",{className:"modal-body",children:Object(O.jsxs)("div",{className:"contract-box-info",children:[Object(O.jsxs)("div",{className:"top",children:[Object(O.jsxs)("div",{className:"text",children:[Object(O.jsx)("div",{className:"text-title",children:"# of Contracts"}),Object(O.jsx)("div",{className:"text-num",children:n})]}),Object(O.jsxs)("div",{className:"text",children:[Object(O.jsx)("div",{className:"text-title",children:"Position after execution"}),Object(O.jsx)("div",{className:"text-num",children:f})]}),Object(O.jsxs)("div",{className:"text",children:[Object(O.jsx)("div",{className:"text-title",children:"Direction"}),Object(O.jsx)("div",{className:"text-num",children:Object(O.jsx)("span",{className:s,children:s})})]}),Object(O.jsxs)("div",{className:"text",children:[Object(O.jsx)("div",{className:"text-title",children:"Trade Price (estimated)"}),Object(O.jsx)("div",{className:"text-num",children:Object(O.jsx)(o.a,{value:b,decimalScale:2,displayType:"text"})})]}),Object(O.jsxs)("div",{className:"text",children:[Object(O.jsx)("div",{className:"text-title",children:"Leverage after execution"}),Object(O.jsxs)("div",{className:"text-num",children:[u,"X"]})]}),Object(O.jsxs)("div",{className:"text",children:[Object(O.jsx)("div",{className:"text-title",children:"Transaction Fee"}),Object(O.jsx)("div",{className:"text-num",children:Object(O.jsx)(o.a,{value:m,decimalScale:2,suffix:" ".concat(c.bTokenSymbol),displayType:"text"})})]})]}),Object(O.jsx)("div",{className:"modal-footer",children:Object(O.jsxs)("div",{className:"long-btn","v-if":"confirm",children:[Object(O.jsx)("button",{className:"cancel",onClick:a,children:"CANCEL"}),Object(O.jsx)(x.a,{className:"confirm",btnText:"OK",click:v})]})})]})})]})})})),I=Object(u.a)(m);function P(e){var t=e.hasConnectWallet,c=e.wallet,s=e.spec,r=e.volume,o=e.available,j=e.baseToken,b=e.leverage,u=e.indexPrice,m=e.position,h=e.direction,v=e.transFee,f=e.afterTrade,p=Object(n.useState)(!0),N=Object(a.a)(p,2),g=N[0],y=N[1],w=Object(n.useState)(!1),k=Object(a.a)(w,2),S=k[0],T=k[1],P=Object(n.useState)(!0),L=Object(a.a)(P,2),M=L[0],E=L[1],R=Object(n.useState)(!1),A=Object(a.a)(R,2),F=A[0],B=A[1],D=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q(),f();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(l.a)(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t()||!s.pool){e.next=6;break}return a=c.detail,e.next=4,Object(d.z)(a.chainId,s.pool,a.account).catch((function(e){return console.log(e)}));case 4:n=e.sent,y(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){return T(!(+o>0)),function(){}}),[o]),Object(n.useEffect)((function(){return E(!r),function(){}}),[r]),Object(n.useEffect)((function(){return H(),function(){}}),[s.pool]);var q=function(){B(!1)},U=Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(C,{wallet:c,spec:s,modalIsOpen:F,onClose:q,leverage:b,baseToken:j,volume:r,direction:h,position:m,indexPrice:u.index,transFee:v,afterTrade:f}),Object(O.jsx)("button",{className:"short-submit",onClick:function(){return B(!0)},children:"TRADE"})]});return t()?g?S&&void 0!==o?U=Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(I,{wallet:c,modalIsOpen:F,onClose:q,spec:s,afterDeposit:D}),Object(O.jsx)("div",{className:"noMargin-text",children:"You\xa0have\xa0no\xa0fund\xa0in\xa0contract.\xa0Please\xa0deposit\xa0first."}),Object(O.jsx)("button",{className:"short-submit",onClick:function(){return B(!0)},children:"DEPOSIT"})]}):M&&(U=Object(O.jsx)(x.a,{className:"btn btn-danger short-submit",disabled:!0,btnText:"ENTER VOLUME"})):U=Object(O.jsx)(x.a,{className:"approve",btnText:"APPROVE",onClick:function(){var e=c.detail,t=Object(d.E)(e.chainId,s.pool,e.account);t.success?y(!0):alert(t.error)}}):U=Object(O.jsx)(x.a,{className:"btn btn-danger connect",btnText:"Connect Wallet",click:function(){c.connect()}}),Object(O.jsx)("div",{className:"submit-btn",children:U})}function L(e){var t=e.wallet,c=e.specs,s=e.spec,i=e.onSpecChange,r=e.isPro,l=e.indexPrice,o=Object(n.useState)("trade"),d=Object(a.a)(o,2),j=d[0],u=d[1],x=function(e){return u(e)},m=b()("trade-position",j);return Object(O.jsxs)("div",{className:m,children:[Object(O.jsx)("div",{className:"header-top",children:Object(O.jsxs)("div",{className:"header",children:[Object(O.jsx)("span",{className:"trade",onClick:function(){return x("trade")},children:"TRADE"}),!r&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("span",{className:"position",onClick:function(){return x("position")},children:"MY POSITION"}),Object(O.jsx)("span",{className:"history",onClick:function(){return x("history")},children:"HISTORY"})]})]})}),Object(O.jsx)(T,{wallet:t,spec:s,specs:c,indexPrice:l,onSpecChange:i}),Object(O.jsx)(p,{wallet:t,spec:s}),Object(O.jsx)(y,{wallet:t,spec:s,specs:c}),Object(O.jsx)(w.a,{wallet:t,spec:s})]})}}}]);
//# sourceMappingURL=4.457efb7f.chunk.js.map