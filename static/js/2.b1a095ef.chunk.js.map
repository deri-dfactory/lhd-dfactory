{"version":3,"sources":["components/Button/Button.js","components/hoc/withModal.js","hooks/useInterval.js","components/Slider/Slider.js","components/ContractInfo/ContractInfo.js","components/Lite/Dialog/DepositMargin.js","components/Lite/TradeInfo.js","components/Lite/Dialog/TradeConfirm.js","components/Lite/Dialog/WithdrawMargin.js","components/Lite/Position.js","components/Lite/History.js","components/Lite/Lite.js","lib/charting_library/charting_library.esm.js","desktop/pages/trade/Pro/datafeeds/historyProvider.js","desktop/pages/trade/Pro/datafeeds/index.js","desktop/pages/trade/Pro/TradingViewChart.js","desktop/pages/trade/Pro/TradingView.js","desktop/pages/trade/Pro/Position.js","desktop/img/close-position.png","desktop/pages/trade/Pro/History.js","desktop/pages/trade/Pro/Reference.js","desktop/pages/trade/Pro/Pro.js"],"names":["Button","btnText","className","disabled","click","afterClick","useState","status","setStatus","pending","setPending","loadRef","useRef","onClick","a","current","style","display","ref","marginRight","withModal","Component","appElement","document","getElementById","customizeStyle","overlay","position","background","zIndex","content","border","inset","overflow","props","state","modalIsOpen","this","isOpen","onClose","React","useInterval","callback","delay","savedCallback","useEffect","id","setInterval","clearInterval","Handle","RcSlider","handle","value","index","dragging","restProps","prefixCls","placement","visible","overlayStyle","overlayInnerStyle","color","fontSize","boxShadow","Slider","max","start","onValueChange","limit","setLimit","setValue","setDisabled","marks","setMarks","isNaN","mark","per","i","top","width","left","paddingRight","toFixed","min","onChange","step","ContractInfo","wallet","spec","bSymbol","symbol","multiplier","fundingRateCoefficient","minInitialMarginRatio","minMaintenanceMarginRatio","feeRatio","contract","setContract","setSpec","pool","isConnected","getSpecification","detail","chainId","account","contractInfo","displayType","decimalScale","suffix","DepositMargin","afterDeposit","walletBalance","setWalletBalance","addMarginSub","setAddMarginSub","amount","setAmount","loadWalletBalance","getWalletBalance","balance","formatBalance","substring","indexOf","length","deposit","depositMargin","res","success","msg","error","errorMessage","message","alert","data-dismiss","marginLeft","marginTop","bTokenSymbol","type","placeholder","event","target","TradeInfo","specs","onSpecChange","indexPrice","direction","setDirection","setContractInfo","dropdown","setDropdown","margin","setMargin","setPosition","fundingRate","setFundingRate","fundingRateTip","setFundingRateTip","fundingRateAfter","setFundingRateAfter","transFee","setTransFee","poolLiquidity","setPoolLiquidity","liqUsedPair","setLiqUsedPair","indexPriceClass","setIndexPriceClass","indexPriceRef","tradeInfo","setTradeInfo","volume","setVolume","loadPosition","directionClazz","classNames","selectClass","volumeClazz","hasSpec","hasConnectWallet","directionChange","onDropdown","stopPropagation","loadFundingRate","getFundingRate","fundingRate0","tip","fundingRatePerBlock","liquidity","getPositionInfo","loadContractInfo","loadTransactionFee","getEstimatedFee","calcLiquidityUsed","getLiquidityUsed","curLiqUsed","getEstimatedLiquidityUsed","afterLiqUsed","liquidityUsed0","liquidityUsed1","calcFundingRateAfter","getEstimatedFundingRate","fundingRate1","initialzie","address","priceCache","clear","update","PerpetualPoolParametersCache","refreshCache","bodyClickListener","body","addEventListener","removeEventListener","currentPosition","contractValue","Math","abs","dynamicBalance","unrealizedPnl","leverage","available","converted","marginHeld","calcTradeInfo","number","floor","cloned","t","viewBox","version","xmlns","p-id","height","d","fill","map","config","select","selected","find","pause","onSelect","title","onFocus","setAttribute","onBlur","onKeyUp","test","allowNegative","prefix","unit","Operator","afterTrade","ConfirmDialog","trade","tradeWithMargin","afterTradePosition","v-if","DepositDialog","baseToken","isApprove","setIsApprove","noBalance","setNoBalance","emptyVolume","setEmptyVolume","setModalIsOpen","loadApprove","isUnlocked","catch","e","console","log","result","actionElement","undefined","unlock","connect","WithdrawMagin","afterWithdraw","decimal","setDecimal","positionInfo","withdraw","withdrawMargin","thousandSeparator","v-show","WithDrawDialog","Position","isLiquidation","setIsLiquidation","balanceContract","setBalanceContract","addModalIsOpen","setAddModalIsOpen","removeModalIsOpen","setRemoveModalIsOpen","loadPositionInfo","onClosePosition","closePosition","finally","directionClass","role","aria-hidden","averageEntryPrice","transform","data-name","liquidationPrice","History","history","setHistory","loadHistory","getTradeHistory","all","his","item","directionText","s","baseTokenText","dateFormat","asString","Date","parseInt","time","price","notional","transactionFee","Lite","isPro","curTab","setCurTab","switchTab","tradeClassName","Object","assign","o","arguments","n","r","prototype","hasOwnProperty","call","apply","Array","isArray","mobile","disabled_features","enabled_features","interval","timezone","container_id","library_path","locale","widgetbar","details","watchlist","watchlist_settings","default_symbols","overrides","studies_overrides","trading_customization","order","brokerConfig","configFlags","fullscreen","autosize","debug","logo","time_frames","text","resolution","client_id","user_id","charts_storage_api_version","favorites","intervals","chartTypes","_id","random","toString","_ready","_readyHandlers","_onWindowResize","_autoResizeChart","bind","datafeed","Error","_options","preset","concat","warn","theme","loading_screen","backgroundColor","_create","onChartReady","push","headerReady","_innerWindowLoaded","then","_innerWindow","onGrayedObjectClicked","_innerAPI","onShortcut","createShortcutAction","subscribe","unsubscribe","chart","getLanguage","setSymbol","changeSymbol","remove","window","splice","_iFrame","parentNode","removeChild","closePopupsAndDialogs","selectLineTool","selectedLineTool","save","saveChart","load","loadChart","json","extendedData","getSavedCharts","loadChartFromServer","saveChartToServer","removeChartFromServer","onContextMenu","createButton","showNoticeDialog","showConfirmDialog","showLoadChartDialog","showSaveAsChartDialog","symbolInterval","getSymbolInterval","mainSeriesPriceFormatter","getIntervals","getStudiesList","addCustomCSSFile","applyOverrides","applyStudiesOverrides","watchList","activeChart","chartsCount","layout","setLayout","layoutName","changeTheme","getTheme","takeScreenshot","lockAllDrawingTools","hideAllDrawingTools","drawOnAllCharts","magnetEnabled","magnetMode","undoRedoState","setIntervalLinkingEnabled","setTimeFrame","symbolSync","intervalSync","crosshairSync","timeSync","getAllFeatures","clearUndoHistory","undo","redo","startFullscreen","exitFullscreen","takeClientScreenshot","tradingViewApi","contentWindow","innerHeight","_render","innerHTML","querySelector","Promise","widgetReady","initializationFinished","customFormatters","custom_formatters","brokerFactory","broker_factory","studiesOverrides","tradingCustomization","disabledFeatures","enabledFeatures","broker_config","restConfig","numeric_formatting","rss_news_feed","newsProvider","news_provider","loadLastChart","load_last_chart","saveLoadAdapter","save_load_adapter","settingsAdapter","settings_adapter","getCustomIndicators","custom_indicators_getter","saved_data","chartContent","saved_data_meta_info","chartContentExtendedData","encodeURIComponent","timeframe","toolbar_bg","replace","studies_access","JSON","stringify","drawings_access","String","charts_storage_url","custom_css_url","auto_save_delay","snapshot_url","study_count_limit","symbol_search_request_delay","compare_symbols","TradingView","symbolInfo","_from","to","first","url","name","DeriEnv","get","params","bars","substr","period","w","m","axios","data","el","ts","low","Number","l","high","h","open","close","c","v","lastBar","supported_resolutions","onReady","cb","setTimeout","searchSymbols","userInput","exchange","symbolType","onResultReadyCallback","resolveSymbol","symbolName","onSymbolResolvedCallback","onResolveErrorCallback","symbol_stub","pricescale","ticker","description","minmov","has_intraday","intraday_multipliers","has_weekly_and_monthly","data_status","has_no_volume","pro_name","has_daily","regular_session","getBars","from","onHistoryCallback","onErrorCallback","firstDataRequest","localResolutions","localStorage","getItem","historyProvider","len","noData","err","subscribeBars","onRealtimeCallback","subscribeUID","onResetCacheNeededCallback","unsubscribeBars","subscriberUID","calculateHistoryDepth","resolutionBack","intervalBack","getMarks","startDate","endDate","onDataCallback","getTimeScaleMarks","getServerTime","defaultProps","TradingViewChart","loading","setLoading","actived","setActived","deriWidget","setDeriWidget","activedClass","changeTime","refreshMarks","setResolution","widgetOptions","datafeeds","widget","initialize","tradersNetVolume","allowLeadingZeros","setPositionInfo","closing","setClosing","src","Reference","tab","curClassName","Pro"],"mappings":"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","file":"static/js/2.b1a095ef.chunk.js","sourcesContent":["import {useState,useRef} from 'react';\nexport default function Button({btnText,className,disabled,click,afterClick}){\n  const [status, setStatus] = useState(disabled ? 'disabled' : 'enabled');\n  const [pending, setPending] = useState(false);\n  const loadRef = useRef(null)\n\n  const onClick = async () => {\n    if(status !== 'enabled') {\n      return ;\n    }\n    setStatus('disabled')\n    setPending(true);\n    loadRef.current && (loadRef.current.style.display = 'inline-block')\n    const result = await click();    \n    if(result){\n      afterClick && afterClick()\n    } \n    loadRef.current && (loadRef.current.style.display = 'none')\n    setStatus('enabled')\n    setPending(false);\n  }\n\n  return(\n    <button className={className} onClick={onClick} >\n        <span className='btn-loading-wrap'>\n          <span ref={loadRef}\n            className='spinner spinner-border spinner-border-sm'\n            style={{display : 'none' ,marginRight : '2'}}>\n          </span>\n        </span>\n          {pending ? 'PENDING' : btnText  }\n        </button>\n  )\n}","import React from 'react'\nimport Modal from 'react-modal/lib/components/Modal';\n\nconst withModal = Component => {\n  const appElement = document.getElementById('root')\n  const customizeStyle =  {\n    overlay: {\n      position: 'fixed',\n      background: 'none',\n      zIndex : 2\n    },\n    content: {\n      position: 'absolute',\n      border : 0,\n      background : 'none',\n      inset : 0,\n      overflow : 'initial'\n    }\n  };\n\n  class WithModal extends React.Component {\n    constructor(props){\n      super(props)\n      this.state = {\n        modalIsOpen : false\n      }\n    }\n\n    render(){\n      const {modalIsOpen} = this.props\n      return (\n        <Modal isOpen={modalIsOpen} style={customizeStyle} appElement={appElement}>\n          <Component {...this.props} onClose={this.props.onClose}/>\n        </Modal>\n      )\n    }\n  }\n\n  return WithModal;\n}\nexport default withModal;","import { useRef,useEffect } from 'react'\n\nexport default function useInterval(callback,delay){\n  const savedCallback = useRef(callback)\n\n  useEffect(() => {\n    savedCallback.current = callback\n  }, [callback])\n\n  useEffect(() => {\n    if (delay === null) {\n      return\n    }\n\n    const id = setInterval(() => savedCallback.current(), delay)\n\n    return () => clearInterval(id)\n  }, [delay])\n}","import React, { useState,useEffect } from 'react'\nimport RcSlider,{SliderTooltip} from 'rc-slider'\nimport 'rc-slider/assets/index.css';\nimport './slider.less'\nconst { Handle } = RcSlider;\n\n\n function handle(props){\n  const { value, dragging, index, ...restProps } = props;\n  return (\n    <SliderTooltip\n      prefixCls=\"rc-slider-tooltip\"\n      overlay={!!value ? value : ''}\n      placement=\"top\"\n      key={index}\n      visible={!!value ? true : false}\n      overlayStyle={{display : 'block'}}\n      overlayInnerStyle={{color : '#569BDA',background : 'none',display : 'block' ,fontSize : '10px',boxShadow : 'none'}}\n    >\n      <Handle value={value} {...restProps} />\n    </SliderTooltip>\n  );\n};\n\n\nexport default function Slider({max,start,onValueChange}){\n  const [limit, setLimit] = useState(0);\n  const [value, setValue] = useState(0);\n  const [disabled, setDisabled] = useState(false);\n  const [marks, setMarks] = useState({});\n\n  const onSliderChange = value => {\n    setValue(value)\n    onValueChange(value);\n  }\n\n  useEffect(() => {\n    if(isNaN(max)){\n      setLimit('')\n    }  else {\n      if((+max) > 0){\n        setDisabled(false)\n      } else {\n        setDisabled(true)\n      }\n      const mark = {\n      };\n      const per = (+max) / 10\n      for(let i = 0 ; i<=10 ; i++){\n        if(i === 0 || i ===10 ){\n          const style = {top: '-16px',position: 'relative'}\n          if(i ===10){\n            style.width = 100;\n            style.left = '-10px'\n            style.paddingRight = '10px'            \n          }\n          mark[i*per] = <><div style={style}>{i === 10 ? (i*per).toFixed(2) : i * per}</div><div style={{top: '-16px',position: 'relative'}}>l</div></>\n        } else{\n          mark[i*per] = 'l'\n        }\n        \n      }\n      setMarks(mark);\n      setLimit(+max)\n    }\n\n    return () => {};\n  }, [max]);\n\n  useEffect(() => {\n    if(isNaN(start)){\n      setValue(0)\n    } else {\n      setValue(start)\n    }\n    return () => {      \n    };\n  }, [start]);\n\n  return (\n      <RcSlider\n        handle={handle}\n        className='deri-slider' \n        start={start}\n        min={0}\n        max={limit}\n        value={value}\n        onChange={onSliderChange}\n        disabled={disabled}\n        overlay={value}\n        step={0.01}\n        marks={marks}\n       >\n        {/* <div className='rc-slider-text'><span>0</span><span>{max}</span></div>         */}\n        {/* <div className='m-rc-slider-mark'>\n          <span style={{left:0}}>l</span>\n          <span style={{left:'10%'}}>l</span>\n          <span style={{left:'20%'}}>l</span>\n          <span style={{left:'30%'}}>l</span>\n          <span style={{left:'40%'}}>l</span>\n          <span style={{left:'50%'}}>l</span>\n          <span style={{left:'60%'}}>l</span>\n          <span style={{left:'70%'}}>l</span>\n          <span style={{left:'80%'}}>l</span>\n          <span style={{left:'90%'}}>l</span>\n          <span style={{left:'99%'}}>l</span>\n        </div> */}\n      </RcSlider>\n  )\n}","import React, { useState,useEffect} from 'react'\nimport NumberFormat from 'react-number-format'\nimport { getSpecification } from '../../lib/web3js';\n\n\nexport default function ContractInfo({wallet,spec ={}}){\n  const [contract, setContract] = useState({\n    bSymbol : 'USDT',\n    symbol : 'BTCUSD',\n    multiplier : '0.0001',\n    fundingRateCoefficient : '0.0000025',\n    minInitialMarginRatio : 0.1,\n    minMaintenanceMarginRatio : 0.0005,\n    feeRatio : 0.05\n  }); \n\n  useEffect(() => { \n    const setSpec = async () => {           \n      if(spec.pool && wallet.isConnected()){\n        const contractInfo = await getSpecification(wallet.detail.chainId,spec.pool,wallet.detail.account) \n        setContract(contractInfo)  \n      }\n    }\n    wallet && setSpec();\n    return () => {};\n  }, [spec,wallet]);\n  \n  return(\n    <div className=\"contract-box\">\n      <div className='contract-header'></div>\n      <div className=\"contract-info\">\n        <div className=\"conntract-header\">CONTRACT INFO</div>\n        <div className=\"info\">\n          <div className=\"title\">Base Token</div>\n          <div className=\"text\">\n            { contract.bSymbol }\n          </div>\n        </div>\n        <div className=\"info\">\n          <div className=\"title\">Symbol</div>\n          <div className=\"text\">\n            { contract.symbol }\n          </div>\n        </div>\n        <div className=\"info\">\n          <div className=\"title\">Multiplier</div>\n          <div className=\"text\">\n            { contract.multiplier }\n          </div>\n        </div>\n        <div className=\"info\">\n          <div className=\"title\">Funding Rate Coefficient</div>\n          <div className=\"text\">\n            { contract.fundingRateCoefficient }\n          </div>\n        </div>\n        <div className=\"info\">\n          <div className=\"title\">Min Initial Margin Ratio</div>\n          <div className=\"text\">\n            <NumberFormat displayType='text' value ={ contract.minInitialMarginRatio * 100 } decimalScale={2} suffix='%'/>\n          </div>\n        </div>\n        <div className=\"info\">\n          <div className=\"title\">Min Maintenance Margin Ratio</div>\n          <div className=\"text\">\n            <NumberFormat displayType='text' value ={ contract.minMaintenanceMarginRatio * 100 } decimalScale={2} suffix='%'/>\n          </div>\n        </div>\n        <div className=\"info\">\n          <div className=\"title\">Transaction Fee</div>\n          <div className=\"text\">\n            <NumberFormat displayType='text' value ={ contract.feeRatio * 100 } decimalScale={2} suffix='%'/>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}","import React, { useState ,useEffect} from 'react'\nimport {  getWalletBalance, depositMargin } from \"../../../lib/web3js\";\nimport NumberFormat from 'react-number-format';\nimport Button from '../../Button/Button';\n\nexport default function DepositMargin({wallet,spec = {},onClose,afterDeposit}){\n  const [walletBalance, setWalletBalance] = useState('');\n  const [addMarginSub, setAddMarginSub] = useState('');\n  const [amount,setAmount] = useState('');\n\n  const loadWalletBalance = async () => {\n    if(wallet.isConnected()){\n      const balance = await getWalletBalance(wallet.detail.chainId,spec.pool,wallet.detail.account)\n      if(balance){\n        const formatBalance = (+balance).toFixed(2)\n        const addMarginSub = formatBalance.substring(formatBalance.indexOf('.'),formatBalance.length)\n        setWalletBalance(balance);\n        setAddMarginSub(addMarginSub)\n      }\n    }\n  }\n\n  const onChange = event => {\n    const {value} = event.target\n    setAmount(value)\n  }\n\n  const addAll = () => {\n    setAmount(walletBalance)\n  }\n\n  const deposit = async (amount) => {\n    const res = await depositMargin(wallet.detail.chainId,spec.pool,wallet.detail.account,amount);\n    if(res.success){\n      afterDeposit();\n      onClose();\n    } else {\n      const msg = typeof res.error === 'string' ? res.error : res.error.errorMessage || res.error.message\n      alert(msg)\n    }\n  }\n\n  useEffect(() => {\n    loadWalletBalance()\n    return () => {\n    };\n  }, [wallet.detail]);\n\n\n\n  return (\n    <div className='modal fade'>\n      <div className='modal-dialog'>\n        <div className='modal-content'>\n          <div className='modal-header'>\n            <div className='title'>DEPOSIT MARGIN</div>\n            <div className='close' data-dismiss='modal' onClick={onClose}>\n              <span>&times;</span>\n            </div>\n          </div>\n          <div className='modal-body'>\n            <div className='margin-box-info'>\n              <div>Wallet Balance</div>\n              <div className='money'>\n                <span>\n                  <span className='bt-balance'>\n                    <NumberFormat value={ walletBalance } displayType = 'text' decimalScale={0}/>.<span style={{fontSize:'12px'}}>{addMarginSub}</span> \n                  </span> \n                  <br/>\n                  <span \n                  style={{fontSize :'14px',marginLeft: '10px',marginTop: '10px'}}>\n                    {spec.bTokenSymbol}\n                  </span>\n                  </span\n                >\n                <span className='add'></span>\n              </div>\n              <div className='enter-margin'>\n                <div className='input-margin'>\n                  <div className='box'>\n                    <div className='amount' style={{display : amount !=='' ? 'block' : 'none'}}>AMOUNT</div>\n                    <input\n                      type='number'\n                      className='margin-value'\n                      placeholder='Amount'\n                      value={amount}\n                      onChange={onChange}\n                    />\n                  </div>\n                </div>\n                <div>{ spec.bTokenSymbol }</div>\n              </div>\n              <div className='max'>\n                MAX: <span className='max-num'>{ walletBalance }</span>\n                <span className='max-btn-left' onClick={addAll} >ADD ALL</span>\n              </div>\n              <div className='add-margin-btn'>\n                <Button\n                  className='margin-btn'\n                  btnText='DEPOSIT'\n                  click={() => deposit(amount)}\n                />                  \n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}","import { useState,useEffect,useRef } from 'react'\nimport classNames from \"classnames\";\nimport Slider from '../Slider/Slider';\nimport Button from '../Button/Button';\nimport {priceCache,PerpetualPoolParametersCache, isUnlocked,unlock, DeriEnv, deriToNatural, getFundingRate, getUserWalletBalance, getWalletBalance, getPositionInfo, getSpecification, getEstimatedFee, getLiquidityUsed, hasWallet, getEstimatedLiquidityUsed, getEstimatedFundingRate} from '../../lib/web3js/index'\nimport NumberFormat from 'react-number-format';\nimport withModal from '../hoc/withModal';\nimport TradeConfirm from './Dialog/TradeConfirm';\nimport DepositMargin from './Dialog/DepositMargin'\nimport useInterval from '../../hooks/useInterval';\n\n\n\n\nexport default function TradeInfo({wallet = {},spec = {}, specs = [],onSpecChange,indexPrice}){\n  const [direction, setDirection] = useState('long');\n  const [contractInfo, setContractInfo] = useState(null);\n  const [dropdown, setDropdown] = useState(false);  \n  const [margin, setMargin] = useState('0.00');  \n  const [position, setPosition] = useState({});\n  const [fundingRate, setFundingRate] = useState('0.00');\n  const [fundingRateTip, setFundingRateTip] = useState('');\n  const [fundingRateAfter, setFundingRateAfter] = useState('');\n  const [transFee, setTransFee] = useState('');\n  const [poolLiquidity, setPoolLiquidity] = useState('');\n  const [liqUsedPair, setLiqUsedPair] = useState({});\n  const [indexPriceClass, setIndexPriceClass] = useState('');\n  const indexPriceRef = useRef();\n  \n\n  //交易信息\n  const [tradeInfo, setTradeInfo] = useState({});\n  //控制状态\n  const [volume, setVolume] = useState('');  \n\n  useInterval(loadPosition,3000)\n\n  const directionClazz = classNames('checked-long','check-long-short',' long-short',{' checked-short' : direction === 'short'})\n  const selectClass = classNames('dropdown-menu',{'show' : dropdown})\n  const volumeClazz = classNames('contrant-input',{'inputFamliy' : volume !== ''})\n\n  //是否有 spec\n  const hasSpec = () => spec && spec.pool\n\n  //是否有链接钱包\n  const hasConnectWallet = () => wallet && wallet.detail && wallet.detail.account\n\n  const directionChange = direction => {\n    setVolume('')\n    setDirection(direction)\n  }\n\n  const onDropdown = (event) => {\n    if(specs.length > 0){\n      event.stopPropagation();\n      setDropdown(!dropdown)    \n    }\n  }\n\n  //切换交易标的\n  const onSelect = select => {\n    const selected = specs.find(config => config.symbol === select.symbol )\n    setDirection('long');\n    indexPrice.pause();    \n    onSpecChange(selected);\n    indexPrice.start(selected.symbol);\n  }\n\n  const onSlide = value => {    \n    setMargin(value);\n  }\n\n  //refresh cache\n  const refreshCache = () => {\n    if(hasConnectWallet() && hasSpec()){\n      const {chainId,account} = wallet.detail;\n      const address = spec.pool\n      priceCache.clear();\n      priceCache.update(chainId,address);\n      PerpetualPoolParametersCache.update(chainId,address,account);\n    }\n  }\n\n\n  //资金费率\n  const loadFundingRate = async () => {\n    if(hasConnectWallet() && hasSpec()){    \n      const res = await getFundingRate(wallet.detail.chainId,spec.pool)\n      if(res){\n        setFundingRate(res.fundingRate0)\n        const tip = `Funding  Rate (per block) = ${res.fundingRatePerBlock}` +\n        `\\n(1 Long contract pays 1 short contract ${res.fundingRatePerBlock} ${spec.bTokenSymbol} per block)`\n        setFundingRateTip(tip);\n        setPoolLiquidity(res.liquidity)\n      }\n    }\n  }\n\n\n  //当前仓位\n  async function loadPosition() {\n    if(hasConnectWallet() && hasSpec()) {\n      const position = await getPositionInfo(wallet.detail.chainId,spec.pool,wallet.detail.account);\n      if(position){\n        setPosition(position);\n      }\n    }\n  }\n\n  //价值合同信息\n  const loadContractInfo = async () => {\n    if(hasConnectWallet() && hasSpec()){\n      const contractInfo = await getSpecification(wallet.detail.chainId,spec.pool,wallet.detail.account);      \n      setContractInfo(contractInfo)      \n    }\n  }\n\n  //交易费用\n  const loadTransactionFee = async () => {\n    if(hasConnectWallet() && hasSpec()) {\n      const transFee = await getEstimatedFee(wallet.detail.chainId,spec.pool,volume);\n      setTransFee(transFee);\n    }\n  }\n\n  //计算流动性的变化\n  const calcLiquidityUsed = async () => {\n    if(hasConnectWallet() && hasSpec()) {\n      const {detail} = wallet\n      const curLiqUsed = await getLiquidityUsed(detail.chainId,spec.pool)\n      const afterLiqUsed = await getEstimatedLiquidityUsed(detail.chainId,spec.pool,volume)\n      if(curLiqUsed && afterLiqUsed){\n        setLiqUsedPair({curLiqUsed : curLiqUsed.liquidityUsed0,afterLiqUsed : afterLiqUsed.liquidityUsed1})\n      }\n    }\n  }\n\n  //计算funding rate的变化\n  const calcFundingRateAfter = async () => {\n    if(hasConnectWallet() && hasSpec()){\n      const fundingRateAfter = await getEstimatedFundingRate(wallet.detail.chainId,spec.pool,volume);\n      if(fundingRateAfter){\n        setFundingRateAfter(fundingRateAfter.fundingRate1);\n      }\n    }\n  }\n\n\n  //处理输入相关方法\n  const onFocus = event => {\n    const target =event.target;\n    target.setAttribute('class','contrant-input inputFamliy')\n  }\n\n  const onBlur = event => {\n    const target =event.target;\n    if(target.value === '') {\n      target.setAttribute('class','contrant-input')\n    }    \n  }\n\n  const onKeyUp = event => {\n    return event.target.value !== '' && /^\\d*\\.?\\d*$/.test(event.target.value)\n  }\n\n  //完成交易\n  const afterTrade = () => {\n    setVolume('')\n    loadPosition();\n  }\n\n\n  const initialzie = () => {    \n    refreshCache(); //refresh cache\n    loadFundingRate(); // funding rate changed\n    loadPosition() // balance in contract changed\n    loadContractInfo(); //contract info change    \n  }\n\n  //计算交易相关数据（dynamic balance、margin、available balance)\n  const calcTradeInfo = () => {\n    if(position && contractInfo && indexPrice) {\n      const currentPosition = (+volume) + (+position.volume)\n      const contractValue = Math.abs(currentPosition) * indexPrice.index * contractInfo.multiplier;\n      const dynamicBalance = ((+position.margin) + (+position.unrealizedPnl)).toFixed(2)\n      const margin = (contractValue * contractInfo.minInitialMarginRatio).toFixed(2);\n      const leverage = (+contractValue / +dynamicBalance).toFixed(1);\n      const available = (+dynamicBalance) - (+margin)\n      const converted = contractValue / indexPrice.index\n      const tradeInfo = {\n        volume,         //合约数量\n        dynamicBalance, //动态余额\n        margin,         //存入保证金\n        marginHeld : position.marginHeld ,//冻结保证金 \n        available,      //可用余额\n        converted,      //换算的值\n        leverage,        //杠杆\n      }\n      setTradeInfo(tradeInfo);\n    }\n  }\n\n  //spec select hide listener\n  useEffect(() => {\n    const bodyClickListener = document.body.addEventListener('click',() => setDropdown(false),false)\n    return () => {\n      document.body.removeEventListener('click',bodyClickListener)\n    }\n  }, []);\n\n  //spec --> price index --> funding rate --> balance -->  contract info\n  useEffect(() => {\n    initialzie();\n    return () => {\n    };\n  }, [wallet.detail,spec]);\n\n\n  useEffect(() => {\n    calcTradeInfo()\n    if(indexPriceRef.current){\n      setIndexPriceClass(indexPriceRef.current > indexPrice.index ? 'fall' : 'rise')\n    }\n    indexPriceRef.current = indexPrice.index;\n    return () => {\n    };\n  }, [position.unrealizedPnl,position.volume,indexPrice.index,volume]);\n\n  useEffect(() => {\n    calcFundingRateAfter();\n    calcLiquidityUsed();\n    loadTransactionFee();\n    return () => {      \n    };\n  }, [volume]);\n\n\n  useEffect(() => {    \n    if(contractInfo){\n      const volume = (+margin) / ((+indexPrice.index) * (+contractInfo.multiplier) * (+contractInfo.minInitialMarginRatio)) - (+position.volume)\n      if(!isNaN(volume)){\n        const number = Math.floor(volume);\n        if((number) >= 0){\n          setDirection('long')\n        } else {\n          setDirection('short')\n        }\n        const cloned = {...tradeInfo}\n        cloned.volume = number;\n        setTradeInfo(cloned)\n        setVolume(number);\n      }\n    }\n    return () => {      \n    };\n  }, [margin]);\n\n\n   \n  return (\n    <div className='trade-info'>\n    <div className='trade-peration'>\n      <div className='check-baseToken'>\n        <div className='btn-group check-baseToken-btn'>\n          <button\n            type='button'\n            onClick={onDropdown}\n            className='btn chec'>\n            {spec.symbol} / {spec.bTokenSymbol} (10X)\n            <span\n              className='check-base-down' onClick={onDropdown}\n            ><svg\n              t='1616752321986'\n              className='icon'\n              viewBox='0 0 1024 1024'\n              version='1.1'\n              xmlns='http://www.w3.org/2000/svg'\n              p-id='1700'\n              width='16'\n              height='16'\n            >\n                <path\n                  d='M843.946667 285.866667L512 617.386667 180.053333 285.866667 119.893333 346.026667l331.946667 331.946666L512 738.133333l392.106667-392.106666-60.16-60.16z'\n                  p-id='1701'\n                  fill='#cccccc'\n                ></path></svg>\n              </span>\n          </button>\n          <div className={selectClass} >\n            <div className='dropdown-box'>\n              {specs.map((config,index) => {\n                return (\n                  <div className='dropdown-item' key={index} onClick={() => onSelect(config)}>              \n                    {config.symbol} / {config.bTokenSymbol} (10X)\n                  </div>\n                )\n              })}\n            </div>\n            \n          </div>\n        </div>\n\n        <div className='price-fundingRate'>\n          <div className='index-prcie'>\n            Index Price: <span className={indexPriceClass}>&nbsp; <NumberFormat value={indexPrice.index} displayType='text'/></span>\n          </div>\n          <div className='funding-rate'>\n            <span>Funding Rate Annual: &nbsp;</span>\n            <span className='funding-per' title={fundingRateTip}>{ fundingRate }</span> \n          </div>\n        </div>\n      </div>\n      <div className={directionClazz}>\n        <div className='check-long' onClick={() => directionChange('long')}>LONG / BUY</div>\n        <div className='check-short' onClick={() => directionChange('short')}>SHORT / SELL</div>\n      </div>\n      <div className='the-input'>\n        <div className='left'>\n          <div className='current-position'>\n            <span>Current Position</span>\n            <span className='position-text'>{position.volume }</span>\n          </div>\n          <div className='contrant'>            \n            <input\n              type='number'\n              onFocus={onFocus}\n              onBlur={onBlur}\n              onKeyUp={onKeyUp}\n              disabled={!tradeInfo.available}\n              onChange={event =>  setVolume(event.target.value)}\n              value={tradeInfo.volume && Math.abs(tradeInfo.volume)}\n              className={volumeClazz}\n              placeholder='Contract Volume'\n            />\n            <div className='title-volume' >\n              Contract Volume\n            </div>\n          </div>          \n          {!!volume && <div className='btc'><NumberFormat value={tradeInfo.converted} allowNegative={false} displayType='text' decimalScale={4} prefix ='= ' suffix={` ${spec.unit}`}/></div>}\n        </div>\n        <div className='right-info'>\n          <div className='contrant-info'>\n            <div className='balance-contract'>\n              <span className='balance-contract-text'>\n                Balance in Contract<br/>\n                (Dynamic Balance)\n              </span>\n              <span className='balance-contract-num'>\n                <NumberFormat value={ tradeInfo.dynamicBalance } displayType='text' decimalScale={2}/>\n              </span>\n            </div>\n            <div className='box-margin'>\n              <span> Margin </span>\n              <span className='margin'>\n                <NumberFormat value={ tradeInfo.margin } allowNegative={false}  displayType='text' decimalScale={2}/>\n              </span>\n            </div>\n            <div className='available-balance'>\n              <span> Available Balance </span>\n              <span className='available-balance-num'>\n                <NumberFormat value={ tradeInfo.available } displayType='text' decimalScale={2} />\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className='slider mt-13'>\n        <Slider max={tradeInfo.dynamicBalance} onValueChange={onSlide} start={tradeInfo.margin}/>\n      </div>\n      <div className='title-margin'>Margin</div>\n      <div className='enterInfo'>\n        {!!volume && <>\n        <div className='text-info'>\n          <div className='title-enter pool'>Pool Liquidity</div>\n          <div className='text-enter poolL'>\n            <NumberFormat value={ poolLiquidity } decimalScale={2} suffix={` ${spec.bTokenSymbol}` } displayType='text'/> \n          </div>\n        </div>\n        <div className='text-info'>\n          <div className='title-enter'>Liquidity Used</div>\n          <div className='text-enter'>\n            <NumberFormat value={liqUsedPair.curLiqUsed} displayType='text' suffix='%'/> -> <NumberFormat value={ liqUsedPair.afterLiqUsed } displayType='text' decimalScale={2}  suffix='%'/>\n          </div>\n        </div>\n        <div className='text-info'>\n          <div className='title-enter'>Funding Rate Impact</div>\n          <div className='text-enter'>\n            <NumberFormat value={ fundingRate } displayType='text' allowNegative={false} decimalScale={4}/> -> <NumberFormat value={ fundingRateAfter } displayType='text' allowNegative={false} decimalScale={4}/>\n          </div>\n        </div>\n        <div className='text-info'>\n          <div className='title-enter'>Transaction Fee</div>\n          <div className='text-enter'>\n            <NumberFormat value={ transFee } decimalScale={2} suffix={` ${spec.bTokenSymbol}` } displayType='text'/>             \n          </div>\n        </div>\n        </>}\n      </div>\n      <Operator hasConnectWallet={hasConnectWallet} \n                transFee={transFee} \n                wallet={wallet} \n                spec={spec} \n                indexPrice={indexPrice} \n                available={tradeInfo.available}\n                volume={volume} \n                direction={direction}\n                leverage={tradeInfo.leverage}\n                afterTrade={afterTrade}\n                position={position.volume}\n       />\n    </div>\n  </div>\n  )\n}\n\n\nconst ConfirmDialog = withModal(TradeConfirm)\nconst DepositDialog = withModal(DepositMargin)\n\nfunction Operator({hasConnectWallet,wallet,spec,volume,available,\n                  baseToken,leverage,indexPrice,position,direction,transFee,afterTrade}){\n  const [isApprove, setIsApprove] = useState(true);\n  const [noBalance, setNoBalance] = useState(false);\n  const [emptyVolume, setEmptyVolume] = useState(true);\n  const [modalIsOpen, setModalIsOpen] = useState(false);\n\n  \n  const connect = () => {\n    wallet.connect()\n  }\n\n  const approve = () => {\n    const {detail} = wallet\n    const res = unlock(detail.chainId,spec.pool,detail.account);\n    if(res.success){\n      setIsApprove(true);\n    } else {\n      alert(res.error)\n    }\n  }\n\n\n  const afterDeposit = async () => {    \n    onClose();\n    afterTrade()\n  }\n\n\n  //load Approve status\n  const loadApprove = async () => {\n    if(hasConnectWallet() && spec.pool){\n      const {detail} = wallet\n      const result = await isUnlocked(detail.chainId,spec.pool,detail.account).catch(e => console.log(e))\n      setIsApprove(result);\n    }\n  }\n\n  useEffect(() => {\n    if((+available) > 0){\n      setNoBalance(false)\n    } else {\n      setNoBalance(true)\n    }\n    return () => {\n    };\n  }, [available]);\n\n  useEffect(() => {\n    setEmptyVolume(!volume)\n    return () => {};\n  }, [volume]);\n\n\n  useEffect(() => {\n    loadApprove();\n    return () => {      \n    };\n  }, [spec.pool]);\n\n  const onClose = () => {\n    setModalIsOpen(false)\n  }\n  \n\n  let actionElement =(<>\n    <ConfirmDialog  wallet={wallet}\n                    spec={spec}\n                    modalIsOpen={modalIsOpen} \n                    onClose={onClose} \n                    leverage = {leverage} \n                    baseToken={baseToken} \n                    volume={volume} \n                    direction={direction} \n                    position={position} \n                    indexPrice={indexPrice.index} \n                    transFee={transFee}\n                    afterTrade={afterTrade}\n                    />\n    <button className='short-submit' onClick={() => setModalIsOpen(true)}>TRADE</button>\n  </>)\n\n  if(hasConnectWallet()){\n    if(!isApprove) {\n      actionElement = <Button className='approve' btnText='APPROVE' onClick={approve}/>\n    } else if(noBalance && available !== undefined) {\n      actionElement = (<>\n        <DepositDialog \n          wallet={wallet}\n          modalIsOpen={modalIsOpen} \n          onClose={onClose}\n          spec={spec}\n          afterDeposit={afterDeposit}\n        />\n        <div className=\"noMargin-text\">You have no fund in contract. Please deposit first.</div>\n        <button className='short-submit'  onClick={() => setModalIsOpen(true)}>DEPOSIT</button>\n      </>)\n    } else if(emptyVolume) {\n      actionElement = <Button className='btn btn-danger short-submit' disabled btnText='ENTER VOLUME'/>\n    }\n  } else {\n    actionElement = <Button className='btn btn-danger connect' btnText='Connect Wallet' click={connect}/>\n  }\n  return (\n    <div className='submit-btn'>\n      {actionElement}        \n    </div>\n  )\n}","import React, { useState ,useEffect} from 'react'\nimport Button from \"../../Button/Button\";\nimport NumberFormat from 'react-number-format';\nimport { tradeWithMargin } from \"../../../lib/web3js\";\n\n\nexport default function TradeConfirm({wallet,spec,onClose,volume,direction,position = 0,indexPrice,leverage,transFee,afterTrade}){\n\n  const trade = async () => {\n    const amount = direction === 'long' ? volume : -volume\n    const res = await tradeWithMargin(wallet.detail.chainId,spec.pool,wallet.detail.account,amount)\n    if(res.success){\n      afterTrade()\n      onClose()\n    } else {\n      const msg = typeof res.error === 'string' ? res.error : res.error.errorMessage || res.error.message\n      alert(msg)\n    }\n  }\n\n\n  const afterTradePosition = ((+volume) + (+position))\n\n  return (\n    <div className='modal-dialog'>\n      <div className='modal-content'>\n        <div className='modal-header'>\n          <div className='title'>CONFIRM</div>\n          <div className='close' data-dismiss='modal' onClick={onClose}>\n            <span>&times;</span>\n          </div>\n        </div>\n        <div className='modal-body'>\n          <div className='contract-box-info'>\n            <div className='top'>\n              <div className='text'>\n                <div className='text-title'># of Contracts</div>\n                <div className='text-num'>{ volume }</div>\n              </div>\n              <div className='text'>\n                <div className='text-title'>Position after execution</div>\n                <div className='text-num'>{ afterTradePosition }</div>\n              </div>\n              <div className='text'>\n                <div className='text-title'>Direction</div>\n                <div className='text-num'><span className={direction}>{direction}</span></div>\n              </div>\n              <div className='text'>\n                <div className='text-title'>Trade Price (estimated)</div>\n                <div className='text-num'><NumberFormat value={ indexPrice } decimalScale={2}  displayType='text'/></div>\n              </div>\n              <div className='text'>\n                <div className='text-title'>Leverage after execution</div>\n                <div className='text-num'>{ leverage }X</div>\n              </div>\n              <div className='text'>\n                <div className='text-title'>Transaction Fee</div>\n                <div className='text-num'>\n                  <NumberFormat value={ transFee } decimalScale={2} suffix={` ${spec.bTokenSymbol}` } displayType='text'/>                   \n                </div>\n              </div>\n            </div>\n            <div className='modal-footer'>\n              <div className='long-btn' v-if='confirm'>\n                <button className='cancel' onClick={onClose}>CANCEL</button>\n                <Button className='confirm' btnText='OK' click={trade} />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}","import React, { useState ,useEffect} from 'react'\nimport { withdrawMargin, getPositionInfo } from \"../../../lib/web3js\";\nimport NumberFormat from 'react-number-format';\nimport Button from '../../Button/Button';\n\nexport default function WithdrawMagin({wallet,spec = {},onClose,afterWithdraw}){\n  const [walletBalance, setWalletBalance] = useState('');\n  const [decimal, setDecimal] = useState('');\n  const [amount,setAmount] = useState('');\n\n  const loadWalletBalance = async () => {\n    if(wallet.isConnected()){\n      const positionInfo = await getPositionInfo(wallet.detail.chainId,spec.pool,wallet.detail.account);\n      if(positionInfo){\n        const balance = (+positionInfo.margin)  + (+positionInfo.unrealizedPnl) + ''       \n        const decimal = balance.substring(balance.indexOf('.'),balance.indexOf('.') +3)\n        setWalletBalance(balance);\n        setDecimal(decimal);\n      }\n    }\n  }\n\n  const removeAll = () => {\n    setAmount(walletBalance)\n  }\n\n  const onChange = event => {\n    const {value} =event.target\n    setAmount(value)\n  }\n\n  const withdraw = async () => {\n    const res = await withdrawMargin(wallet.detail.chainId,spec.pool,wallet.detail.account,amount);\n    if(res.success){\n      afterWithdraw();\n    } else {\n      const msg = typeof res.error === 'string' ? res.error : res.error.errorMessage || res.error.message\n      alert(msg)\n    }\n  }\n\n  useEffect(() => {\n    loadWalletBalance();\n    return () => {\n    };\n  }, [wallet.detail.account]);\n\n  return (\n    <div\n      className='modal fade'\n      id='removeMargin'\n    >\n      <div className='modal-dialog'>\n        <div className='modal-content'>\n          <div className='modal-header'>\n            <div className='title'>WITHDRAW MARGIN</div>\n            <div className='close' onClick={onClose}>\n              <span>&times;</span>\n            </div>\n          </div>\n          <div className='modal-body'>\n            <div className='margin-box-info'>\n              <div>Available Balance</div>\n              <div className='money'>\n                <span>\n                  <span className='bt-balance'>\n                    <NumberFormat value={ walletBalance } thousandSeparator ={false} displayType = 'text' decimalScale={0}/>.<span style={{fontSize:'12px'}}>{decimal}</span>                     \n                  </span>\n                  </span>\n                <span className='remove'></span>\n              </div>\n              <div className='enter-margin remv'>\n                <div className='input-margin'>\n                  <div className='box'>\n                    <div className='amount' style={{display : amount !=='' ? 'block' : 'none'}}>AMOUNT</div>\n                    <input\n                      type='number'\n                      className='margin-value'\n                      value={amount}\n                      onChange={onChange}\n                      placeholder='Amount'/>\n                  </div>\n                </div>\n                <div>{ spec.baseToken }</div>\n              </div>\n              <div className='max' v-show='isPosition'>\n                MAX: <span className='max-num'>{ walletBalance }</span>\n                <span className='max-btn-left' onClick={removeAll}>REMOVE ALL</span>\n              </div>\n              <div className='add-margin-btn'>\n                <Button className='margin-btn' btnText='WITHDRAW' click={withdraw}/>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}","import React, { useState ,useEffect} from 'react'\nimport NumberFormat from 'react-number-format';\nimport { getPositionInfo, closePosition } from \"../../lib/web3js\";\nimport className from 'classnames'\nimport withModal from '../hoc/withModal';\nimport DepositMargin from './Dialog/DepositMargin';\nimport WithdrawMagin from './Dialog/WithdrawMargin';\nimport useInterval from '../../hooks/useInterval';\n\n\n\nconst DepositDialog = withModal(DepositMargin);\nconst WithDrawDialog = withModal(WithdrawMagin)\n\nexport default function Position({wallet,spec = {}}){\n  const [isLiquidation, setIsLiquidation] = useState(false);\n  const [position, setPosition] = useState({});\n  const [direction, setDirection] = useState('');\n  const [balanceContract, setBalanceContract] = useState('');\n  const [addModalIsOpen, setAddModalIsOpen] = useState(false);\n  const [removeModalIsOpen, setRemoveModalIsOpen] = useState(false);\n  useInterval(loadPositionInfo,3000)\n\n  async function loadPositionInfo() { \n    if(wallet.isConnected() && spec && spec.pool){\n      const positionInfo = await getPositionInfo(wallet.detail.chainId,spec.pool,wallet.detail.account)\n      if(positionInfo){\n        setPosition(positionInfo);\n        const direction = (+positionInfo.volume) > 0 ? 'LONG' : (positionInfo.volume == 0 ? '--' : 'SHORT') \n        setDirection(direction)      \n        setBalanceContract((+positionInfo.margin) + (+positionInfo.unrealizedPnl))\n      }\n    }    \n  }\n\n  //平仓\n  const onClosePosition = async () => {\n    setIsLiquidation(true)\n    const res = await closePosition(wallet.detail.chainId,spec.pool,wallet.detail.account).finally(() => setIsLiquidation(false))\n    if(res.success){\n      loadPositionInfo();\n    } else {      \n      if(typeof res.error === 'string') {\n        alert(res.error)\n      } else if(typeof res.error === 'object'){\n        alert(res.error.errorMessage)\n      } else {\n        alert('Liquidation failed')\n      }\n      \n    }\n  }\n\n  const afterDeposit = () => {\n    setAddModalIsOpen(false)\n    loadPositionInfo();\n  }\n\n  const onCloseDeposit = () => {\n    setAddModalIsOpen(false)\n  }\n\n  const afterWithdraw = () => {\n    setRemoveModalIsOpen(false)\n    loadPositionInfo();\n  }\n\n  const onCloseWithdraw = () => {\n    setRemoveModalIsOpen(false)\n  }\n\n  const directionClass = className('Direction','info-num',{\n    'LONG' : direction === 'LONG',\n    'SHORT' : direction === 'SHORT'\n  })\n\n\n\n  useEffect(() => {\n    loadPositionInfo();\n    return () => {\n    };\n  }, [wallet.detail.account,spec.pool]);\n\n   \n  \n  return(\n\n    <div className='position-info'>\n    <div className='info'>\n      <div className='info-left'>\n        <div className='title-text'>Position</div>\n        <div className='info-num'>{ position.volume}</div>\n      </div>\n      <div className='info-right'>\n        <div\n          className='close-position'\n          id='close-p'\n          onClick={onClosePosition}\n        >\n          <span\n            className='spinner spinner-border spinner-border-sm'\n            role='status'\n            aria-hidden='true'\n            style={{display: isLiquidation ? 'block' : 'none'}}\n          ></span>\n          <svg t='1618369709897' className='icon' viewBox='0 0 1024 1024' version='1.1' xmlns='http://www.w3.org/2000/svg' p-id='2009' width='14' height='14'><path d='M510.8096 420.3008l335.296-335.296 90.5088 90.5088-335.296 335.296 335.296 335.296-90.5088 90.5088-335.296-335.296-335.296 335.296-90.5088-90.5088 335.296-335.296-335.296-335.296 90.5088-90.5088z' p-id='2010' fill='#ffffff'></path></svg> Close\n        </div>\n      </div>\n    </div>\n    <div className='info'>\n      <div className='info-left'>\n        <div className='title-text'>Average Entry Price</div>\n        <div className='info-num'><NumberFormat value={ position.averageEntryPrice } decimalScale={2} displayType='text'/></div>\n      </div>\n      <div className='info-right'></div>\n    </div>\n    <div className='info'>\n      <div className='info-left'>\n        <div className='title-text balance-con'>\n          Balance in Contract\n          (Dynamic Balance)\n        </div>\n        <div className='info-num'> <NumberFormat decimalScale = {2} value={ balanceContract} displayType='text' /></div>\n      </div>\n      <div className='info-right'>\n        <div\n          className='add-margin'\n          id='openAddMargin'\n          onClick={() => setAddModalIsOpen(true)}\n        >\n          <svg\n            className='svg'\n            xmlns='http://www.w3.org/2000/svg'\n            width='18'\n            height='18'\n            viewBox='0 0 18 18'\n          >\n            <path\n              id='login'\n              d='M13,9,7,4V7H0v4H7v3Zm3,7H8v2h8a2.006,2.006,0,0,0,2-2V2a2.006,2.006,0,0,0-2-2H8V2h8Z'\n              transform='translate(18) rotate(90)'\n              fill='#3ebf38'\n            />\n          </svg>\n          Add\n        </div>\n        <div\n          className='remove-margin'\n          onClick={() => setRemoveModalIsOpen(true)}\n        >\n          <svg\n            className='svg'\n            xmlns='http://www.w3.org/2000/svg'\n            width='18'\n            height='18'\n            viewBox='0 0 18 18'\n          >\n            <path\n              id='log-out'\n              data-name='log out'\n              d='M18,9,12,4V7H5v4h7v3ZM2,2h8V0H2A2.006,2.006,0,0,0,0,2V16a2.006,2.006,0,0,0,2,2h8V16H2Z'\n              transform='translate(0 18) rotate(-90)'\n              fill='#e35061'\n            />\n          </svg>\n          Remove\n        </div>\n      </div>\n    </div>\n    <div className='info'>\n      <div className='info-left'>\n        <div className='title-text'>Direction</div>\n        <div className={directionClass} >{direction}</div>\n      </div>\n      <div className='info-right'></div>\n    </div>\n    <div className='info'>\n      <div className='info-left'>\n        <div className='title-text'>Margin</div>\n        <div className='info-num'><NumberFormat value={ position.marginHeld } displayType='text' decimalScale={2}/></div>\n      </div>\n      <div className='info-right'></div>\n    </div>\n    <div className='info'>\n      <div className='info-left'>\n        <div className='title-text'>Unrealized PnL</div>\n        <div className='info-num'><NumberFormat value={ position.unrealizedPnl } displayType='text' decimalScale={8}/></div>\n      </div>\n      <div className='info-right'></div>\n    </div>\n    <div className='info'>\n      <div className='info-left'>\n        <div className='title-text'>Liquidation Price</div>\n        <div className='info-num'><NumberFormat decimalScale = {2} value={position.liquidationPrice} displayType='text'/></div>\n      </div>\n      <div className='info-right'></div>\n    </div>\n    <DepositDialog\n       wallet={wallet}\n       modalIsOpen={addModalIsOpen} \n       onClose={onCloseDeposit}\n       spec={spec}\n       afterDeposit={afterDeposit}\n    />\n    <WithDrawDialog\n      wallet={wallet}\n      modalIsOpen={removeModalIsOpen} \n      onClose={onCloseWithdraw}\n      spec={spec}\n      afterWithdraw={afterWithdraw}\n      />\n  </div>\n  )\n}","import React, { useState ,useEffect} from 'react'\nimport { getTradeHistory } from \"../../lib/web3js\";\nimport dateFormat from 'date-format'\nimport NumberFormat from 'react-number-format';\nimport useInterval from '../../hooks/useInterval';\n\nexport default function History({wallet = {},spec ={} ,specs = []}){\n  const [history, setHistory] = useState([]);\n\n  const loadHistory =  async () => {\n    if(wallet.detail.account && spec.pool && specs){\n      const all = await getTradeHistory(wallet.detail.chainId,spec.pool,wallet.detail.account)\n      const his = all.map(item => {\n        item.directionText = item.direction === 'LONG' ? 'LONG / BUY' : 'SHORT / SELL'\n        const find = specs.find(s => s.bTokenSymbol === item.baseToken)\n        if(find){\n          item.baseTokenText = ` ${find.symbol} / ${find.bTokenSymbol}`\n        }\n        return item;\n      })\n      setHistory(his)\n    }\n  }\n\n  // useInterval(loadHistory,3000)\n  useEffect(() => {\n    loadHistory();\n    return () => {      \n    };\n  }, [wallet.detail,spec.pool,specs]);\n  \n  return (\n    <div className='history-info' v-show='historyShow'>\n      {history.map((his,index) => {\n        return (\n          <div className='history-box' key={index}>\n          <div className='direction-bToken-price'>\n            <span>\n              <span className={`${his.direction}`}>{ his.directionText }</span>\n              <span>{ his.baseTokenText }</span>\n            </span>\n            <span className='history-text time'>{dateFormat.asString('yyyy-MM-dd hh:mm:ss',new Date(parseInt(his.time)))}</span>\n          </div>\n          <div className='time-price-volume'>\n            <div className='history-price'>\n              <div className='history-title'>Volume @ Price</div>\n              <div className='history-text'>{ his.volume } @ <NumberFormat value={ his.price } decimalScale={2} displayType='text'/></div>\n            </div>\n          <div className='notional'>\n              <div className='history-title'>Notional</div>\n              <div className='history-text'>{ his.notional }</div>\n            </div>\n            <div className='history-fee'>\n              <div className='history-title'>Transaction Fee</div>\n              <div className='history-text'>{ his.transactionFee }</div>\n            </div>\n          </div>        \n        </div>\n        )\n      })}\n    </div>\n  )\n}","import { useState } from 'react'\n\nimport TradeInfo from './TradeInfo';\nimport Position from './Position';\nimport History from './History';\nimport classNames from 'classnames';\nimport ContractInfo from '../ContractInfo/ContractInfo';\n\nexport default function Lite({wallet,specs,spec,onSpecChange,isPro,indexPrice}){\n  const [curTab, setCurTab] = useState('trade');\n\n  const switchTab = current => setCurTab(current);\n  const tradeClassName = classNames('trade-position',curTab)\n  return (\n      <div className={tradeClassName}>\n        <div className='header-top'>\n          <div className='header'>\n            <span className='trade' onClick={() => switchTab('trade')}>\n              TRADE\n            </span>\n            {!isPro && <>\n            <span\n              className='position' onClick={() => switchTab('position')}>\n              MY POSITION\n            </span>\n            <span className='history' onClick={() => switchTab('history')}>\n              HISTORY\n            </span>\n            </>}\n          </div>\n        </div>\n        <TradeInfo wallet ={wallet}  spec={spec} specs={specs} indexPrice={indexPrice}  onSpecChange={onSpecChange}/>\n        <Position  wallet ={wallet} spec={spec}/>\n        <History wallet ={wallet} spec={spec} specs={specs} />\n        <ContractInfo wallet={wallet} spec={spec}/>   \n    </div> \n  )\n}","var t=function(){return(t=Object.assign||function(t){for(var e,o=arguments,n=1,i=arguments.length;n<i;n++)for(var r in e=o[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function e(o,n){var i=t({},o);for(var r in n)\"object\"!=typeof o[r]||null===o[r]||Array.isArray(o[r])?void 0!==n[r]&&(i[r]=n[r]):i[r]=e(o[r],n[r]);return i}var o={mobile:{disabled_features:[\"left_toolbar\",\"header_widget\",\"timeframes_toolbar\",\"edit_buttons_in_legend\",\"context_menus\",\"control_bar\",\"border_around_the_chart\"],enabled_features:[]}},n={width:800,height:500,interval:\"1D\",timezone:\"Etc/UTC\",container_id:\"\",library_path:\"\",locale:\"en\",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{\"mainSeriesProperties.showCountdown\":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:\"5y\",resolution:\"1W\"},{text:\"1y\",resolution:\"1W\"},{text:\"6m\",resolution:\"120\"},{text:\"3m\",resolution:\"60\"},{text:\"1m\",resolution:\"30\"},{text:\"5d\",resolution:\"5\"},{text:\"1d\",resolution:\"1\"}],client_id:\"0\",user_id:\"0\",charts_storage_api_version:\"1.0\",favorites:{intervals:[],chartTypes:[]}};function i(){return\"CL v18.043 (internal id b555c6a4 @ 2021-02-18T09:41:15.150Z)\"}var r=function(){function t(t){if(this._id=\"tradingview_\"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!t.datafeed)throw new Error(\"Datafeed is not defined\");if(this._options=e(n,t),t.preset){var i=o[t.preset];i?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(i.disabled_features):this._options.disabled_features=i.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(i.enabled_features):this._options.enabled_features=i.enabled_features):console.warn(\"Unknown preset: `\"+t.preset+\"`\")}\"Dark\"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:\"#131722\"}),this._create()}return t.prototype.onChartReady=function(t){this._ready?t.call(this):this._readyHandlers.push(t)},t.prototype.headerReady=function(){var t=this;return this._innerWindowLoaded.then((function(){return t._innerWindow().headerReady()}))},t.prototype.onGrayedObjectClicked=function(t){this._innerAPI().onGrayedObjectClicked(t)},t.prototype.onShortcut=function(t,e){this._innerWindow().createShortcutAction(t,e)},t.prototype.subscribe=function(t,e){this._innerAPI().subscribe(t,e)},t.prototype.unsubscribe=function(t,e){this._innerAPI().unsubscribe(t,e)},t.prototype.chart=function(t){return this._innerAPI().chart(t)},t.prototype.getLanguage=function(){return this._options.locale},t.prototype.setSymbol=function(t,e,o){this._innerAPI().changeSymbol(t,e,o)},t.prototype.remove=function(){window.removeEventListener(\"resize\",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)},t.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},t.prototype.selectLineTool=function(t){this._innerAPI().selectLineTool(t)},t.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},t.prototype.save=function(t){this._innerAPI().saveChart(t)},t.prototype.load=function(t,e){this._innerAPI().loadChart({json:t,extendedData:e})},t.prototype.getSavedCharts=function(t){this._innerAPI().getSavedCharts(t)},t.prototype.loadChartFromServer=function(t){this._innerAPI().loadChartFromServer(t)},t.prototype.saveChartToServer=function(t,e,o){this._innerAPI().saveChartToServer(t,e,o)},t.prototype.removeChartFromServer=function(t,e){this._innerAPI().removeChartFromServer(t,e)},t.prototype.onContextMenu=function(t){this._innerAPI().onContextMenu(t)},t.prototype.createButton=function(t){return this._innerWindow().createButton(t)},t.prototype.showNoticeDialog=function(t){this._innerAPI().showNoticeDialog(t)},t.prototype.showConfirmDialog=function(t){this._innerAPI().showConfirmDialog(t)},t.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},t.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},t.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},t.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},t.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},t.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},t.prototype.addCustomCSSFile=function(t){this._innerWindow().addCustomCSSFile(t)},t.prototype.applyOverrides=function(t){this._options=e(this._options,{overrides:t}),this._innerWindow().applyOverrides(t)},t.prototype.applyStudiesOverrides=function(t){this._innerWindow().applyStudiesOverrides(t)},t.prototype.watchList=function(){return this._innerAPI().watchlist()},t.prototype.activeChart=function(){return this._innerAPI().activeChart()},t.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},t.prototype.layout=function(){return this._innerAPI().layout()},t.prototype.setLayout=function(t){this._innerAPI().setLayout(t)},t.prototype.layoutName=function(){return this._innerAPI().layoutName()},t.prototype.changeTheme=function(t,e){this._innerWindow().changeTheme(t,e)},t.prototype.getTheme=function(){return this._innerWindow().getTheme()},t.prototype.takeScreenshot=function(){this._innerAPI().takeScreenshot()},t.prototype.lockAllDrawingTools=function(){return this._innerAPI().lockAllDrawingTools()},t.prototype.hideAllDrawingTools=function(){return this._innerAPI().hideAllDrawingTools()},t.prototype.drawOnAllCharts=function(t){this._innerAPI().drawOnAllCharts(t)},t.prototype.magnetEnabled=function(){return this._innerAPI().magnetEnabled()},t.prototype.magnetMode=function(){return this._innerAPI().magnetMode()},t.prototype.undoRedoState=function(){return this._innerAPI().undoRedoState()},t.prototype.setIntervalLinkingEnabled=function(t){this._innerAPI().setIntervalLinkingEnabled(t)},t.prototype.setTimeFrame=function(t){this._innerAPI().setTimeFrame(t)},t.prototype.symbolSync=function(){return this._innerAPI().symbolSync()},t.prototype.intervalSync=function(){return this._innerAPI().intervalSync()},t.prototype.crosshairSync=function(){return this._innerAPI().crosshairSync()},t.prototype.timeSync=function(){return this._innerAPI().timeSync()},t.prototype.getAllFeatures=function(){return this._innerWindow().getAllFeatures()},t.prototype.clearUndoHistory=function(){return this._innerAPI().clearUndoHistory()},t.prototype.undo=function(){return this._innerAPI().undo()},t.prototype.redo=function(){return this._innerAPI().redo()},t.prototype.startFullscreen=function(){this._innerAPI().startFullscreen()},t.prototype.exitFullscreen=function(){this._innerAPI().exitFullscreen()},t.prototype.takeClientScreenshot=function(t){return this._innerAPI().takeClientScreenshot(t)},t.prototype._innerAPI=function(){return this._innerWindow().tradingViewApi},t.prototype._innerWindow=function(){return this._iFrame.contentWindow},t.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+\"px\")},t.prototype._create=function(){var t=this,e=this._render(),o=document.getElementById(this._options.container_id);if(null===o)throw new Error(\"There is no such element - #\"+this._options.container_id);o.innerHTML=e,this._iFrame=o.querySelector(\"#\"+this._id);var n=this._iFrame;(this._options.autosize||this._options.fullscreen)&&(n.style.width=\"100%\",this._options.fullscreen||(n.style.height=\"100%\")),window.addEventListener(\"resize\",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise((function(t){var e=function(){n.removeEventListener(\"load\",e,!1),t()};n.addEventListener(\"load\",e,!1)})),this._innerWindowLoaded.then((function(){t._innerWindow().widgetReady((function(){t._ready=!0;for(var e=0,o=t._readyHandlers;e<o.length;e++){var n=o[e];try{n.call(t)}catch(i){console.error(i)}}t._innerWindow().initializationFinished()}))}))},t.prototype._render=function(){var t=window;if(t[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.custom_formatters||this._options.customFormatters,brokerFactory:this._options.broker_factory||this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.broker_config||this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter},this._options.saved_data)t[this._id].chartContent={json:this._options.saved_data},this._options.saved_data_meta_info&&(t[this._id].chartContentExtendedData=this._options.saved_data_meta_info);else if(!this._options.load_last_chart&&!this._options.symbol)throw new Error(\"Symbol is not defined: either 'symbol' or 'load_last_chart' option must be set\");var e=(this._options.library_path||\"\")+(encodeURIComponent(this._options.locale)+\"-tv-chart.b555c6a4.html#symbol=\")+encodeURIComponent(this._options.symbol||\"\")+\"&interval=\"+encodeURIComponent(this._options.interval)+(this._options.timeframe?\"&timeframe=\"+encodeURIComponent(this._options.timeframe):\"\")+(this._options.toolbar_bg?\"&toolbarbg=\"+encodeURIComponent(this._options.toolbar_bg.replace(\"#\",\"\")):\"\")+(this._options.studies_access?\"&studiesAccess=\"+encodeURIComponent(JSON.stringify(this._options.studies_access)):\"\")+\"&widgetbar=\"+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?\"&drawingsAccess=\"+encodeURIComponent(JSON.stringify(this._options.drawings_access)):\"\")+\"&timeFrames=\"+encodeURIComponent(JSON.stringify(this._options.time_frames))+\"&locale=\"+encodeURIComponent(this._options.locale)+\"&uid=\"+encodeURIComponent(this._id)+\"&clientId=\"+encodeURIComponent(String(this._options.client_id))+\"&userId=\"+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?\"&chartsStorageUrl=\"+encodeURIComponent(this._options.charts_storage_url):\"\")+(this._options.charts_storage_api_version?\"&chartsStorageVer=\"+encodeURIComponent(this._options.charts_storage_api_version):\"\")+(this._options.custom_css_url?\"&customCSS=\"+encodeURIComponent(this._options.custom_css_url):\"\")+(this._options.auto_save_delay?\"&autoSaveDelay=\"+encodeURIComponent(String(this._options.auto_save_delay)):\"\")+\"&debug=\"+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?\"&snapshotUrl=\"+encodeURIComponent(this._options.snapshot_url):\"\")+(this._options.timezone?\"&timezone=\"+encodeURIComponent(this._options.timezone):\"\")+(this._options.study_count_limit?\"&studyCountLimit=\"+encodeURIComponent(String(this._options.study_count_limit)):\"\")+(this._options.symbol_search_request_delay?\"&ssreqdelay=\"+encodeURIComponent(String(this._options.symbol_search_request_delay)):\"\")+(this._options.compare_symbols?\"&compareSymbols=\"+encodeURIComponent(JSON.stringify(this._options.compare_symbols)):\"\")+(this._options.theme?\"&theme=\"+encodeURIComponent(String(this._options.theme)):\"\");return'<iframe id=\"'+this._id+'\" name=\"'+this._id+'\"  src=\"'+e+'\"'+(this._options.autosize||this._options.fullscreen?\"\":' width=\"'+this._options.width+'\" height=\"'+this._options.height+'\"')+' frameborder=\"0\" allowTransparency=\"true\" scrolling=\"no\" allowfullscreen style=\"display:block;\"></iframe>'},t}();window.TradingView=window.TradingView||{},window.TradingView.version=i;export{i as version,r as widget};\n","/* eslint-disable no-case-declarations */\nimport axios from 'axios'\nimport {DeriEnv} from \"../../../../../lib/web3js\";\n\nconst history = {}\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default {  \n  history,\n  getBars: function (symbolInfo, resolution, _from, to, first) {\n    const trade =  symbolInfo.name;\n    let url;\n    if(DeriEnv.get()=='prod'){\n      if(trade =='COIN'){\n        url = 'https://oracle3.deri.finance/pricekline/'\n      }else{\n        url = 'https://oracle.deri.finance/pricekline/'\n      }\n      \n    }else{\n      url =\"https://oracle2.deri.finance/pricekline/\"\n    }\n    const params = {\n      symbol: trade,\n      bars: 200,\n    }\n    switch(true) {\n      case resolution.indexOf('D') > 0 :\n        const d = resolution.substr(0, 1);\n        params.period = d*24*60*60\n      break;\n      case resolution.indexOf('W') > 0 :\n        const w = resolution.substr(0, 1);\n        params.period = w*24*60*60*7\n      break;\n      case resolution.indexOf('M') > 0:\n        const m = resolution.substr(0, 1);\n        params.period = m*24*60*60*30\n      break;\n      default :\n        params.period = resolution*60 \n      break;\n    }\n    \n    return axios.get(url, {\n        params: {\n            ...params\n        }\n    }).then(res => {\n        // console.log(res)\n        // if (data.Response && data.Response === 'Error') {\n        //   console.log('CryptoCompare API error:', data.Message)\n        //   return []\n        // }\n        if (res.data.data.length) {\n          // res.data.shift()\n          // console.log(`Actually returned: ${new Date(data.TimeFrom * 1000).toISOString()} - ${new Date(data.TimeTo * 1000).toISOString()}`)\n          var bars = res.data.data.map(el => {\n            let time = String(el.ts).length < 13 ? el.ts * 1000 : el.ts\n            // if (resolution.indexOf('D') > 0) {\n            //   time = time + 8*60*60*1000\n            // }\n            // if (resolution.indexOf('W') > 0) {\n            //   time = time + 32*60*60*1000\n            // }\n            return {\n              time, //TradingView requires bar time in ms\n              low: Number(el.l),\n              high: Number(el.h),\n              open: Number(el.o),\n              close: Number(el.c),\n              volume: Number(el.v)\n            }\n          })\n          if (first) {\n            var lastBar = bars[bars.length - 1]\n            history[symbolInfo.name] = {\n              lastBar\n            }\n          }\n          return bars\n        } else {\n          return []\n        }\n      })\n  }\n}","/* eslint-disable import/no-anonymous-default-export */\n// import stream from './stream'\nimport historyProvider from './historyProvider'\nconst supportedResolutions = [\"1\", \"5\", \"15\", \"30\", \"60\", \"240\", \"1D\", \"5D\", \"1W\", \"1M\"]\n\nconst config = {\n    supported_resolutions: supportedResolutions\n};\nexport default {\n    onReady: cb => {\n        // console.log('=====onReady running')\t\n        setTimeout(() => cb(config), 0)\n\n    },\n    bars: {},\n    searchSymbols: (userInput, exchange, symbolType, onResultReadyCallback) => {\n        // console.log('====Search Symbols running')\n    },\n    resolveSymbol: (symbolName, onSymbolResolvedCallback, onResolveErrorCallback) => {\n        // expects a symbolInfo object in response\n        // console.log('======resolveSymbol running')\n        // console.log('resolveSymbol:',{symbolName})\n        // var split_data = symbolName.split(/[:/]/)\n        // console.log({split_data})\n        // console.log('symbolName: ', symbolName)\n        const symbol_stub = {\n            name: symbolName,\n            pricescale: 100,//保留小数，如：2位小数传100，3位传1000\n            ticker: symbolName,\n            description: \"\",\n            minmov: 1,\n            type: \"crypto\",\n            has_intraday: true,\n            intraday_multipliers: ['1', '2', '5', '15', '30', '60', '240', '1D', '7D', '1W', '1M'],//所有的周期\n            has_weekly_and_monthly: true,//是否有周线和月线\n            data_status: 'streaming',\n            has_no_volume: true,//是否将成交量独立出来\n            pro_name: symbolName,\n            has_daily: true,\n            regular_session: \"24x7\"\n        }\n        // console.log('symbol_stub: ', symbol_stub)\n\n        // if (split_data[2].match(/USD|EUR|JPY|AUD|GBP|KRW|CNY/)) {\n        // \tsymbol_stub.pricescale = 100\n        // }\n        setTimeout(function () {\n            onSymbolResolvedCallback(symbol_stub)\n            // console.log('Resolving that symbol....', symbol_stub)\n        }, 0)\n\n        // onResolveErrorCallback('Not feeling it today')\n\n    },\n    getBars: function (symbolInfo, resolution, from, to, onHistoryCallback, onErrorCallback, firstDataRequest) {\n        if (from > 0 && to > 0) {\n            const localResolutions = localStorage.getItem('localResolutions') || resolution\n            // setInterval(()=>{\n                historyProvider.getBars(symbolInfo, localResolutions, from, to, firstDataRequest)\n                .then(bars => {\n                    const len = bars.length\n                    // window.bars = bars;\n                    if (len) {\n                        if (to*1000 > bars[len -1].time) {\n                            onHistoryCallback(bars, {noData: false})\n                            // onResetCacheNeededCallback()\n                        } else {\n                            onHistoryCallback([], {noData: true})\n                            // onResetCacheNeededCallback()\n                        }\n                    } else {\n                        onHistoryCallback(bars, {noData: true})\n                        // onResetCacheNeededCallback()\n                    }\n                }).catch(err => {\n                    // console.log({err})\n                    onErrorCallback(err)\n                })\n                // },5000)\n            \n\n        }\n\n        // onHistoryCallback(bars,{ noData: false});\n    },\n    subscribeBars: (symbolInfo, resolution, onRealtimeCallback, subscribeUID, onResetCacheNeededCallback) => {\n        \n        // console.log('=====subscribeBars runnning')\n        //  stream.subscribeBars(symbolInfo, resolution, onRealtimeCallback, subscribeUID, onResetCacheNeededCallback)\n    },\n    unsubscribeBars: subscriberUID => {\n        // console.log('=====unsubscribeBars running')\n\n        //  stream.unsubscribeBars(subscriberUID)\n    },\n    calculateHistoryDepth: (resolution, resolutionBack, intervalBack) => {\n        //optional\n        // console.log('=====calculateHistoryDepth running')\n        // while optional, this makes sure we request 24 hours of minute data at a time\n        // CryptoCompare's minute data endpoint will throw an error if we request data beyond 7 days in the past, and return no data\n        // switch (true) {\n        //     case resolution.indexOf('D') > 0:\n        //         return { resolutionBack: 'W', intervalBack: '1' }\n        //     case resolution.indexOf('W') > 0:\n        //         return { resolutionBack: 'D', intervalBack: '1' }\n        //     case resolution.indexOf('M') > 0:\n        //         return { resolution: 'D', resolutionBack: 'M', intervalBack: '1' }\n        //     default:\n        //         return { resolutionBack: 'D', intervalBack: '1' }\n        // }\n        // return resolution < 60 ? {resolutionBack: 'D', intervalBack: '1'} : undefined\n    },\n    getMarks: (symbolInfo, startDate, endDate, onDataCallback, resolution) => {\n        //optional\n        // console.log('=====getMarks running')\n    },\n    getTimeScaleMarks: (symbolInfo, startDate, endDate, onDataCallback, resolution) => {\n        //optional\n        // console.log('=====getTimeScaleMarks running')\n    },\n    getServerTime: cb => {\n        // console.log('=====getServerTime running')\n    }\n}\n","import React, { useState, useEffect ,useRef} from 'react'\nimport {widget} from '../../../../lib/charting_library'\nimport datafeeds from './datafeeds/index'\nimport classNames from 'classnames';\nconst defaultProps = {\n  containerId : 'tv_chart_container'\n}\nexport default function TradingViewChart({spec = {}}){\n  const [loading, setLoading] = useState(true);\n  const [actived, setActived] = useState('thirty');\n  const [deriWidget, setDeriWidget] = useState(null);\n\n  const activedClass = classNames('btn',actived)\n\n  const initialize = () => {\n    const widgetOptions = {\n\t\t\tsymbol: spec.symbol,\n      datafeed: datafeeds,\n      interval: localStorage.getItem('localResolutions') || '1D',\n      container_id: defaultProps.containerId,\n      library_path: '/charting_library/',\n      locale: 'en',\n      disabled_features: [\n        'header_widget',\n        'display_market_status',\n        'timeframes_toolbar',\n        'left_toolbar',\n        'legend_context_menu',\n        'adptive_logo',\n        'use_localstorage_for_settings',\n        'edit_buttons_in_legend',\n        'control_bar',\n        'move_logo_to_main_pane',\n      ],\n      enabled_features: [\n          'show_logo_on_all_charts'\n      ],\n      charts_storage_url: 'https://saveload.tradingview.com',\n      charts_storage_api_version: '1.14',\n      client_id: 'tradingview.com',\n      user_id: 'public_user_id',\n      fullscreen: false,\n      autosize: true,\n      overrides: {\n        'paneProperties.background': '#212327',\n        'paneProperties.vertGridProperties.color': '#212327',\n        'paneProperties.horzGridProperties.color': '#212327',\n        'symbolWatermarkProperties.transparency': 90,\n        'scalesProperties.textColor': '#AAA',\n        'mainSeriesProperties.candleStyle.wickUpColor': '#76af8e',\n        'mainSeriesProperties.candleStyle.wickDownColor': '#ee5766',\n      },\n      timezone: 'Asia/Beijing',\n    }\n\n\t\tconst w  = new widget(widgetOptions);\n\n\t\tw.onChartReady(() => {\n      w.activeChart().setResolution('30',() => {\n        setLoading(false)\n      })\n    });\n    return w;\n  }\n\n\n  const  changeTime= (time,period) => {\n    setLoading(true)\n    setActived(period)\n    deriWidget.chart().refreshMarks()\n    deriWidget.activeChart().setResolution(time,() => {\n      setLoading(false)\n    })    \n    \n  }\n\n  useEffect(() => {\n    setDeriWidget(initialize())\n    return () => {\n      if (deriWidget !== null) {\n        deriWidget.remove();\n      }\n    };\n  }, []);\n\n  return(\n    <div id='tradingview'>\n      <div className={activedClass}>\n          <span className='tab-btn one' onClick={() => changeTime('1','one')} >1min</span>\n          <span className='tab-btn five' onClick={() => changeTime('5','five')}>5min</span>\n          <span className='tab-btn fifteen' onClick={() => changeTime('15','fifteen')}>15min</span>\n          <span className='tab-btn thirty' onClick={() => changeTime('30','thirty')}>30min</span>\n          <span className='tab-btn sixty' onClick={() => changeTime('60','sixty')}>1hour</span>\n          <span className='tab-btn one-day' onClick={() => changeTime('1D','one-day')}>1day</span>\n          <span className='tab-btn one-week' onClick={() => changeTime('1W','one-week')}>1week</span>\n      </div>\n      <div className='loading' style={{display : loading ? 'block' : 'none'}}>\n          <div className='spinner-border' role='status'>\n              <span className='sr-only'></span>\n          </div>\n      </div>\n      <div id={defaultProps.containerId}>        \n      </div>\n  </div>\n  )\n}","import React, { useState, useEffect,useRef } from 'react'\nimport { getFundingRate } from \"../../../../lib/web3js\"\nimport NumberFormat from 'react-number-format'\nimport TradingViewChart from \"./TradingViewChart\";\n\nexport default function TradingView({wallet = {},spec = {},indexPrice}){\n  const [fundingRate, setFundingRate] = useState({\n    fundingRate0 : '-',\n    tradersNetVolume: '-'\n  });\n  const [indexPriceClass, setIndexPriceClass] = useState('');\n  const indexPriceRef = useRef()\n\n\n\n  const loadFundingRate = async () => {\n    if(wallet.isConnected()){\n      const fundingRate = await getFundingRate(wallet.detail.chainId,spec.pool)\n      setFundingRate(fundingRate)\n    }\n  }\n\n\n  useEffect(() => {    \n    if(indexPriceRef.current){\n      indexPriceRef.current > indexPrice.index ? setIndexPriceClass('fall') : setIndexPriceClass('rise');\n    }\n    indexPriceRef.current = indexPrice.index\n    return () => {      \n    };\n  }, [indexPrice.index]);\n\n  useEffect(() => {\n    loadFundingRate();\n    return () => {\n    };\n  }, [wallet.detail.account,spec,indexPrice.index]);\n  return (\n    <div id=\"trading-view\">\n      <div className='right-top'>\n        <div className='symbol-basetoken-text'>\n          {spec.symbol} / {spec.bTokenSymbol} (10X)\n        </div>\n        <div className='trade-dashboard-item latest-price'>\n          <div className='trade-dashboard-title'>Index Price</div>\n          <div className={indexPriceClass}><NumberFormat value={indexPrice.index} displayType='text'/></div>\n        </div>\n        <div className='trade-dashboard-item latest-price'>\n          <div className='trade-dashboard-title'><span >Funding Rate Annual</span>  </div>\n          <div className='trade-dashboard-value'> \n          <span className='funding-per'> \n            <NumberFormat value={ fundingRate.fundingRate0 } displayType='text' decimalScale={4} suffix='%'/>\n          </span>\n          </div>\n        </div>\n        <div className='trade-dashboard-item latest-price'>\n          <div className='trade-dashboard-title'>Total Net Position</div>\n          <div className='trade-dashboard-value'>{fundingRate.tradersNetVolume}</div>\n        </div>            \n        <div className='trade-dashboard-item latest-price'>\n          <div className='trade-dashboard-title'>Pool Total liquidity</div>\n          <div className='trade-dashboard-value'> <NumberFormat allowLeadingZeros={true} value={fundingRate.liquidity || '--'} displayType='text' decimalScale={2}/> {spec.bTokenSymbol}</div>\n        </div>\n      </div>\n      <div className='tradingview'>\n        <TradingViewChart spec={spec} />\n      </div>\n  </div>\n  )\n}","/* eslint-disable jsx-a11y/alt-text */\n/* eslint-disable react/jsx-no-comment-textnodes */\nimport React, { useState,useEffect } from 'react'\nimport NumberFormat from 'react-number-format'\nimport { getPositionInfo, closePosition } from '../../../../lib/web3js';\nimport closePosImg from '../../../img/close-position.png'\nimport withModal from '../../../../components/hoc/withModal';\nimport DepositMargin from '../../../../components/Lite/Dialog/DepositMargin';\nimport WithdrawMagin from '../../../../components/Lite/Dialog/WithdrawMargin';\nimport useInterval from '../../../../hooks/useInterval';\n\nexport default function Position({wallet = {},spec = {}}){\n  const [positionInfo, setPositionInfo] = useState({\n    balanceContract : '-',\n    averageEntryPrice : '-',\n    marginHeld : '-',\n    unrealizedPnl : '-',\n    liquidationPrice : '-'\n  });\n  const [closing, setClosing] = useState(false);\n  const [addModalIsOpen, setAddModalIsOpen] = useState(false);\n  const [removeModalIsOpen, setRemoveModalIsOpen] = useState(false);\n  useInterval(loadPositionInfo,3000)\n\n  const DepositDialog = withModal(DepositMargin);\n  const WithDrawDialog = withModal(WithdrawMagin)\n\n  const afterWithdraw =() => {\n    loadPositionInfo();\n  }\n\n  const afterDeposit = afterWithdraw\n\n  const onCloseDeposit = () => setAddModalIsOpen(false)\n  const onCloseWithdraw = () => setRemoveModalIsOpen(false);\n\n\n  \n  async function loadPositionInfo(){    \n    if(wallet.isConnected() && spec.pool){\n      const positionInfo = await getPositionInfo(wallet.detail.chainId,spec.pool,wallet.detail.account)\n      if(positionInfo){\n        const direction = (+positionInfo.volume) > 0 ? 'LONG' : (positionInfo.volume == 0 ? '--' : 'SHORT') \n        positionInfo.direction = direction\n        positionInfo.balanceContract = (+positionInfo.margin) + (+positionInfo.unrealizedPnl)\n        setPositionInfo(positionInfo);\n      }\n    }\n  }\n\n  const onClosePosition = async () => {\n    setClosing(true)\n    const res = await closePosition(wallet.detail.chainId,spec.pool,wallet.detail.account).finally(() => setClosing(false))\n    if(res.success){\n      loadPositionInfo();\n    } else {            \n      if(typeof res.error === 'string') {\n        alert(res.error)\n      } else if(typeof res.error === 'object'){\n        alert(res.error.errorMessage)\n      } else {\n        alert('Liquidation failed')\n      }\n    }\n  }\n\n  useEffect(() => {\n    loadPositionInfo();\n    return () => {};\n  }, [wallet.detail.account,spec.pool])\n\n  return (\n    <div className='position-box' >\n    <div className='p-box theader'>\n      <div>Position</div>\n      <div>Average Entry Price</div>\n      <div>Direction</div>\n      <div>\n        Balance in Contract<br />\n        (Dynamic Balance)\n      </div>\n      <div>Margin</div>\n      <div>Unrealized PnL</div>\n      <div>Liquidation Price</div>\n    </div>\n    <div className='p-box tbody'>\n      <div>\n        {positionInfo.volume}\n        <span className='close-position'>\n          <span\n            className='spinner spinner-border spinner-border-sm'\n            style={{display : closing ? 'block' : 'none'}}\n          ></span>\n          <img src={closePosImg} onClick={onClosePosition}/>\n        </span>\n      </div>\n      <div><NumberFormat value={positionInfo.averageEntryPrice} displayType='text' decimalScale={2}/></div>\n      <div className={positionInfo.direction}>{positionInfo.direction}</div>\n      <div>\n        <NumberFormat value={positionInfo.balanceContract} displayType='text' decimalScale={2}/>\n        <span className='open-add' onClick={()=> setAddModalIsOpen(true)} >\n          <svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 18 18'>\n            <path id='login' d='M13,9,7,4V7H0v4H7v3Zm3,7H8v2h8a2.006,2.006,0,0,0,2-2V2a2.006,2.006,0,0,0-2-2H8V2h8Z' transform='translate(18) rotate(90)' fill='#3ebf38' />\n          </svg>\n        </span>\n        <span className='open-remove' onClick={() => setRemoveModalIsOpen(true)}>\n          <svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 18 18'>\n            <path id='log-out' data-name='log out' d='M18,9,12,4V7H5v4h7v3ZM2,2h8V0H2A2.006,2.006,0,0,0,0,2V16a2.006,2.006,0,0,0,2,2h8V16H2Z' transform='translate(0 18) rotate(-90)' fill='#e35061' />\n          </svg>\n        </span>\n      </div>\n      <div><NumberFormat value={positionInfo.marginHeld} displayType='text' decimalScale={2}/></div>\n      <div><NumberFormat value={positionInfo.unrealizedPnl} displayType='text' decimalScale={8}/></div>\n      <div><NumberFormat value={positionInfo.liquidationPrice} displayType='text' decimalScale={2}/></div>\n    </div>\n    <div className='p-box tbody'></div>\n\n      <DepositDialog\n        wallet={wallet}\n        modalIsOpen={addModalIsOpen} \n        onClose={onCloseDeposit}\n        spec={spec}\n        afterDeposit={afterDeposit}\n      />\n      <WithDrawDialog\n        wallet={wallet}\n        modalIsOpen={removeModalIsOpen} \n        onClose={onCloseWithdraw}\n        spec={spec}\n        afterWithdraw={afterWithdraw}\n        />\n  </div>\n  )\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAlCAYAAADFniADAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF62lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMS0wNC0wMlQxNTozODoxMyswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjEtMDQtMDZUMjA6MDU6MTIrMDg6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjEtMDQtMDZUMjA6MDU6MTIrMDg6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDlkYTVmMGQtZjBkZC0xYTRiLTlhNWUtZTBlNDMwZTI5OGI3IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6OGU2NWEzMTAtM2M4YS1jMDQ3LWIyMDAtZjZhYTZkMDlkNWRlIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MDUwZmRhMGUtNTUyNC0wNjQxLTg1ZmYtYWUyNjAyODUxMzgzIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowNTBmZGEwZS01NTI0LTA2NDEtODVmZi1hZTI2MDI4NTEzODMiIHN0RXZ0OndoZW49IjIwMjEtMDQtMDJUMTU6Mzg6MTMrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ5ZGE1ZjBkLWYwZGQtMWE0Yi05YTVlLWUwZTQzMGUyOThiNyIgc3RFdnQ6d2hlbj0iMjAyMS0wNC0wNlQyMDowNToxMiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4SuXJrAAACqElEQVRYhb3XTWjTYBgH8P+bJq+0TrbatZui4EG3irCNQXVM0CqeBA+CwvAk6EVEQfy4eRFPfiGK4EUGeqgX8aSC4vAiBYnSdkNHFUFh6qGvbWFKmzSJF1Mzl3RvPpr/8X2ekB8P7wMJkWUZudx3cWpqnVJk9MZYv3IOIedTXXzb1PB129rWQQCIIJsVj2Y3qQZABmLaZJHRNYMx7XmYoM29rfFUVE/PMWk4FdMfEVmWDWuTbgAlRq+HMTETZD2bZdJ9ocSke1aVQICRhHK2UKHXwgYpOjEaeuSVMJJQj8+GDLMDNTRiFNmqY5lkY1oAgDBhziB6JJNsTAOAYBbCgHUC7Ug1H7bfa23oJowXtAzVLdjHuviGF2SLChpWron5Lb2tDC/IERUUrFwT80N9rQk3oI4oE1Zi9K4XmFfQiigAGE0oJ4qM3nYD8wPiQgHAWEI5zQvzC+JG8cKCAAEAkWWZtxcAUGD01mhCOUUsZ7oBLPyKfNvYo633CwJcTMqM08SCAnlCOcGCAnlGmbCFRfGHXe1zXXzmFeQLVa6J+Q09rUG72nBc3f+uQi+FirLbMmsiBBhNKBe9wlyjHNZe/1CVXlrvmB+YK5QTqFQRD22Nq/v+v/xeYdyoTqDtA+pjwH4rvcC4UDwgM0HAVkS5AQUF64jyAgoC5ogq16TXXkF+Ybao+ao0M9SnTvoBLYFVpJu6RbYSbBlqvirNpOPqniBAbVi/eqbE6FVe2BJUN0D/YMoFXlgb1U2QW5gQFsgNLLLr8MnQQGYGY9qLIqOrU1FtJ/n7CSsQIBXVdhcrFALI0gd+t7oLMmM3McMADBBNSPepe99XpSdtEJMOdBtkB1N1ggKj58eTzcvtH4e5n9KDRZXkJgaUp2GArClU6BVVF75kUo07APAH3WicsIPb8YcAAAAASUVORK5CYII=\"","import React, { useState,useEffect } from 'react'\nimport dateFormat from 'date-format'\nimport { getTradeHistory } from '../../../../lib/web3js';\nimport NumberFormat from 'react-number-format';\n\nexport default function History({wallet,spec}) {\n  const [history, setHistory] = useState([]);\n\n  useEffect(() => {\n    const loadHistory = async () => {\n      if(wallet.isConnected() && spec.pool){\n        const his = await getTradeHistory(wallet.detail.chainId,spec.pool,wallet.detail.account);    \n        setHistory(his)\n      }\n    }\n    loadHistory()\n    return () => {\n    };\n  }, [wallet.detail.account,spec]);\n  return (\n    <div className='history-box'>\n      <div className='p-box theader'>\n        <div className='td'>Time</div>\n        <div>Direction</div>\n        <div>Base Token</div>\n        <div>Price</div>\n        <div>Volume</div>\n        <div>Notional</div>\n        <div>Transaction Fee</div>\n      </div>\n      {history.map((his,index) => {\n        return (\n          <div className='p-box tbody' key={index}>\n            <div className='td'>\n              {dateFormat.asString('yyyy-MM-dd hh:mm:ss',new Date(parseInt(his.time)))}\n            </div>\n            <div className={his.direction}>\n              {his.direction === 'LONG' ? `${his.direction} / BUY` : `${his.direction} / SELL`}\n            </div>\n            <div>\n              {his.baseToken}\n            </div>\n            <div>\n              <NumberFormat value={his.price} displayType='text' decimalScale={2}/>\n            </div>\n            <div>\n              {his.volume}\n            </div>\n            <div >\n              {his.notional}\n            </div>\n            <div >\n              {his.transactionFee}\n            </div>\n          </div>\n        )\n      })}\n    </div>\n  )\n}","\nimport React, { useState, useEffect } from 'react'\nimport Position from \"./Position\";\nimport History from \"./History\";\nimport classNames from \"classnames\";\n\nexport default function Reference({wallet,spec}) {\n  const [curTab, setCurTab] = useState('position');\n\n  const switchTab = tab => {\n    setCurTab(tab)\n  }\n\n  const curClassName = classNames('position-info',curTab)\n\n  return (\n    <div className={curClassName}>\n      <div className='position-header'>\n        <div className='position-title'>          \n          <span className=\"position-info-title\">POSITION INFO</span>\n          <span className=\"history-info-title\">TRADE HISTORY</span>\n        </div>\n        <div className='check-position-history '>\n          <div\n            className='btn-position'\n            onClick={() => switchTab('position')}\n          >\n            CURRENT POSITION\n              </div>\n          <div\n            className='btn-history'            \n            onClick={() => switchTab('history')}\n          >\n            TRADE HISTORY\n              </div>\n        </div>\n      </div>\n      <div className='pos-his-info '>\n        <Position wallet={wallet} spec={spec}/>\n        <History wallet={wallet} spec={spec}/>\n      </div>\n    </div>\n  )\n}","import { useEffect } from 'react'\n\nimport Lite from '../../../../components/Lite/Lite'\nimport TradingView from './TradingView'\nimport Reference from './Reference'\nimport './pro.less'\n\nexport  default function Pro({wallet,specs,spec,onSpecChange,indexPrice}){\n\n  return (\n    <div className='trade-pro'>\n      <div className='left'>\n        <Lite wallet ={wallet} isPro={true} spec={spec} specs={specs} indexPrice={indexPrice}  onSpecChange={onSpecChange}/>\n      </div>\n      <div className='right'>\n          <TradingView wallet={wallet} spec={spec} indexPrice={indexPrice}/>\n          <Reference wallet={wallet} spec={spec}/>\n        </div>\n    </div>\n  )\n}"],"sourceRoot":""}