{"version":3,"sources":["utils/DeriNumberFormat.js","components/Pool/PoolBox.js","hooks/useMiningPool.js","hooks/useSlpMiningPool.js","desktop/components/Mining/Pool.js"],"names":["DeriNumberFormat","val","replace","props","renderText","this","format","displayType","React","Component","chainConfig","config","DeriEnv","get","PoolBox","pool","logoClassName","bTokenSymbol","history","useHistory","className","network","toUpperCase","value","liquidity","thousandSeparator","decimalScale","symbol","apy","suffix","sushiApy","target","rel","href","chainId","address","onClick","push","env","chainInfo","useMiningPool","useState","loaded","setLoaded","pools","setPools","useEffect","configs","getContractAddressConfig","map","a","getPoolLiquidity","liqPool","getPoolInfoApy","apyPool","Object","assign","name","formatBalance","formatAddress","Promise","all","then","length","useSlpMiningPool","slpPools","setSlpPools","slpConfig","getSlpContractAddressConfig","getSlpPoolInfoApy","toFixed","deriapy","deriNatural","Pool","concat","index"],"mappings":"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","file":"static/js/10.ad6d7fe0.chunk.js","sourcesContent":["import React from 'react'\nimport NumberFormat from 'react-number-format'\n\nexport default class DeriNumberFormat extends React.Component {\n\n\n  format(val){    \n    //把非数字过滤\n    const trimed = val.replace(/\\W+/g,'')\n    if((trimed) ){\n      return val;\n    } else {\n      return '--';\n    }\n  }\n\n  render(){\n    const props = {\n      renderText : this.format,\n      displayType : 'text',\n      ...this.props\n    }\n    return(\n      <NumberFormat {...props} />\n    )\n  }\n}","import {useHistory} from 'react-router-dom'\nimport NumberFormat from 'react-number-format';\nimport config from  '../../config.json'\nimport { DeriEnv } from '../../lib/web3js/index.js';\nimport DeriNumberFormat from '../../utils/DeriNumberFormat';\n\nconst chainConfig = config[DeriEnv.get()]['chainInfo'];\n\nexport default function PoolBox({pool}){\n  const logoClassName = `logo ${pool.bTokenSymbol}`\n  const history = useHistory();\n  const mining = () => history.push(`/mining/${pool.chainId}/${pool.symbol}/${pool.bTokenSymbol}/${pool.address}`)\n  \n  return(\n    <div className=\"pool\" >\n      <div className=\"pool-header\">\n        <div className=\"network\">\n          {pool.network.toUpperCase()}\n        </div>\n      </div>\n      <div className=\"pool-info\">\n        <div className=\"info-center\">\n          <div className=\"top-info\">\n            <div className={logoClassName} ></div>\n            <div className=\"pool-detail\">\n              <div className=\"base-token\">{pool.bTokenSymbol}</div>\n              <div>\n                <span>Pool Liq</span>\n                <DeriNumberFormat value={pool.liquidity} displayType='text' thousandSeparator={true} decimalScale={0}/>\n              </div>\n              <div>\n                <span>Symbol</span>\n                {pool.symbol}\n              </div>\n              <div className=\"apy\">\n                <span>APY</span>\n                <span>\n                  <span>\n                    <DeriNumberFormat value={pool.apy} suffix='%' displayType='text' decimalScale={2}/>                  \n                  </span>\n                  {pool.sushiApy &&<>\n                  <span>+</span>\n                  <span > <DeriNumberFormat value={pool.sushiApy} displayType='text' suffix='%' decimalScale={2}/>}</span>\n                  </>}\n                </span>\n                \n              </div>\n              <div className=\"pool-address\">\n                <span>Address</span>\n                <a target='_blank' rel='noreferrer' href={`${chainConfig[pool.chainId]['viewUrl']}/address/${pool.address}`}>{pool.pool}</a>\n              </div>\n            </div>\n          </div>\n          <div className=\"bottom-btn\">\n              <button onClick={mining}>\n                STAKING\n              </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}","import {useState,useEffect} from 'react';\nimport {\n  DeriEnv,\n  getContractAddressConfig,\n  getPoolLiquidity,\n  getPoolInfoApy,\n} from '../lib/web3js/index'\nimport config from '../config.json'\nimport { formatAddress, formatBalance } from '../utils/utils';\n\nconst env = DeriEnv.get();\nconst {chainInfo} = config[env]\n\nexport default function useMiningPool(){\n  const [loaded,setLoaded] = useState(false)\n  const [pools, setPools] = useState([])\n\n\n  useEffect(() => {\n    const configs = getContractAddressConfig(env).map(async config =>  {\n      const liqPool = await getPoolLiquidity(config.chainId,config.pool) || {}\n      const apyPool = await getPoolInfoApy(config.chainId,config.bTokenSymbol) || {}\n      const pool = config.pool || ''\n      return Object.assign(config,{ \n        network : chainInfo[config.chainId].name,\n        liquidity : formatBalance(liqPool.liquidity),\n        apy : apyPool.apy,\n        pool : formatAddress(pool),\n        address : pool\n      })\n    })\n    Promise.all(configs).then(pools => {\n      setPools(pools);\n      setLoaded(true)\n    })\n    return () => pools.length = 0\n  })\n  return [loaded,pools];\n}","import {useState,useEffect} from 'react';\n\nimport {\n  getPoolLiquidity,\n  getSlpContractAddressConfig,\n  getSlpPoolInfoApy,\n  DeriEnv\n} from '../lib/web3js/index'\nimport { deriNatural} from '../utils/utils';\n\nconst env = DeriEnv.get();\n\nexport default function useSlpMiningPool(){\n  const [slpPools, setSlpPools] = useState([])\n\n  useEffect(() => {\n    const slpConfig = getSlpContractAddressConfig(env).map(async config => {\n      const liqPool = await getPoolLiquidity(config.chainId,config.pool);\n      const apyPool = await getSlpPoolInfoApy(config.chainId,config.pool)\n      let sushiApy =  0.22008070161007/liqPool.liquidity;\n      sushiApy = (sushiApy * 100).toFixed(2) + \"%\";\n      let deriapy = deriNatural(apyPool.apy)\n      if (deriapy == \"0\") {\n        deriapy = \"--\";\n      } else {\n        deriapy = (deriapy * 100).toFixed(2) + \"%\";\n      }\n      return Object.assign(config,{\n        deriapy,\n        sushiApy,\n        bTokenSymbol : 'DERI-USDT SLP'\n      })\n    })\n    Promise.all(slpConfig).then(pools => {\n      setSlpPools(pools)\n    })\n    return () => {\n      slpPools.length = 0\n    }\n  },[])\n\n  return slpPools;\n}","import PoolBox from '../../../components/Pool/PoolBox';\nimport useMiningPool from '../../../hooks/useMiningPool';\nimport useSlpMiningPool from '../../../hooks/useSlpMiningPool';\nimport './pool.less'\n\n\nexport default function Pool(){\n  const [loaded,pools] = useMiningPool();\n  const slpPools = useSlpMiningPool()  \n  const all = pools.concat(slpPools)\n  return (\n    <div className=\"mining-info\">\n      <div className=\"pools\">\n        {all.map((pool,index) => <PoolBox pool={pool} key={index}/>)}\n        {!loaded && <div className=\"loading\">\n          <span\n            className=\"spinner spinner-border spinner-border-sm\">\n            </span>\n          </div>}  \n      </div>\n    </div>\n  )\n}"],"sourceRoot":""}