{"version":3,"sources":["components/Button/Button.js","components/hoc/withModal.js","hooks/useInterval.js","components/Slider/Slider.js","components/ContractInfo/ContractInfo.js","mobile/pages/trade/Trade.js"],"names":["Button","btnText","className","disabled","click","afterClick","useState","status","setStatus","pending","setPending","loadRef","useRef","onClick","a","current","style","display","ref","marginRight","withModal","Component","appElement","document","getElementById","customizeStyle","overlay","position","background","zIndex","content","border","inset","overflow","props","state","modalIsOpen","this","isOpen","onClose","React","useInterval","callback","delay","savedCallback","useEffect","id","setInterval","clearInterval","Handle","RcSlider","handle","value","index","dragging","restProps","prefixCls","placement","visible","overlayStyle","overlayInnerStyle","color","fontSize","boxShadow","Slider","max","start","onValueChange","limit","setLimit","setValue","setDisabled","marks","setMarks","isNaN","mark","per","i","top","width","left","paddingRight","toFixed","min","onChange","step","ContractInfo","wallet","spec","bSymbol","symbol","multiplier","fundingRateCoefficient","minInitialMarginRatio","minMaintenanceMarginRatio","feeRatio","contract","setContract","setSpec","pool","isConnected","getSpecification","detail","chainId","account","contractInfo","displayType","decimalScale","suffix","config","DeriEnv","get","inject","observer","indexPrice","specs","useDeriConfig","length","onSpecChange","pause"],"mappings":"iNACe,SAASA,EAAT,GAA+D,IAA9CC,EAA6C,EAA7CA,QAAQC,EAAqC,EAArCA,UAAUC,EAA2B,EAA3BA,SAASC,EAAkB,EAAlBA,MAAMC,EAAY,EAAZA,WAAY,EAC/CC,mBAASH,EAAW,WAAa,WADc,mBACpEI,EADoE,KAC5DC,EAD4D,OAE7CF,oBAAS,GAFoC,mBAEpEG,EAFoE,KAE3DC,EAF2D,KAGrEC,EAAUC,iBAAO,MAEjBC,EAAO,uCAAG,sBAAAC,EAAA,yDACA,YAAXP,EADW,wDAIdC,EAAU,YACVE,GAAW,GACXC,EAAQI,UAAYJ,EAAQI,QAAQC,MAAMC,QAAU,gBANtC,SAOOb,IAPP,eASZC,GAAcA,IAEhBM,EAAQI,UAAYJ,EAAQI,QAAQC,MAAMC,QAAU,QACpDT,EAAU,WACVE,GAAW,GAbG,4CAAH,qDAgBb,OACE,yBAAQR,UAAWA,EAAWW,QAASA,EAAvC,UACI,sBAAMX,UAAU,mBAAhB,SACE,sBAAMgB,IAAKP,EACTT,UAAU,2CACVc,MAAO,CAACC,QAAU,OAAQE,YAAc,SAGzCV,EAAU,UAAYR,O,oHCUlBmB,IArCG,SAAAC,GAChB,IAAMC,EAAaC,SAASC,eAAe,QACrCC,EAAkB,CACtBC,QAAS,CACPC,SAAU,QACVC,WAAY,OACZC,OAAS,GAEXC,QAAS,CACPH,SAAU,WACVI,OAAS,EACTH,WAAa,OACbI,MAAQ,EACRC,SAAW,YAsBf,OAnC6B,kDAkB3B,WAAYC,GAAO,IAAD,8BAChB,cAAMA,IACDC,MAAQ,CACXC,aAAc,GAHA,EAlBS,0CAyB3B,WAAS,IACAA,EAAeC,KAAKH,MAApBE,YACP,OACE,cAAC,IAAD,CAAOE,OAAQF,EAAapB,MAAOS,EAAgBH,WAAYA,EAA/D,SACE,cAACD,EAAD,2BAAegB,KAAKH,OAApB,IAA2BK,QAASF,KAAKH,MAAMK,iBA7B1B,GAiBLC,IAAMnB,a,iCCpBhC,6CAEe,SAASoB,EAAYC,EAASC,GAC3C,IAAMC,EAAgBhC,iBAAO8B,GAE7BG,qBAAU,WACRD,EAAc7B,QAAU2B,IACvB,CAACA,IAEJG,qBAAU,WACR,GAAc,OAAVF,EAAJ,CAIA,IAAMG,EAAKC,aAAY,kBAAMH,EAAc7B,YAAW4B,GAEtD,OAAO,kBAAMK,cAAcF,OAC1B,CAACH,M,wICbEM,EAAWC,IAAXD,OAGP,SAASE,EAAOjB,GAAO,IACdkB,EAAyClB,EAAzCkB,MAAiBC,GAAwBnB,EAAlCoB,SAAkCpB,EAAxBmB,OAAUE,EADd,YAC4BrB,EAD5B,8BAErB,OACE,cAAC,IAAD,CACEsB,UAAU,oBACV9B,QAAW0B,GAAgB,GAC3BK,UAAU,MAEVC,UAAWN,EACXO,aAAc,CAAC1C,QAAU,SACzB2C,kBAAmB,CAACC,MAAQ,UAAUjC,WAAa,OAAOX,QAAU,QAAS6C,SAAW,OAAOC,UAAY,QAP7G,SASE,cAACd,EAAD,aAAQG,MAAOA,GAAWG,KALrBF,GAWI,SAASW,EAAT,GAA2C,IAA1BC,EAAyB,EAAzBA,IAAIC,EAAqB,EAArBA,MAAMC,EAAe,EAAfA,cAAe,EAC7B7D,mBAAS,GADoB,mBAChD8D,EADgD,KACzCC,EADyC,OAE7B/D,mBAAS,GAFoB,mBAEhD8C,EAFgD,KAEzCkB,EAFyC,OAGvBhE,oBAAS,GAHc,mBAGhDH,EAHgD,KAGtCoE,EAHsC,OAI7BjE,mBAAS,IAJoB,mBAIhDkE,EAJgD,KAIzCC,EAJyC,KAsDvD,OA3CA5B,qBAAU,WACR,GAAG6B,MAAMT,GACPI,EAAS,QACH,CAEJE,KADGN,EAAO,IAQZ,IAHA,IAAMU,EAAO,GAEPC,GAAQX,EAAO,GACbY,EAAI,EAAIA,GAAG,GAAKA,IACtB,GAAS,IAANA,GAAgB,KAALA,EAAS,CACrB,IAAM7D,EAAQ,CAAC8D,IAAK,QAAQnD,SAAU,YAC9B,KAALkD,IACD7D,EAAM+D,MAAQ,IACd/D,EAAMgE,KAAO,QACbhE,EAAMiE,aAAe,QAEvBN,EAAKE,EAAED,GAAO,qCAAE,qBAAK5D,MAAOA,EAAZ,SAA0B,KAAN6D,GAAYA,EAAED,GAAKM,QAAQ,GAAKL,EAAID,IAAU,qBAAK5D,MAAO,CAAC8D,IAAK,QAAQnD,SAAU,YAApC,uBAElFgD,EAAKE,EAAED,GAAO,IAIlBH,EAASE,GACTN,GAAUJ,GAGZ,OAAO,eACN,CAACA,IAEJpB,qBAAU,WAMR,OALG6B,MAAMR,GACPI,EAAS,GAETA,EAASJ,GAEJ,eAEN,CAACA,IAGA,cAAC,IAAD,CACEf,OAAQA,EACRjD,UAAU,cACVgE,MAAOA,EACPiB,IAAK,EACLlB,IAAKG,EACLhB,MAAOA,EACPgC,SAxDiB,SAAAhC,GACrBkB,EAASlB,GACTe,EAAcf,IAuDVjD,SAAUA,EACVuB,QAAS0B,EACTiC,KAAM,IACNb,MAAOA,M,4JCtFA,SAASc,EAAT,GAAyC,IAAlBC,EAAiB,EAAjBA,OAAiB,IAAVC,YAAU,MAAJ,GAAI,IACrBlF,mBAAS,CACvCmF,QAAU,OACVC,OAAS,SACTC,WAAa,SACbC,uBAAyB,YACzBC,sBAAwB,GACxBC,0BAA4B,KAC5BC,SAAW,MARwC,mBAC9CC,EAD8C,KACpCC,EADoC,KAsBrD,OAXApD,qBAAU,WACR,IAAMqD,EAAO,uCAAG,4BAAApF,EAAA,0DACX0E,EAAKW,OAAQZ,EAAOa,cADT,gCAEeC,YAAiBd,EAAOe,OAAOC,QAAQf,EAAKW,KAAKZ,EAAOe,OAAOE,SAF9E,OAENC,EAFM,OAGZR,EAAYQ,GAHA,2CAAH,qDAOb,OADAlB,GAAUW,IACH,eACN,CAACV,EAAKD,IAGP,sBAAKrF,UAAU,eAAf,UACE,qBAAKA,UAAU,oBACf,sBAAKA,UAAU,gBAAf,UACE,qBAAKA,UAAU,mBAAf,2BACA,sBAAKA,UAAU,OAAf,UACE,qBAAKA,UAAU,QAAf,wBACA,qBAAKA,UAAU,OAAf,SACI8F,EAASP,aAGf,sBAAKvF,UAAU,OAAf,UACE,qBAAKA,UAAU,QAAf,oBACA,qBAAKA,UAAU,OAAf,SACI8F,EAASN,YAGf,sBAAKxF,UAAU,OAAf,UACE,qBAAKA,UAAU,QAAf,wBACA,qBAAKA,UAAU,OAAf,SACI8F,EAASL,gBAGf,sBAAKzF,UAAU,OAAf,UACE,qBAAKA,UAAU,QAAf,sCACA,qBAAKA,UAAU,OAAf,SACI8F,EAASJ,4BAGf,sBAAK1F,UAAU,OAAf,UACE,qBAAKA,UAAU,QAAf,sCACA,qBAAKA,UAAU,OAAf,SACE,cAAC,IAAD,CAAcwG,YAAY,OAAOtD,MAA0C,IAAjC4C,EAASH,sBAA8Bc,aAAc,EAAGC,OAAO,WAG7G,sBAAK1G,UAAU,OAAf,UACE,qBAAKA,UAAU,QAAf,0CACA,qBAAKA,UAAU,OAAf,SACE,cAAC,IAAD,CAAcwG,YAAY,OAAOtD,MAA8C,IAArC4C,EAASF,0BAAkCa,aAAc,EAAGC,OAAO,WAGjH,sBAAK1G,UAAU,OAAf,UACE,qBAAKA,UAAU,QAAf,6BACA,qBAAKA,UAAU,OAAf,SACE,cAAC,IAAD,CAAcwG,YAAY,OAAOtD,MAA6B,IAApB4C,EAASD,SAAiBY,aAAc,EAAGC,OAAO,mB,8JC7DnFC,EAAOC,IAAQC,OAAf,OA+CNC,sBAAO,SAAS,aAAhBA,CAA8BC,aA7C7C,YAAoC,IAApB1B,EAAmB,EAAnBA,OAAO2B,EAAY,EAAZA,WAAY,EACT5G,mBAAS,IADA,mBAC1BkF,EAD0B,KACpBU,EADoB,KAE3BiB,EAAQC,YAAc7B,EAAOe,QAUnCzD,qBAAU,WAIR,OAHG2C,EAAKE,QACNwB,EAAWhD,MAAMsB,EAAKE,QAEjB,eAEN,CAACF,EAAKE,SAGT7C,qBAAU,WAKR,OAJGsE,EAAME,OAAS,IAChBnB,EAAQiB,EAAM,IACdD,EAAWhD,MAAMiD,EAAM,GAAGzB,SAErB,eAGN,CAACyB,IAEJ,IAAMjF,EAAQ,CACZqD,SACA4B,QACA3B,OACA8B,aA9BmB,SAAA9B,GACnB0B,EAAWK,QACXrB,EAAQV,IA6BR0B,cAEF,OACE,qBAAKhH,UAAU,aAAf,SACE,cAAC,IAAD,eAAegC","file":"static/js/10.0becedb1.chunk.js","sourcesContent":["import {useState,useRef} from 'react';\nexport default function Button({btnText,className,disabled,click,afterClick}){\n  const [status, setStatus] = useState(disabled ? 'disabled' : 'enabled');\n  const [pending, setPending] = useState(false);\n  const loadRef = useRef(null)\n\n  const onClick = async () => {\n    if(status !== 'enabled') {\n      return ;\n    }\n    setStatus('disabled')\n    setPending(true);\n    loadRef.current && (loadRef.current.style.display = 'inline-block')\n    const result = await click();    \n    if(result){\n      afterClick && afterClick()\n    } \n    loadRef.current && (loadRef.current.style.display = 'none')\n    setStatus('enabled')\n    setPending(false);\n  }\n\n  return(\n    <button className={className} onClick={onClick} >\n        <span className='btn-loading-wrap'>\n          <span ref={loadRef}\n            className='spinner spinner-border spinner-border-sm'\n            style={{display : 'none' ,marginRight : '2'}}>\n          </span>\n        </span>\n          {pending ? 'PENDING' : btnText  }\n        </button>\n  )\n}","import React from 'react'\nimport Modal from 'react-modal/lib/components/Modal';\n\nconst withModal = Component => {\n  const appElement = document.getElementById('root')\n  const customizeStyle =  {\n    overlay: {\n      position: 'fixed',\n      background: 'none',\n      zIndex : 2\n    },\n    content: {\n      position: 'absolute',\n      border : 0,\n      background : 'none',\n      inset : 0,\n      overflow : 'initial'\n    }\n  };\n\n  class WithModal extends React.Component {\n    constructor(props){\n      super(props)\n      this.state = {\n        modalIsOpen : false\n      }\n    }\n\n    render(){\n      const {modalIsOpen} = this.props\n      return (\n        <Modal isOpen={modalIsOpen} style={customizeStyle} appElement={appElement}>\n          <Component {...this.props} onClose={this.props.onClose}/>\n        </Modal>\n      )\n    }\n  }\n\n  return WithModal;\n}\nexport default withModal;","import { useRef,useEffect } from 'react'\n\nexport default function useInterval(callback,delay){\n  const savedCallback = useRef(callback)\n\n  useEffect(() => {\n    savedCallback.current = callback\n  }, [callback])\n\n  useEffect(() => {\n    if (delay === null) {\n      return\n    }\n\n    const id = setInterval(() => savedCallback.current(), delay)\n\n    return () => clearInterval(id)\n  }, [delay])\n}","import React, { useState,useEffect } from 'react'\nimport RcSlider,{SliderTooltip} from 'rc-slider'\nimport 'rc-slider/assets/index.css';\nimport './slider.less'\nconst { Handle } = RcSlider;\n\n\n function handle(props){\n  const { value, dragging, index, ...restProps } = props;\n  return (\n    <SliderTooltip\n      prefixCls=\"rc-slider-tooltip\"\n      overlay={!!value ? value : ''}\n      placement=\"top\"\n      key={index}\n      visible={!!value ? true : false}\n      overlayStyle={{display : 'block'}}\n      overlayInnerStyle={{color : '#569BDA',background : 'none',display : 'block' ,fontSize : '10px',boxShadow : 'none'}}\n    >\n      <Handle value={value} {...restProps} />\n    </SliderTooltip>\n  );\n};\n\n\nexport default function Slider({max,start,onValueChange}){\n  const [limit, setLimit] = useState(0);\n  const [value, setValue] = useState(0);\n  const [disabled, setDisabled] = useState(false);\n  const [marks, setMarks] = useState({});\n\n  const onSliderChange = value => {\n    setValue(value)\n    onValueChange(value);\n  }\n\n  useEffect(() => {\n    if(isNaN(max)){\n      setLimit('')\n    }  else {\n      if((+max) > 0){\n        setDisabled(false)\n      } else {\n        setDisabled(true)\n      }\n      const mark = {\n      };\n      const per = (+max) / 10\n      for(let i = 0 ; i<=10 ; i++){\n        if(i === 0 || i ===10 ){\n          const style = {top: '-16px',position: 'relative'}\n          if(i ===10){\n            style.width = 100;\n            style.left = '-10px'\n            style.paddingRight = '10px'            \n          }\n          mark[i*per] = <><div style={style}>{i === 10 ? (i*per).toFixed(2) : i * per}</div><div style={{top: '-16px',position: 'relative'}}>l</div></>\n        } else{\n          mark[i*per] = 'l'\n        }\n        \n      }\n      setMarks(mark);\n      setLimit(+max)\n    }\n\n    return () => {};\n  }, [max]);\n\n  useEffect(() => {\n    if(isNaN(start)){\n      setValue(0)\n    } else {\n      setValue(start)\n    }\n    return () => {      \n    };\n  }, [start]);\n\n  return (\n      <RcSlider\n        handle={handle}\n        className='deri-slider' \n        start={start}\n        min={0}\n        max={limit}\n        value={value}\n        onChange={onSliderChange}\n        disabled={disabled}\n        overlay={value}\n        step={0.01}\n        marks={marks}\n       >\n        {/* <div className='rc-slider-text'><span>0</span><span>{max}</span></div>         */}\n        {/* <div className='m-rc-slider-mark'>\n          <span style={{left:0}}>l</span>\n          <span style={{left:'10%'}}>l</span>\n          <span style={{left:'20%'}}>l</span>\n          <span style={{left:'30%'}}>l</span>\n          <span style={{left:'40%'}}>l</span>\n          <span style={{left:'50%'}}>l</span>\n          <span style={{left:'60%'}}>l</span>\n          <span style={{left:'70%'}}>l</span>\n          <span style={{left:'80%'}}>l</span>\n          <span style={{left:'90%'}}>l</span>\n          <span style={{left:'99%'}}>l</span>\n        </div> */}\n      </RcSlider>\n  )\n}","import React, { useState,useEffect} from 'react'\nimport NumberFormat from 'react-number-format'\nimport { getSpecification } from '../../lib/web3js';\n\n\nexport default function ContractInfo({wallet,spec ={}}){\n  const [contract, setContract] = useState({\n    bSymbol : 'USDT',\n    symbol : 'BTCUSD',\n    multiplier : '0.0001',\n    fundingRateCoefficient : '0.0000025',\n    minInitialMarginRatio : 0.1,\n    minMaintenanceMarginRatio : 0.0005,\n    feeRatio : 0.05\n  }); \n\n  useEffect(() => { \n    const setSpec = async () => {           \n      if(spec.pool && wallet.isConnected()){\n        const contractInfo = await getSpecification(wallet.detail.chainId,spec.pool,wallet.detail.account) \n        setContract(contractInfo)  \n      }\n    }\n    wallet && setSpec();\n    return () => {};\n  }, [spec,wallet]);\n  \n  return(\n    <div className=\"contract-box\">\n      <div className='contract-header'></div>\n      <div className=\"contract-info\">\n        <div className=\"conntract-header\">CONTRACT INFO</div>\n        <div className=\"info\">\n          <div className=\"title\">Base Token</div>\n          <div className=\"text\">\n            { contract.bSymbol }\n          </div>\n        </div>\n        <div className=\"info\">\n          <div className=\"title\">Symbol</div>\n          <div className=\"text\">\n            { contract.symbol }\n          </div>\n        </div>\n        <div className=\"info\">\n          <div className=\"title\">Multiplier</div>\n          <div className=\"text\">\n            { contract.multiplier }\n          </div>\n        </div>\n        <div className=\"info\">\n          <div className=\"title\">Funding Rate Coefficient</div>\n          <div className=\"text\">\n            { contract.fundingRateCoefficient }\n          </div>\n        </div>\n        <div className=\"info\">\n          <div className=\"title\">Min Initial Margin Ratio</div>\n          <div className=\"text\">\n            <NumberFormat displayType='text' value ={ contract.minInitialMarginRatio * 100 } decimalScale={2} suffix='%'/>\n          </div>\n        </div>\n        <div className=\"info\">\n          <div className=\"title\">Min Maintenance Margin Ratio</div>\n          <div className=\"text\">\n            <NumberFormat displayType='text' value ={ contract.minMaintenanceMarginRatio * 100 } decimalScale={2} suffix='%'/>\n          </div>\n        </div>\n        <div className=\"info\">\n          <div className=\"title\">Transaction Fee</div>\n          <div className=\"text\">\n            <NumberFormat displayType='text' value ={ contract.feeRatio * 100 } decimalScale={2} suffix='%'/>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}","\nimport { useState ,useEffect,useCallback} from 'react'\nimport config from '../../../config.json'\nimport axios from 'axios'\nimport { DeriEnv, deriToNatural } from '../../../lib/web3js';\nimport LiteTrade from \"../../../components/Trade/LiteTrade\";\nimport './trade.less'\nimport { inject, observer } from 'mobx-react';\nimport useDeriConfig from '../../../hooks/useDeriConfig.js';\n\nconst oracleConfig = config[DeriEnv.get()]['oracle']\n\nfunction Trade({wallet,indexPrice}){\n  const [spec, setSpec] = useState({});  \n  const specs = useDeriConfig(wallet.detail)\n\n\n  const onSpecChange = spec => {\n    indexPrice.pause();\n    setSpec(spec)\n  }\n\n\n \n  useEffect(() => {\n    if(spec.symbol){\n      indexPrice.start(spec.symbol)\n    }\n    return () => {\n    };\n  }, [spec.symbol]);\n\n\n  useEffect(() => {\n    if(specs.length > 0){\n      setSpec(specs[0]);   \n      indexPrice.start(specs[0].symbol)   \n    }\n    return () => {\n\n    };\n  }, [specs]);\n\n  const props = {\n    wallet,\n    specs,\n    spec ,\n    onSpecChange,\n    indexPrice\n  }\n  return (\n    <div className='trade-body'>\n      <LiteTrade {...props}/>  \n    </div>    \n  )\n}\n\nexport default inject('wallet','indexPrice')(observer(Trade))"],"sourceRoot":""}